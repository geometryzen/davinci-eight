/*! davinci-eight 2017-03-06 */
System.register("davinci-eight/commands/WebGLBlendFunc.js",["../core/ShareableBase"],function(a,b){"use strict";var c,d,e=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(a){function b(b,c,d){var e=a.call(this)||this;return e.contextManager=b,e.setLoggingName("WebGLBlendFunc"),e.sfactor=c,e.dfactor=d,e}return e(b,a),b.prototype.destructor=function(b){this.sfactor=void 0,this.dfactor=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.contextFree=function(){},b.prototype.contextGain=function(){this.execute(this.contextManager.gl)},b.prototype.contextLost=function(){},b.prototype.execute=function(a){a.blendFunc(this.sfactor,this.dfactor)},b}(c.ShareableBase),a("default",d)}}}),System.register("davinci-eight/facets/getViewAttitude.js",["../math/Geometric3"],function(a,b){"use strict";function c(a,b,c,d){g.copyVector(a).subVector(b).normalize(),e.copyVector(c).dual(e).rco(g).neg(),f.copy(e).ext(g).dual(f),d.one().add(e.mul(h)).add(f.mul(i)).add(g.mul(j)),d.normalize()}b&&b.id;a("default",c);var d,e,f,g,h,i,j;return{setters:[function(a){d=a}],execute:function(){e=d["default"].zero(!1),f=d["default"].zero(!1),g=d["default"].zero(!1),h=d["default"].E1,i=d["default"].E2,j=d["default"].E3}}}),System.register("davinci-eight/controls/OrbitControls.js",["../math/Geometric3","../facets/getViewAttitude","../math/Spinor3","../math/Vector3","./ViewControls"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=c.Geometric3.zero(!1),i=c.Geometric3.zero(!1),j=c.Geometric3.zero(!1),k=e["default"].one.clone(),l=e["default"].one.clone(),m=f["default"].zero(),n=function(a){function b(b,c){void 0===c&&(c=window);var d=a.call(this,b,c)||this;return d.setLoggingName("OrbitControls"),d}return o(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b.prototype.rotateCamera=function(){if(this.hasView()){var a=this.moveCurr.distanceTo(this.movePrev);if(a>0){var b=2*a*Math.PI*this.rotateSpeed;m.copy(this.eyeMinusLook).add(this.look),d["default"](m,this.look,this.up,l),h.zero(),h.x=this.movePrev.x,h.y=this.movePrev.y,i.zero(),i.x=this.moveCurr.x,i.y=this.moveCurr.y,j.copy(i).sub(h),j.rotate(l),m.normalize(),k.wedge(m,j).normalize(),l.copy(k).scale(+b/2).exp(),this.eyeMinusLook.rotate(l)}}this.movePrev.copy(this.moveCurr)},b}(g.ViewControls),a("OrbitControls",n),a("default",n)}}}),System.register("davinci-eight/controls/MouseControls.js",["../checks/mustBeObject","../core/ShareableBase","../math/Vector2"],function(a,b){"use strict";var c,d,e,f,g,h,i=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},g=[65,83,68],h=function(a){function b(b){void 0===b&&(b=window);var d=a.call(this)||this;return d.enabled=!0,d.noRotate=!1,d.noZoom=!1,d.noPan=!1,d.minDistance=0,d.maxDistance=1/0,d.mode=f.NONE,d.prevMode=f.NONE,d.moveCurr=new e.Vector2,d.movePrev=new e.Vector2,d.zoomStart=new e.Vector2,d.zoomEnd=new e.Vector2,d.panStart=new e.Vector2,d.panEnd=new e.Vector2,d.screenLoc=new e.Vector2,d.circleExt=new e.Vector2,d.screenExt=new e.Vector2,d.mouseOnCircle=new e.Vector2,d.mouseOnScreen=new e.Vector2,d.setLoggingName("MouseControls"),d.wnd=c["default"]("wnd",b),d.mousedown=function(a){d.enabled&&(a.preventDefault(),a.stopPropagation(),d.mode===f.NONE&&(d.mode=a.button),d.mode!==f.ROTATE||d.noRotate?d.mode!==f.ZOOM||d.noZoom?d.mode!==f.PAN||d.noPan||(d.updateMouseOnScreen(a),d.panStart.copy(d.mouseOnScreen),d.panEnd.copy(d.mouseOnScreen)):(d.updateMouseOnScreen(a),d.zoomStart.copy(d.mouseOnScreen),d.zoomEnd.copy(d.mouseOnScreen)):(d.updateMouseOnCircle(a),d.moveCurr.copy(d.mouseOnCircle),d.movePrev.copy(d.mouseOnCircle)),d.wnd.document.addEventListener("mousemove",d.mousemove,!1),d.wnd.document.addEventListener("mouseup",d.mouseup,!1))},d.mousemove=function(a){d.enabled&&(a.preventDefault(),a.stopPropagation(),d.mode!==f.ROTATE||d.noRotate?d.mode!==f.ZOOM||d.noZoom?d.mode!==f.PAN||d.noPan||(d.updateMouseOnScreen(a),d.panEnd.copy(d.mouseOnScreen)):(d.updateMouseOnScreen(a),d.zoomEnd.copy(d.mouseOnScreen)):(d.movePrev.copy(d.moveCurr),d.updateMouseOnCircle(a),d.moveCurr.copy(d.mouseOnCircle)))},d.mouseup=function(a){d.enabled&&(a.preventDefault(),a.stopPropagation(),d.mode=f.NONE,d.wnd.document.removeEventListener("mousemove",d.mousemove),d.wnd.document.removeEventListener("mouseup",d.mouseup))},d.mousewheel=function(a){if(d.enabled){a.preventDefault(),a.stopPropagation();var b=0;a.wheelDelta?b=a.wheelDelta/40:a.detail&&(b=a.detail/3),d.zoomStart.y+=.01*b}},d.keydown=function(a){d.enabled&&(d.wnd.removeEventListener("keydown",d.keydown,!1),d.prevMode=d.mode,d.mode===f.NONE&&(a.keyCode!==g[f.ROTATE]||d.noRotate?a.keyCode!==g[f.ZOOM]||d.noRotate?a.keyCode!==g[f.PAN]||d.noRotate||(d.mode=f.PAN):d.mode=f.ZOOM:d.mode=f.ROTATE))},d.keyup=function(a){d.enabled&&(d.mode=d.prevMode,d.wnd.addEventListener("keydown",d.keydown,!1))},d}return i(b,a),b.prototype.destructor=function(b){this.domElement&&this.unsubscribe(),a.prototype.destructor.call(this,b+1)},b.prototype.move=function(a,b){this.moveCurr.x=a,this.moveCurr.y=b},b.prototype.subscribe=function(a){this.domElement&&this.unsubscribe(),this.domElement=a,this.disableContextMenu(),this.domElement.addEventListener("mousedown",this.mousedown,!1),this.domElement.addEventListener("mousewheel",this.mousewheel,!1),this.domElement.addEventListener("DOMMouseScroll",this.mousewheel,!1),this.wnd.addEventListener("keydown",this.keydown,!1),this.wnd.addEventListener("keyup",this.keydown,!1),this.handleResize()},b.prototype.unsubscribe=function(){this.domElement&&(this.enableContextMenu(),this.domElement.removeEventListener("mousedown",this.mousedown,!1),this.domElement.removeEventListener("mousewheel",this.mousewheel,!1),this.domElement.removeEventListener("DOMMouseScroll",this.mousewheel,!1),this.domElement=void 0,this.wnd.removeEventListener("keydown",this.keydown,!1),this.wnd.removeEventListener("keyup",this.keydown,!1))},b.prototype.disableContextMenu=function(){this.domElement&&(this.contextmenu||(this.contextmenu=function(a){a.preventDefault()},this.domElement.addEventListener("contextmenu",this.contextmenu,!1)))},b.prototype.enableContextMenu=function(){this.domElement&&this.contextmenu&&(this.domElement.removeEventListener("contextmenu",this.contextmenu,!1),this.contextmenu=void 0)},b.prototype.reset=function(){this.mode=f.NONE},b.prototype.updateMouseOnCircle=function(a){this.mouseOnCircle.x=a.pageX,this.mouseOnCircle.y=-a.pageY,this.mouseOnCircle.sub(this.screenLoc).scale(2).sub(this.circleExt).divByScalar(this.circleExt.x)},b.prototype.updateMouseOnScreen=function(a){this.mouseOnScreen.x=a.pageX,this.mouseOnScreen.y=-a.pageY,this.mouseOnScreen.sub(this.screenLoc),this.mouseOnScreen.x/=this.circleExt.x,this.mouseOnScreen.y/=this.circleExt.y},b.prototype.handleResize=function(){var a=this.domElement.getBoundingClientRect(),b=this.domElement.ownerDocument.documentElement;this.screenLoc.x=a.left+window.pageXOffset-b.clientLeft,this.screenLoc.y=-(a.top+window.pageYOffset-b.clientTop),this.circleExt.x=a.width,this.circleExt.y=-a.height,this.screenExt.x=a.width,this.screenExt.y=a.height},b}(d.ShareableBase),a("MouseControls",h)}}}),System.register("davinci-eight/controls/ViewControls.js",["./MouseControls","../math/Vector3"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b,c){void 0===c&&(c=window);var e=a.call(this,c)||this;return e.rotateSpeed=1,e.zoomSpeed=1,e.panSpeed=1,e.eye0=d["default"].vector(0,0,1),e.look0=d["default"].zero(),e.up0=d["default"].vector(0,1,0),e.eyeMinusLook=new d["default"],e.look=new d["default"],e.up=new d["default"],e.setLoggingName("ViewControls"),e.setView(b),e}return f(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b.prototype.hasView=function(){return!!this.view},b.prototype.update=function(){this.view&&(this.eyeMinusLook.copy(this.view.eye).sub(this.view.look),this.look.copy(this.view.look),this.up.copy(this.view.up),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.view.eye.x=this.look.x+this.eyeMinusLook.x,this.view.eye.y=this.look.y+this.eyeMinusLook.y,this.view.eye.z=this.look.z+this.eyeMinusLook.z,this.view.look.x=this.look.x,this.view.look.y=this.look.y,this.view.look.z=this.look.z,this.view.up.x=this.up.x,this.view.up.y=this.up.y,this.view.up.z=this.up.z)},b.prototype.rotateCamera=function(){},b.prototype.zoomCamera=function(){var a=1+(this.zoomEnd.y-this.zoomStart.y)*this.zoomSpeed;1!==a&&a>0&&(this.eyeMinusLook.scale(a),this.zoomStart.copy(this.zoomEnd))},b.prototype.panCamera=function(){},b.prototype.reset=function(){this.view&&(this.view.eye.x=this.eye0.x,this.view.eye.y=this.eye0.y,this.view.eye.z=this.eye0.z,this.view.look.x=this.look0.x,this.view.look.y=this.look0.y,this.view.look.z=this.look0.z,this.view.up.x=this.up0.x,this.view.up.y=this.up0.y,this.view.up.z=this.up0.z),a.prototype.reset.call(this)},b.prototype.setView=function(a){a?this.view=a:this.view=void 0,this.synchronize()},b.prototype.synchronize=function(){var a=this.view;a?(this.eye0.copy(a.eye),this.look0.copy(a.look),this.up0.copy(a.up)):(this.eye0.setXYZ(0,0,1),this.look0.zero(),this.up0.setXYZ(0,1,0))},b}(c.MouseControls),a("ViewControls",e)}}}),System.register("davinci-eight/controls/TrackballControls.js",["../math/Spinor3","../math/Vector2","../math/Vector3","./ViewControls"],function(a,b){"use strict";var c,d,e,f,g,h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function b(b,f){void 0===f&&(f=window);var g=a.call(this,b,f)||this;return g.moveDirection=new e["default"],g.eyeMinusLookDirection=new e["default"],g.objectUpDirection=new e["default"],g.objectSidewaysDirection=new e["default"],g.B=c["default"].zero.clone(),g.rotor=c["default"].one.clone(),g.mouseChange=new d.Vector2,g.pan=new e["default"],g.objectUp=new e["default"],g.setLoggingName("TrackballControls"),g}return h(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b.prototype.rotateCamera=function(){if(this.hasView()){this.moveDirection.setXYZ(this.moveCurr.x-this.movePrev.x,this.moveCurr.y-this.movePrev.y,0);var a=this.moveDirection.magnitude();if(a>0){var b=2*a*Math.PI*this.rotateSpeed;this.eyeMinusLookDirection.copy(this.eyeMinusLook).normalize(),this.objectUpDirection.copy(this.up).normalize(),this.objectSidewaysDirection.copy(this.objectUpDirection).cross(this.eyeMinusLookDirection),this.objectUpDirection.scale(this.moveCurr.y-this.movePrev.y),this.objectSidewaysDirection.scale(this.moveCurr.x-this.movePrev.x),this.moveDirection.copy(this.objectUpDirection).add(this.objectSidewaysDirection).normalize(),this.B.wedge(this.moveDirection,this.eyeMinusLookDirection).normalize(),this.rotor.rotorFromGeneratorAngle(this.B,b),this.eyeMinusLook.rotate(this.rotor),this.up.rotate(this.rotor),this.movePrev.copy(this.moveCurr)}}},b.prototype.panCamera=function(){this.hasView()&&(this.mouseChange.copy(this.panEnd).sub(this.panStart),this.mouseChange.squaredNorm()&&(this.mouseChange.scale(this.eyeMinusLook.magnitude()*this.panSpeed),this.pan.copy(this.eyeMinusLook).cross(this.up).normalize().scale(this.mouseChange.x),this.objectUp.copy(this.up).normalize().scale(this.mouseChange.y),this.pan.add(this.objectUp),this.look.add(this.pan),this.panStart.copy(this.panEnd)))},b}(f.ViewControls),a("TrackballControls",g),a("default",g)}}}),System.register("davinci-eight/core/Scene.js",["../checks/mustBeNonNullObject","../collections/ShareableArray","../core/ShareableContextConsumer"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(b,e){void 0===e&&(e=0);var f=a.call(this,b)||this;return f.setLoggingName("Scene"),c["default"]("contextManager",b),f._drawables=new d["default"]([]),0===e&&f.synchUp(),f}return g(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),this._drawables.release(),this._drawables=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.add=function(a){c["default"]("drawable",a),this._drawables.push(a)},b.prototype.contains=function(a){return c["default"]("drawable",a),this._drawables.indexOf(a)>=0},b.prototype.draw=function(a){console.warn("Scene.draw is deprecated. Please use the Scene.render method instead."),this.render(a)},b.prototype.render=function(a){var b=this.gl;if(b){for(var c=this._drawables,d=c.length,e=!1,f=!1,g=0;g<d;g++){var h=c.getWeakRef(g);h.transparent?f=!0:e=!0}if(e||f)if(f){var i=b.getParameter(b.DEPTH_WRITEMASK);if(e){b.depthMask(!0);for(var g=0;g<d;g++){var h=c.getWeakRef(g);h.transparent||h.render(a)}}b.depthMask(!1);for(var g=0;g<d;g++){var h=c.getWeakRef(g);h.transparent&&h.render(a)}b.depthMask(i)}else for(var g=0;g<d;g++){var h=c.getWeakRef(g);h.transparent||h.render(a)}}},b.prototype.find=function(a){return this._drawables.find(a)},b.prototype.findOne=function(a){return this._drawables.findOne(a)},b.prototype.findOneByName=function(a){return this.findOne(function(b){return b.name===a})},b.prototype.findByName=function(a){return this.find(function(b){return b.name===a})},b.prototype.remove=function(a){c["default"]("drawable",a);var b=this._drawables.indexOf(a);b>=0&&this._drawables.splice(b,1).release()},b.prototype.contextFree=function(){for(var b=0;b<this._drawables.length;b++){var c=this._drawables.getWeakRef(b);c.contextFree&&c.contextFree()}a.prototype.contextFree.call(this)},b.prototype.contextGain=function(){for(var b=0;b<this._drawables.length;b++){var c=this._drawables.getWeakRef(b);c.contextGain&&c.contextGain()}a.prototype.contextGain.call(this)},b.prototype.contextLost=function(){for(var b=0;b<this._drawables.length;b++){var c=this._drawables.getWeakRef(b);c.contextLost&&c.contextLost()}a.prototype.contextLost.call(this)},b}(e["default"]),a("Scene",f),a("default",f)}}}),System.register("davinci-eight/core/Shader.js",["./makeWebGLShader","../checks/mustBeNumber","../checks/mustBeString","../checks/mustBeUndefined","./ShareableContextConsumer"],function(a,b){"use strict";var c,d,e,f,g,h,i=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b,c,f){var g=a.call(this,f)||this;return g.setLoggingName("Shader"),g._source=e["default"]("source",b),g._shaderType=d["default"]("type",c),g}return i(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1),f["default"](this.getLoggingName(),this._shader)},b.prototype.contextFree=function(){this._shader&&(this.contextManager.gl.deleteShader(this._shader),this._shader=void 0),a.prototype.contextFree.call(this)},b.prototype.contextGain=function(){this._shader=c["default"](this.contextManager.gl,this._source,this._shaderType),a.prototype.contextGain.call(this)},b.prototype.contextLost=function(){this._shader=void 0,a.prototype.contextLost.call(this)},b}(g["default"]),a("default",h)}}}),System.register("davinci-eight/core/TextureMagFilter.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.NEAREST=9728]="NEAREST",a[a.LINEAR=9729]="LINEAR"}(c||(c={})),a("TextureMagFilter",c),a("default",c)}}}),System.register("davinci-eight/core/TextureMinFilter.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.NEAREST=9728]="NEAREST",a[a.LINEAR=9729]="LINEAR",a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(c||(c={})),a("TextureMinFilter",c),a("default",c)}}}),System.register("davinci-eight/core/TextureWrapMode.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.REPEAT=10497]="REPEAT",a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(c||(c={})),a("TextureWrapMode",c),a("default",c)}}}),System.register("davinci-eight/core/BlendingFactorDest.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.SRC_COLOR=768]="SRC_COLOR",a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA"}(c||(c={})),a("BlendingFactorDest",c),a("default",c)}}}),System.register("davinci-eight/core/BlendingFactorSrc.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.DST_COLOR=774]="DST_COLOR",a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA"}(c||(c={})),a("BlendingFactorSrc",c),a("default",c)}}}),System.register("davinci-eight/core/Capability.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.CULL_FACE=2884]="CULL_FACE",a[a.BLEND=3042]="BLEND",a[a.DITHER=3024]="DITHER",a[a.STENCIL_TEST=2960]="STENCIL_TEST",a[a.DEPTH_TEST=2929]="DEPTH_TEST",a[a.SCISSOR_TEST=3089]="SCISSOR_TEST",a[a.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",a[a.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",a[a.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE"}(c||(c={})),a("Capability",c),a("default",c)}}}),System.register("davinci-eight/core/DepthFunction.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.NEVER=512]="NEVER",a[a.LESS=513]="LESS",a[a.EQUAL=514]="EQUAL",a[a.LEQUAL=515]="LEQUAL",a[a.GREATER=516]="GREATER",a[a.NOTEQUAL=517]="NOTEQUAL",a[a.GEQUAL=518]="GEQUAL",a[a.ALWAYS=519]="ALWAYS"}(c||(c={})),a("DepthFunction",c),a("default",c)}}}),System.register("davinci-eight/core/PixelType.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5"}(c||(c={})),a("PixelType",c),a("default",c)}}}),System.register("davinci-eight/core/checkEnums.js",["./BeginMode","./BlendingFactorDest","./BlendingFactorSrc","./BufferObjects","./Capability","./ClearBufferMask","./DepthFunction","./PixelFormat","./PixelType","./Usage","../checks/mustBeEQ"],function(a,b){"use strict";function c(a){return n["default"]("LINE_LOOP",d["default"].LINE_LOOP,a.LINE_LOOP),n["default"]("LINE_STRIP",d["default"].LINE_STRIP,a.LINE_STRIP),n["default"]("LINES",d["default"].LINES,a.LINES),n["default"]("POINTS",d["default"].POINTS,a.POINTS),n["default"]("TRIANGLE_FAN",d["default"].TRIANGLE_FAN,a.TRIANGLE_FAN),n["default"]("TRIANGLE_STRIP",d["default"].TRIANGLE_STRIP,a.TRIANGLE_STRIP),n["default"]("TRIANGLES",d["default"].TRIANGLES,a.TRIANGLES),n["default"]("ZERO",e["default"].ZERO,a.ZERO),n["default"]("ONE",e["default"].ONE,a.ONE),n["default"]("SRC_COLOR",e["default"].SRC_COLOR,a.SRC_COLOR),n["default"]("ONE_MINUS_SRC_COLOR",e["default"].ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_COLOR),n["default"]("SRC_ALPHA",e["default"].SRC_ALPHA,a.SRC_ALPHA),n["default"]("ONE_MINUS_SRC_ALPHA",e["default"].ONE_MINUS_SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),n["default"]("DST_ALPHA",e["default"].DST_ALPHA,a.DST_ALPHA),n["default"]("ONE_MINUS_DST_ALPHA",e["default"].ONE_MINUS_DST_ALPHA,a.ONE_MINUS_DST_ALPHA),n["default"]("ZERO",f["default"].ZERO,a.ZERO),n["default"]("ONE",f["default"].ONE,a.ONE),n["default"]("DST_COLOR",f["default"].DST_COLOR,a.DST_COLOR),n["default"]("ONE_MINUS_DST_COLOR",f["default"].ONE_MINUS_DST_COLOR,a.ONE_MINUS_DST_COLOR),n["default"]("SRC_ALPHA_SATURATE",f["default"].SRC_ALPHA_SATURATE,a.SRC_ALPHA_SATURATE),n["default"]("SRC_ALPHA",f["default"].SRC_ALPHA,a.SRC_ALPHA),n["default"]("ONE_MINUS_SRC_ALPHA",f["default"].ONE_MINUS_SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),n["default"]("DST_ALPHA",f["default"].DST_ALPHA,a.DST_ALPHA),n["default"]("ONE_MINUS_DST_ALPHA",f["default"].ONE_MINUS_DST_ALPHA,a.ONE_MINUS_DST_ALPHA),n["default"]("ARRAY_BUFFER",g["default"].ARRAY_BUFFER,a.ARRAY_BUFFER),n["default"]("ARRAY_BUFFER_BINDING",g["default"].ARRAY_BUFFER_BINDING,a.ARRAY_BUFFER_BINDING),n["default"]("ELEMENT_ARRAY_BUFFER",g["default"].ELEMENT_ARRAY_BUFFER,a.ELEMENT_ARRAY_BUFFER),n["default"]("ELEMENT_ARRAY_BUFFER_BINDING",g["default"].ELEMENT_ARRAY_BUFFER_BINDING,a.ELEMENT_ARRAY_BUFFER_BINDING),n["default"]("CULL_FACE",h["default"].CULL_FACE,a.CULL_FACE),n["default"]("BLEND",h["default"].BLEND,a.BLEND),n["default"]("DITHER",h["default"].DITHER,a.DITHER),n["default"]("STENCIL_TEST",h["default"].STENCIL_TEST,a.STENCIL_TEST),n["default"]("DEPTH_TEST",h["default"].DEPTH_TEST,a.DEPTH_TEST),n["default"]("SCISSOR_TEST",h["default"].SCISSOR_TEST,a.SCISSOR_TEST),n["default"]("POLYGON_OFFSET_FILL",h["default"].POLYGON_OFFSET_FILL,a.POLYGON_OFFSET_FILL),n["default"]("SAMPLE_ALPHA_TO_COVERAGE",h["default"].SAMPLE_ALPHA_TO_COVERAGE,a.SAMPLE_ALPHA_TO_COVERAGE),n["default"]("SAMPLE_COVERAGE",h["default"].SAMPLE_COVERAGE,a.SAMPLE_COVERAGE),n["default"]("COLOR_BUFFER_BIT",i["default"].COLOR_BUFFER_BIT,a.COLOR_BUFFER_BIT),n["default"]("DEPTH_BUFFER_BIT",i["default"].DEPTH_BUFFER_BIT,a.DEPTH_BUFFER_BIT),n["default"]("STENCIL_BUFFER_BIT",i["default"].STENCIL_BUFFER_BIT,a.STENCIL_BUFFER_BIT),n["default"]("ALWAYS",j["default"].ALWAYS,a.ALWAYS),n["default"]("EQUAL",j["default"].EQUAL,a.EQUAL),n["default"]("GEQUAL",j["default"].GEQUAL,a.GEQUAL),n["default"]("GREATER",j["default"].GREATER,a.GREATER),n["default"]("LEQUAL",j["default"].LEQUAL,a.LEQUAL),n["default"]("LESS",j["default"].LESS,a.LESS),n["default"]("NEVER",j["default"].NEVER,a.NEVER),n["default"]("NOTEQUAL",j["default"].NOTEQUAL,a.NOTEQUAL),n["default"]("DEPTH_COMPONENT",k["default"].DEPTH_COMPONENT,a.DEPTH_COMPONENT),n["default"]("ALPHA",k["default"].ALPHA,a.ALPHA),n["default"]("RGB",k["default"].RGB,a.RGB),n["default"]("RGBA",k["default"].RGBA,a.RGBA),n["default"]("LUMINANCE",k["default"].LUMINANCE,a.LUMINANCE),n["default"]("LUMINANCE_ALPHA",k["default"].LUMINANCE_ALPHA,a.LUMINANCE_ALPHA),n["default"]("UNSIGNED_BYTE",l["default"].UNSIGNED_BYTE,a.UNSIGNED_BYTE),n["default"]("UNSIGNED_SHORT_4_4_4_4",l["default"].UNSIGNED_SHORT_4_4_4_4,a.UNSIGNED_SHORT_4_4_4_4),n["default"]("UNSIGNED_SHORT_5_5_5_1",l["default"].UNSIGNED_SHORT_5_5_5_1,a.UNSIGNED_SHORT_5_5_5_1),n["default"]("UNSIGNED_SHORT_5_6_5",l["default"].UNSIGNED_SHORT_5_6_5,a.UNSIGNED_SHORT_5_6_5),n["default"]("STREAM_DRAW",m["default"].STREAM_DRAW,a.STREAM_DRAW),n["default"]("STATIC_DRAW",m["default"].STATIC_DRAW,a.STATIC_DRAW),n["default"]("DYNAMIC_DRAW",m["default"].DYNAMIC_DRAW,a.DYNAMIC_DRAW),a}b&&b.id;a("default",c);var d,e,f,g,h,i,j,k,l,m,n;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a}],execute:function(){}}}),System.register("davinci-eight/core/ClearBufferMask.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"}(c||(c={})),a("ClearBufferMask",c),a("default",c)}}}),System.register("davinci-eight/commands/EIGHTLogger.js",["../config","../core/ShareableBase"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(){var b=a.call(this)||this;return b.setLoggingName("EIGHTLogger"),b}return f(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b.prototype.contextFree=function(){},b.prototype.contextGain=function(){console.log(c["default"].NAMESPACE+" "+c["default"].VERSION+" ("+c["default"].GITHUB+") "+c["default"].LAST_MODIFIED)},b.prototype.contextLost=function(){},b}(d.ShareableBase),a("default",e)}}}),System.register("davinci-eight/core/initWebGL.js",["../checks/isDefined"],function(a,b){"use strict";function c(a,b){if(d["default"](a)){var c;try{c=a.getContext("webgl",b)||a.getContext("experimental-webgl",b)}catch(e){}if(c)return c;throw new Error("Unable to initialize WebGL. Your browser may not support it.")}}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/commands/VersionLogger.js",["../core/ShareableBase"],function(a,b){"use strict";var c,d,e=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(a){function b(b){var c=a.call(this)||this;return c.contextManager=b,c.setLoggingName("VersionLogger"),c}return e(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b.prototype.contextFree=function(){},b.prototype.contextGain=function(){var a=this.contextManager.gl;console.log(a.getParameter(a.VERSION))},b.prototype.contextLost=function(){},b}(c.ShareableBase),a("default",d)}}}),System.register("davinci-eight/commands/WebGLClearColor.js",["../checks/mustBeNumber","../core/ShareableBase"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b,d,e,f,g){void 0===d&&(d=0),void 0===e&&(e=0),void 0===f&&(f=0),void 0===g&&(g=1);var h=a.call(this)||this;return h.contextManager=b,h.setLoggingName("WebGLClearColor"),h.r=c["default"]("r",d),h.g=c["default"]("g",e),h.b=c["default"]("b",f),h.a=c["default"]("a",g),h}return f(b,a),b.prototype.destructor=function(b){this.r=void 0,this.g=void 0,this.b=void 0,this.a=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.contextFree=function(){},b.prototype.contextGain=function(){c["default"]("r",this.r),c["default"]("g",this.g),c["default"]("b",this.b),c["default"]("a",this.a),this.contextManager.gl.clearColor(this.r,this.g,this.b,this.a)},b.prototype.contextLost=function(){},b}(d.ShareableBase),a("WebGLClearColor",e),a("default",e)}}}),System.register("davinci-eight/commands/WebGLEnable.js",["../checks/mustBeNumber","../core/ShareableBase"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b,d){var e=a.call(this)||this;return e.contextManager=b,e.setLoggingName("WebGLEnable"),e._capability=c["default"]("capability",d),e}return f(b,a),b.prototype.destructor=function(b){this._capability=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.contextFree=function(){},b.prototype.contextGain=function(){this.contextManager.gl.enable(this._capability)},b.prototype.contextLost=function(){},b}(d.ShareableBase),a("WebGLEnable",e),a("default",e)}}}),System.register("davinci-eight/commands/WebGLDisable.js",["../checks/mustBeNumber","../core/ShareableBase"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b,d){var e=a.call(this)||this;return e.contextManager=b,e.setLoggingName("WebGLDisable"),e._capability=c["default"]("capability",d),e}return f(b,a),b.prototype.destructor=function(b){this._capability=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.contextFree=function(){},b.prototype.contextGain=function(){this.contextManager.gl.disable(this._capability)},b.prototype.contextLost=function(){},b}(d.ShareableBase),a("WebGLDisable",e),a("default",e)}}}),System.register("davinci-eight/core/Engine.js",["./checkEnums","./ClearBufferMask","../commands/EIGHTLogger","./initWebGL","../checks/isDefined","../checks/mustBeGE","../checks/mustBeLE","../checks/mustBeNonNullObject","../checks/mustBeNumber","../checks/mustBeString","../collections/ShareableArray","./ShareableBase","../math/R3","../commands/VersionLogger","../commands/WebGLClearColor","../commands/WebGLEnable","../commands/WebGLDisable"],function(a,b){
"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a}],execute:function(){t=function(a){function b(b,c,d){void 0===d&&(d=window.document);var h=a.call(this)||this;return h._users=[],h._commands=new m["default"]([]),h.geometries={},h.materials={},h.setLoggingName("Engine"),h._attributes=c,h._commands.pushWeakRef(new e["default"]),h._commands.pushWeakRef(new p["default"](h)),h._webGLContextLost=function(a){g["default"](h._gl)&&(a.preventDefault(),h._gl=void 0,h._users.forEach(function(a){a.contextLost()}))},h._webGLContextRestored=function(a){g["default"](h._gl)&&(a.preventDefault(),h._gl=f["default"](h._gl.canvas,c),h._users.forEach(function(a){a.contextGain()}))},b&&h.start(b,d),h}return u(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("Engine"),this._commands=new m["default"]([])},b.prototype.destructor=function(b){for(this.stop();this._users.length>0;)this._users.pop();this._commands.release(),a.prototype.destructor.call(this,b+1)},b.prototype.addContextListener=function(a){j["default"]("user",a);var b=this._users.indexOf(a);b<0?this._users.push(a):console.warn("user already exists for addContextListener")},Object.defineProperty(b.prototype,"canvas",{get:function(){return this._gl?this._gl.canvas:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"drawingBufferHeight",{get:function(){return this._gl?this._gl.drawingBufferHeight:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"drawingBufferWidth",{get:function(){return this._gl?this._gl.drawingBufferWidth:void 0},enumerable:!0,configurable:!0}),b.prototype.blendFunc=function(a,b){var c=this._gl;return c&&c.blendFunc(a,b),this},b.prototype.clear=function(a){void 0===a&&(a=d["default"].COLOR_BUFFER_BIT|d["default"].DEPTH_BUFFER_BIT);var b=this._gl;return b&&b.clear(a),this},b.prototype.clearColor=function(a,b,c,d){this._commands.pushWeakRef(new q["default"](this,a,b,c,d));var e=this._gl;return e&&e.clearColor(a,b,c,d),this},b.prototype.clearDepth=function(a){var b=this._gl;return b&&b.clearDepth(a),this},b.prototype.clearStencil=function(a){var b=this._gl;return b&&b.clearStencil(a),this},b.prototype.depthFunc=function(a){var b=this._gl;return b&&b.depthFunc(a),this},b.prototype.depthMask=function(a){var b=this._gl;return b&&b.depthMask(a),this},b.prototype.disable=function(a){return this._commands.pushWeakRef(new s["default"](this,a)),this._gl&&this._gl.disable(a),this},b.prototype.enable=function(a){return this._commands.pushWeakRef(new r["default"](this,a)),this._gl&&this._gl.enable(a),this},Object.defineProperty(b.prototype,"gl",{get:function(){return this._gl?this._gl:void 0},enumerable:!0,configurable:!0}),b.prototype.readPixels=function(a,b,c,d,e,f,g){this._gl&&this._gl.readPixels(a,b,c,d,e,f,g)},b.prototype.removeContextListener=function(a){j["default"]("user",a);var b=this._users.indexOf(a);b>=0&&this._users.splice(b,1)},b.prototype.size=function(a,b){return this.canvas.width=k["default"]("width",a),this.canvas.height=k["default"]("height",b),this.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)},b.prototype.getMaxViewportDims=function(){var a=this._gl;return a?a.getParameter(a.MAX_VIEWPORT_DIMS):void 0},b.prototype.getViewport=function(){var a=this._gl;return a?a.getParameter(a.VIEWPORT):void 0},b.prototype.viewport=function(a,b,c,d){var e=this._gl;return e&&e.viewport(a,b,c,d),this},b.prototype.start=function(a,b){if(void 0===b&&(b=window.document),"string"==typeof a){var d=b.getElementById(a);if(d)return this.start(d,b);throw new Error("canvas argument must be a canvas element id or an HTMLCanvasElement.")}return a instanceof HTMLCanvasElement?g["default"](this._gl)?(console.warn(this.getLoggingName()+" Ignoring start() because already started."),this):(this._gl=c["default"](f["default"](a,this._attributes)),this.emitStartEvent(),a.addEventListener("webglcontextlost",this._webGLContextLost,!1),a.addEventListener("webglcontextrestored",this._webGLContextRestored,!1),this):(g["default"](a)&&(this._gl=c["default"](a)),this)},b.prototype.stop=function(){return g["default"](this._gl)&&(this._gl.canvas.removeEventListener("webglcontextrestored",this._webGLContextRestored,!1),this._gl.canvas.removeEventListener("webglcontextlost",this._webGLContextLost,!1),this._gl&&(this.emitStopEvent(),this._gl=void 0)),this},b.prototype.emitStartEvent=function(){var a=this;this._users.forEach(function(b){a.emitContextGain(b)}),this._commands.forEach(function(b){a.emitContextGain(b)})},b.prototype.emitContextGain=function(a){this._gl.isContextLost()?a.contextLost():a.contextGain()},b.prototype.emitStopEvent=function(){var a=this;this._users.forEach(function(b){a.emitContextFree(b)}),this._commands.forEach(function(b){a.emitContextFree(b)})},b.prototype.emitContextFree=function(a){this._gl.isContextLost()?a.contextLost():a.contextFree()},b.prototype.synchronize=function(a){return this._gl&&this.emitContextGain(a),this},b.prototype.getCacheGeometry=function(a){j["default"]("geometryKey",a),l["default"]("geometryKey.kind",a.kind);var b=JSON.stringify(a),c=this.geometries[b];return c&&c.addRef&&c.addRef(),c},b.prototype.putCacheGeometry=function(a,b){j["default"]("geometryKey",a),j["default"]("geometry",b),l["default"]("geometryKey.kind",a.kind);var c=JSON.stringify(a);this.geometries[c]=b},b.prototype.getCacheMaterial=function(a){j["default"]("materialKey",a),l["default"]("materialKey.kind",a.kind);var b=JSON.stringify(a),c=this.materials[b];return c&&c.addRef&&c.addRef(),c},b.prototype.putCacheMaterial=function(a,b){j["default"]("materialKey",a),j["default"]("material",b),l["default"]("materialKey.kind",a.kind);var c=JSON.stringify(a);this.materials[c]=b},b.prototype.deviceToImageCoords=function(a,b,c){void 0===c&&(c=0),k["default"]("deviceX",a),k["default"]("deviceY",b),k["default"]("imageZ",c),h["default"]("imageZ",c,-1),i["default"]("imageZ",c,1);var d=2*a/this.canvas.width-1,e=1-2*b/this.canvas.height;return o.vectorFromCoords(d,e,c)},b}(n["default"]),a("Engine",t),a("default",t)}}}),System.register("davinci-eight/facets/AmbientLight.js",["../core/Color","../checks/mustBeNumber","../checks/mustBeObject","../core/GraphicsProgramSymbols"],function(a,b){"use strict";var c,d,e,f,g;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(){function a(a){e["default"]("color",a),this.color=c["default"].white.clone(),this.color.r=d["default"]("color.r",a.r),this.color.g=d["default"]("color.g",a.g),this.color.b=d["default"]("color.b",a.b)}return a.prototype.setUniforms=function(a){var b=this.color;a.uniform3f(f["default"].UNIFORM_AMBIENT_LIGHT,b.r,b.g,b.b)},a}(),a("AmbientLight",g),a("default",g)}}}),System.register("davinci-eight/facets/DirectionalLight.js",["../core/Color","../math/Geometric3","../checks/mustBeObject","../core/GraphicsProgramSymbols","../math/Vector3"],function(a,b){"use strict";var c,d,e,f,g,h;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(){function a(a,b){void 0===a&&(a=g["default"].vector(0,0,1).neg()),void 0===b&&(b=c["default"].white),e["default"]("direction",a),e["default"]("color",b),this.direction_=d["default"].fromVector(a).normalize(),this.color_=c["default"].copy(b)}return Object.defineProperty(a.prototype,"color",{get:function(){return this.color_},set:function(a){this.color_.copy(c["default"].mustBe("color",a))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"direction",{get:function(){return this.direction_},set:function(a){e["default"]("direction",a),this.direction_.copy(a)},enumerable:!0,configurable:!0}),a.prototype.setUniforms=function(a){var b=this.direction_;a.uniform3f(f["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION,b.x,b.y,b.z);var c=this.color_;a.uniform3f(f["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR,c.r,c.g,c.b)},a}(),a("DirectionalLight",h),a("default",h)}}}),System.register("davinci-eight/facets/ReflectionFacetE2.js",["../checks/mustBeString","../math/Vector2","../math/Matrix2","../i18n/readOnly"],function(a,b){"use strict";var c,d,e,f,g;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(){function a(a){this.matrix=e["default"].one.clone(),this.name=c["default"]("name",a),this._normal=(new d["default"]).zero(),this._normal.modified=!0}return Object.defineProperty(a.prototype,"normal",{get:function(){return this._normal},set:function(a){throw new Error(f["default"]("normal").message)},enumerable:!0,configurable:!0}),a.prototype.setUniforms=function(a){this._normal.modified&&(this.matrix.reflection(this._normal),this._normal.modified=!1),a.matrix2fv(this.name,this.matrix.elements,!1)},a}(),a("default",g)}}}),System.register("davinci-eight/facets/ReflectionFacetE3.js",["../checks/mustBeString","../math/Geometric3","../math/Matrix4","../i18n/readOnly"],function(a,b){"use strict";var c,d,e,f,g;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(){function a(a){this.matrix=e["default"].one.clone(),this.name=c["default"]("name",a),this._normal=d["default"].zero(!1),this._normal.modified=!0}return Object.defineProperty(a.prototype,"normal",{get:function(){return this._normal},set:function(a){throw new Error(f["default"]("normal").message)},enumerable:!0,configurable:!0}),a.prototype.setUniforms=function(a){this._normal.modified&&(this.matrix.reflection(this._normal),this._normal.modified=!1),a.matrix4fv(this.name,this.matrix.elements,!1)},a}(),a("default",g)}}}),System.register("davinci-eight/facets/ViewTransform.js",["../math/Geometric3","../core/GraphicsProgramSymbols","../math/Matrix4","../math/Vector3","./viewMatrixFromEyeLookUp"],function(a,b){"use strict";var c,d,e,f,g,h;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(){function a(){this._eye=c["default"].vector(0,0,1),this._look=c["default"].vector(0,0,0),this._up=c["default"].vector(0,1,0),this.matrix=e["default"].one.clone(),this.matrixName=d["default"].UNIFORM_VIEW_MATRIX,this._eye.modified=!0,this._look.modified=!0,this._up.modified=!0}return a.prototype.cameraToWorldCoords=function(a){var b=f["default"].copy(this.eye).sub(this.look).normalize(),c=f["default"].copy(this.up).cross(b).normalize(),d=f["default"].copy(b).cross(c).normalize(),e=a[0],g=a[1],h=a[2];return this.eye.clone().addVector(c,e).addVector(d,g).addVector(b,h)},a.prototype.setUniforms=function(a){(this._eye.modified||this._look.modified||this._up.modified)&&(g["default"](this._eye,this._look,this._up,this.matrix),this._eye.modified=!1,this._look.modified=!1,this._up.modified=!1),a.matrix4fv(this.matrixName,this.matrix.elements,!1)},Object.defineProperty(a.prototype,"eye",{get:function(){return this._eye},set:function(a){this._eye.copyVector(a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"look",{get:function(){return this._look},set:function(a){this._look.copyVector(a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"up",{get:function(){return this._up},set:function(a){this._up.copyVector(a)},enumerable:!0,configurable:!0}),a}(),a("ViewTransform",h),a("default",h)}}}),System.register("davinci-eight/facets/PerspectiveCamera.js",["../math/Geometric3","./PerspectiveTransform","./ViewTransform"],function(a,b){"use strict";var c,d,e,f;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(a,b,c,f){void 0===a&&(a=45*Math.PI/180),void 0===b&&(b=1),void 0===c&&(c=.1),void 0===f&&(f=1e3),this.P=new d["default"](a,b,c,f),this.V=new e["default"]}return a.prototype.imageToWorldCoords=function(a,b,d){var e=this.P.imageToCameraCoords(a,b,d);return c["default"].fromVector(this.V.cameraToWorldCoords(e))},a.prototype.setUniforms=function(a){this.V.setUniforms(a),this.P.setUniforms(a)},Object.defineProperty(a.prototype,"aspect",{get:function(){return this.P.aspect},set:function(a){this.P.aspect=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"eye",{get:function(){return this.V.eye},set:function(a){this.V.eye.copyVector(a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fov",{get:function(){return this.P.fov},set:function(a){this.P.fov=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"look",{get:function(){return this.V.look},set:function(a){this.V.look.copyVector(a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"near",{get:function(){return this.P.near},set:function(a){this.P.near=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"far",{get:function(){return this.P.far},set:function(a){this.P.far=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"up",{get:function(){return this.V.up},set:function(a){this.V.up.copyVector(a)},enumerable:!0,configurable:!0}),a}(),a("PerspectiveCamera",f),a("default",f)}}}),System.register("davinci-eight/facets/PerspectiveTransform.js",["../core/GraphicsProgramSymbols","../math/Matrix4","../checks/mustBeGE","../checks/mustBeLE","../checks/mustBeNumber"],function(a,b){"use strict";var c,d,e,f,g,h;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(){function a(a,b,e,f){void 0===a&&(a=45*Math.PI/180),void 0===b&&(b=1),void 0===e&&(e=.1),void 0===f&&(f=1e3),this.matrix=d["default"].one.clone(),this.matrixName=c["default"].UNIFORM_PROJECTION_MATRIX,this.matrixNeedsUpdate=!0,this.fov=a,this.aspect=b,this.near=e,this.far=f}return Object.defineProperty(a.prototype,"aspect",{get:function(){return this._aspect},set:function(a){this._aspect!==a&&(g["default"]("aspect",a),e["default"]("aspect",a,0),this._aspect=a,this.matrixNeedsUpdate=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fov",{get:function(){return this._fov},set:function(a){this._fov!==a&&(g["default"]("fov",a),e["default"]("fov",a,0),f["default"]("fov",a,Math.PI),this._fov=a,this.matrixNeedsUpdate=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"near",{get:function(){return this._near},set:function(a){this._near!==a&&(g["default"]("near",a),e["default"]("near",a,0),this._near=a,this.matrixNeedsUpdate=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"far",{get:function(){return this._far},set:function(a){this._far!==a&&(g["default"]("far",a),e["default"]("far",a,0),this._far=a,this.matrixNeedsUpdate=!0)},enumerable:!0,configurable:!0}),a.prototype.setUniforms=function(a){this.matrixNeedsUpdate&&(this.matrix.perspective(this._fov,this._aspect,this._near,this._far),this.matrixNeedsUpdate=!1),a.matrix4fv(this.matrixName,this.matrix.elements,!1)},a.prototype.imageToCameraCoords=function(a,b,c){var d=this.near,e=this.far,f=e-d,g=e+d,h=(g-f*c)/(2*e*d),i=Math.tan(this.fov/2),j=this.aspect*i*a/h,k=i*b/h,l=-1/h;return[j,k,l]},a}(),a("PerspectiveTransform",h),a("default",h)}}}),System.register("davinci-eight/facets/perspectiveMatrix.js",["../checks/isDefined","../math/Matrix4","./perspectiveArray"],function(a,b){"use strict";function c(a,b,c,g,h){var i=d["default"](h)?h:e["default"].one.clone();return f["default"](a,b,c,g,i.elements),i}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/facets/viewArrayFromEyeLookUp.js",["../math/Vector3","../checks/mustSatisfy","../checks/isDefined"],function(a,b){"use strict";function c(a,b,c,j){var k=f["default"](j)?j:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);return e["default"]("matrix",16===k.length,function(){return"matrix must have length 16"}),g.copy(a).sub(b),0===g.x&&0===g.y&&0===g.z?g.z=1:g.normalize(),g.approx(12).normalize(),h.copy(c).cross(g).approx(12).normalize(),i.copy(g).cross(h).approx(12).normalize(),k[0]=h.x,k[4]=h.y,k[8]=h.z,k[12]=-d["default"].dot(a,h),k[1]=i.x,k[5]=i.y,k[9]=i.z,k[13]=-d["default"].dot(a,i),k[2]=g.x,k[6]=g.y,k[10]=g.z,k[14]=-d["default"].dot(a,g),k[3]=0,k[7]=0,k[11]=0,k[15]=1,k}b&&b.id;a("default",c);var d,e,f,g,h,i;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=new d["default"],h=new d["default"],i=new d["default"]}}}),System.register("davinci-eight/facets/viewMatrixFromEyeLookUp.js",["../checks/isDefined","../math/Matrix4","./viewArrayFromEyeLookUp"],function(a,b){"use strict";function c(a,b,c,g){var h=d["default"](g)?g:e["default"].one.clone();return f["default"](a,b,c,h.elements),h}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/facets/ModelE2.js",["../math/Geometric2"],function(a,b){"use strict";var c,d;b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(){function a(){this._position=(new c["default"]).zero(),this._attitude=(new c["default"]).zero().addScalar(1),this._position.modified=!0,this._attitude.modified=!0}return Object.defineProperty(a.prototype,"R",{get:function(){return this._attitude},set:function(a){this._attitude.copy(a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"X",{get:function(){return this._position},set:function(a){this._position.copy(a)},enumerable:!0,configurable:!0}),a}(),d.PROP_ATTITUDE="R",d.PROP_POSITION="X",a("default",d)}}}),System.register("davinci-eight/materials/HTMLScriptsMaterial.js",["../checks/isString","../checks/mustBeArray","../checks/mustBeObject","../checks/mustBeString","../checks/mustSatisfy","./ShaderMaterial"],function(a,b){"use strict";function c(a,b){var c=b.getElementById(k["default"]("elementId",a));if(c)return c;throw new Error("'"+a+"' is not a valid element identifier.")}function d(a,b){return k["default"]("vsId",a),j["default"]("dom",b),c(a,b).textContent}function e(a,b){return k["default"]("fsId",a),j["default"]("dom",b),c(a,b).textContent}function f(a,b,c){var d=b.getElementById(a);if(d instanceof HTMLScriptElement){var e=d;h["default"](e.type)&&(e.type.indexOf("vertex")>=0?c[0]=a:e.type.indexOf("fragment")>=0&&(c[1]=a)),h["default"](e.textContent)&&(e.textContent.indexOf("gl_Position")>=0?c[0]=a:e.textContent.indexOf("gl_FragColor")>=0&&(c[1]=a))}}function g(a,b){i["default"]("scriptIds",a),l["default"]("scriptIds",2===a.length,function(){return"have two script element identifiers."});var c=[a[0],a[1]];return f(a[0],b,c),f(a[1],b,c),c}var h,i,j,k,l,m,n,o=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a}],execute:function(){n=function(a){function b(b,c,f,h,i){void 0===i&&(i=0);var j=a.call(this,d(g(b,c)[0],c),e(g(b,c)[1],c),f,h,i+1)||this;return j.setLoggingName("HTMLScriptsMaterial"),0===i&&j.synchUp(),j}return o(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("HTMLScriptsMaterial"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(m.ShaderMaterial),a("default",n)}}}),System.register("davinci-eight/math/mathcore.js",[],function(a,b){"use strict";function c(a,b){return null!==a&&"object"==typeof a&&"function"==typeof a[b]}function d(a,b){return function(d){var e=d;if(c(d,a))return e[a]();if("number"==typeof d){var f=e,g=b(f);return g}throw new TypeError("x must support "+a+"(x)")}}function e(a){return(n(a)+n(-a))/2}function f(a){return(n(a)-n(-a))/2}function g(a){return f(a)/e(a)}function h(a){return a*a}var i,j,k,l,m,n,o,p,q,r,s;b&&b.id;return{setters:[],execute:function(){i=Math.abs,j=Math.acos,k=Math.asin,l=Math.atan,m=Math.cos,n=Math.exp,o=Math.log,p=Math.sin,q=Math.sqrt,r=Math.tan,s={acos:d("acos",j),asin:d("asin",k),atan:d("atan",l),cos:d("cos",m),cosh:d("cosh",e),exp:d("exp",n),log:d("log",o),norm:d("norm",i),quad:d("quad",h),sin:d("sin",p),sinh:d("sinh",f),sqrt:d("sqrt",q),tan:d("tan",r),tanh:d("tanh",g),Math:{cosh:e,sinh:f}},a("default",s)}}}),System.register("davinci-eight/math/det2x2.js",[],function(a,b){"use strict";function c(a){var b=a[0],c=a[2],d=a[1],e=a[3];return b*e-c*d}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/Matrix2.js",["../math/AbstractMatrix","../math/det2x2","../checks/isDefined","../core/Lockable","../checks/mustBeInteger","../checks/mustBeNumber"],function(a,b){"use strict";function c(a,b,c){var d=a[0],e=a[2],f=a[1],g=a[3],h=b[0],i=b[2],j=b[1],k=b[3];c[0]=d+h,c[2]=e+i,c[1]=f+j,c[3]=g+k}var d,e,f,g,h,i,j,k=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function b(b){return a.call(this,b,2)||this}return k(b,a),b.prototype.add=function(a){if(this.isLocked())throw new g.TargetLockedError("add");return this.add2(this,a)},b.prototype.add2=function(a,b){return c(a.elements,b.elements,this.elements),this},b.prototype.clone=function(){var a=this.elements,c=a[0],d=a[1],e=a[2],f=a[3];return new b(new Float32Array([0,0,0,0])).set(c,e,d,f)},b.prototype.det=function(){return e["default"](this.elements)},b.prototype.inv=function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=this.det();return this.set(e,-d,-c,b).scale(1/f)},b.prototype.isOne=function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3];return 1===b&&0===d&&0===c&&1===e},b.prototype.isZero=function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3];return 0===b&&0===d&&0===c&&0===e},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.mul2=function(a,b){var c=a.elements,d=c[0],e=c[1],f=c[2],g=c[3],h=b.elements,i=h[0],j=h[1],k=h[2],l=h[3],m=d*i+f*j,n=d*k+f*l,o=e*i+g*j,p=e*k+g*l;return this.set(m,n,o,p)},b.prototype.neg=function(){return this.scale(-1)},b.prototype.one=function(){return this.set(1,0,0,1)},b.prototype.reflection=function(a){var b=i["default"]("n.x",a.x),c=1-2*b*b;return this.set(c,0,0,1)},b.prototype.row=function(a){var b=this.elements;return[b[0+a],b[2+a]]},b.prototype.scale=function(a){var b=this.elements,c=b[0]*a,d=b[1]*a,e=b[2]*a,f=b[3]*a;return this.set(c,e,d,f)},b.prototype.set=function(a,b,c,d){var e=this.elements;return e[0]=a,e[2]=b,e[1]=c,e[3]=d,this},b.prototype.sub=function(a){var b=this.elements,c=b[0],d=b[1],e=b[2],f=b[3],g=a.elements,h=g[0],i=g[1],j=g[2],k=g[3],l=c-h,m=d-i,n=e-j,o=f-k;return this.set(l,n,m,o)},b.prototype.toExponential=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toExponential(a)}).join(" "));return b.join("\n")},b.prototype.toFixed=function(a){f["default"](a)&&h["default"]("fractionDigits",a);for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toFixed(a)}).join(" "));return b.join("\n")},b.prototype.toPrecision=function(a){f["default"](a)&&h["default"]("precision",a);for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toPrecision(a)}).join(" "));return b.join("\n")},b.prototype.toString=function(a){for(var b=[],c=0,d=this.dimensions;c<d;c++)b.push(this.row(c).map(function(b,c){return b.toString(a)}).join(" "));return b.join("\n")},b.prototype.translation=function(a){var b=a.x;return this.set(1,b,0,1)},b.prototype.zero=function(){return this.set(0,0,0,0)},b.prototype.__add__=function(a){return a instanceof b?g.lock(this.clone().add(a)):void 0},b.prototype.__radd__=function(a){return a instanceof b?g.lock(a.clone().add(this)):void 0},b.prototype.__mul__=function(a){return a instanceof b?g.lock(this.clone().mul(a)):"number"==typeof a?g.lock(this.clone().scale(a)):void 0},b.prototype.__rmul__=function(a){return a instanceof b?g.lock(a.clone().mul(this)):"number"==typeof a?g.lock(this.clone().scale(a)):void 0},b.prototype.__pos__=function(){return g.lock(this.clone())},b.prototype.__neg__=function(){return g.lock(this.clone().scale(-1))},b.prototype.__sub__=function(a){return a instanceof b?g.lock(this.clone().sub(a)):void 0},b.prototype.__rsub__=function(a){return a instanceof b?g.lock(a.clone().sub(this)):void 0},b.reflection=function(a){return b.zero.clone().reflection(a)},b}(d["default"]),j.one=g.lock(new j(new Float32Array([1,0,0,1]))),j.zero=g.lock(new j(new Float32Array([0,0,0,0]))),a("default",j)}}}),System.register("davinci-eight/math/Vector4.js",["../math/Coords"],function(a,b){"use strict";var c,d,e=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(a){function b(b,c){return void 0===b&&(b=[0,0,0,0]),void 0===c&&(c=!1),a.call(this,b,c,4)||this}return e(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this.coords[0]},set:function(a){this.modified=this.modified||this.x!==a,this.coords[0]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this.coords[1]},set:function(a){this.modified=this.modified||this.y!==a,this.coords[1]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"z",{get:function(){return this.coords[2]},set:function(a){this.modified=this.modified||this.z!==a,this.coords[2]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"w",{get:function(){return this.coords[3]},set:function(a){this.modified=this.modified||this.w!==a,this.coords[3]=a},enumerable:!0,configurable:!0}),b.prototype.setW=function(a){return this.w=a,this},b.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this.w+=a.w*b,this},b.prototype.add2=function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this},b.prototype.applyMatrix=function(a){var b=this.x,c=this.y,d=this.z,e=this.w,f=a.elements;return this.x=f[0]*b+f[4]*c+f[8]*d+f[12]*e,this.y=f[1]*b+f[5]*c+f[9]*d+f[13]*e,this.z=f[2]*b+f[6]*c+f[10]*d+f[14]*e,this.w=f[3]*b+f[7]*c+f[11]*d+f[15]*e,this},b.prototype.approx=function(b){return a.prototype.approx.call(this,b),this},b.prototype.clone=function(){return new b([this.x,this.y,this.z,this.w],this.modified)},b.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w,this},b.prototype.divByScalar=function(a){return this.x/=a,this.y/=a,this.z/=a,this.w/=a,this},b.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this.w+=(a.w-this.w)*b,this},b.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},b.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},b.prototype.scale=function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},b.prototype.reflect=function(a){return this},b.prototype.rotate=function(a){return this},b.prototype.stress=function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this.w*=a.w,this},b.prototype.sub=function(a,b){return this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this.w-=a.w*b,this},b.prototype.sub2=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this},b.prototype.magnitude=function(){throw new Error("TODO: Vector4.magnitude()")},b.prototype.squaredNorm=function(){throw new Error("TODO: Vector4.squaredNorm()")},b.prototype.toExponential=function(a){return"TODO Vector4.toExponential"},b.prototype.toFixed=function(a){return"TODO Vector4.toFixed"},b.prototype.toPrecision=function(a){return"TODO Vector4.toFixed"},b.prototype.toString=function(a){return"TODO Vector4.toString"},b.prototype.zero=function(){return this.x=0,this.y=0,this.z=0,this.w=0,this},b}(c.Coords),a("default",d)}}}),System.register("davinci-eight/utils/getCanvasElementById.js",["../checks/mustBeString","../checks/mustBeObject"],function(a,b){"use strict";function c(a,b){void 0===b&&(b=window.document),d["default"]("elementId",a),e["default"]("document",b);var c=b.getElementById(a);if(c instanceof HTMLCanvasElement)return c;throw new Error(a+" is not an HTMLCanvasElement.")}b&&b.id;a("default",c);var d,e;return{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/collections/NumberShareableMap.js",["../core/ShareableBase"],function(a,b){"use strict";var c,d,e=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(a){function b(){var b=a.call(this)||this;return b._elements={},b.setLoggingName("NumberShareableMap"),b}return e(b,a),b.prototype.destructor=function(b){this.forEach(function(a,b){b&&b.release()}),this._elements=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.exists=function(a){var b=this._elements[a];return!!b},b.prototype.get=function(a){var b=this.getWeakRef(a);return b&&b.addRef(),b},b.prototype.getWeakRef=function(a){return this._elements[a]},b.prototype.put=function(a,b){b&&b.addRef(),this.putWeakRef(a,b)},b.prototype.putWeakRef=function(a,b){var c=this._elements,d=c[a];d&&d.release(),c[a]=b},b.prototype.forEach=function(a){for(var b=this.keys,c=0,d=b.length;c<d;c++){var e=b[c],f=this._elements[e];a(e,f)}},Object.defineProperty(b.prototype,"keys",{get:function(){return Object.keys(this._elements).map(function(a){return parseFloat(a)})},enumerable:!0,configurable:!0}),b.prototype.remove=function(a){this.put(a,void 0),delete this._elements[a]},b}(c.ShareableBase),a("default",d)}}}),System.register("davinci-eight/utils/animation.js",["../checks/mustBeNumber","../checks/expectArg"],function(a,b){"use strict";function c(){}function d(a){if(a){var b="Exception raised during animate function: "+a;console.warn(b)}}function e(a){return g["default"]("time",a),!1}function f(a,b){void 0===b&&(b={});var f,g,i,j=1,k=2,l=3,m=h["default"]("options.window",b.window||window).toNotBeNull().value,n=h["default"]("options.setUp",b.setUp||c).value,o=h["default"]("options.tearDown",b.tearDown||d).value,p=h["default"]("options.terminate",b.terminate||e).toNotBeNull().value,q=!1,r=0,s=1e3,t=null,u=j,v=function(a){27===a.keyCode&&(q=!0,a.preventDefault())},w={start:function(){w.isRunning||(n(),m.document.addEventListener("keydown",v,!1),u=k,t=m.requestAnimationFrame(i))},stop:function(){w.isRunning&&(q=!0)},reset:function(){
w.isPaused&&(f=void 0,r=0,u=j)},get time(){return r/s},lap:function(){w.isRunning},get isRunning(){return u===k},get isPaused(){return u===l}};return i=function(b){if(f&&(r=r+b-f),f=b,q||p(r/s)){q=!1,m.cancelAnimationFrame(t),w.isRunning?(u=l,f=void 0):console.error("stopSignal received while not running."),m.document.removeEventListener("keydown",v,!1);try{o(g)}catch(c){console.warn("Exception raised during tearDown function: "+c)}}else{t=m.requestAnimationFrame(i);try{a(r/s)}catch(c){g=c,q=!0}}},w}b&&b.id;a("default",f);var g,h;return{setters:[function(a){g=a},function(a){h=a}],execute:function(){}}}),System.register("davinci-eight/transforms/ConeTransform.js",["../checks/mustBeBoolean","../checks/mustBeNumber","../checks/mustBeString","../math/Spinor3","../math/Vector3"],function(a,b){"use strict";function c(a,b,c){c.copy(a);var d=c.squaredNorm();c.add(b,d).divByScalar(Math.sqrt(d)*Math.sqrt(1+d))}var d,e,f,g,h,i;b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(){function a(a,b,c,g){this.h=h["default"].vector(0,1,0),this.a=h["default"].vector(0,0,1),this.b=h["default"].vector(1,0,0),this.clockwise=d["default"]("clockwise",a),this.sliceAngle=e["default"]("sliceAngle",b),this.aPosition=f["default"]("aPosition",c),this.aTangent=f["default"]("aTangent",g)}return a.prototype.exec=function(a,b,d,e,f){var i=e-1,j=b/i,k=f-1,l=d/k,m=this.clockwise?-1:1,n=m*this.sliceAngle*j,o=Math.cos(n),p=Math.sin(n),q=(new h["default"]).add(this.a,o).add(this.b,p),r=h["default"].lerp(q,this.h,l);a.attributes[this.aPosition]=r;var s=h["default"].zero();c(q,this.h,s),a.attributes[this.aTangent]=g["default"].dual(s,!1)},a}(),a("default",i)}}}),System.register("davinci-eight/shapes/ConicalShellBuilder.js",["../transforms/Approximation","../transforms/Direction","../transforms/Duality","../core/GraphicsProgramSymbols","../atoms/GridTriangleStrip","./AxialShapeBuilder","../transforms/ConeTransform","../transforms/Rotation","../transforms/Scaling","../transforms/Translation","../transforms/CoordsTransform2D","../math/Vector3"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a}],execute:function(){o=function(a){function b(){var b=a.call(this)||this;return b.radialSegments=1,b.thetaSegments=32,b.height=n["default"].vector(0,1,0),b.cutLine=n["default"].vector(0,0,1),b.clockwise=!0,b}return p(b,a),b.prototype.toPrimitive=function(){var a=f["default"].ATTRIBUTE_POSITION,b=f["default"].ATTRIBUTE_TANGENT,h=f["default"].ATTRIBUTE_NORMAL,n=new i["default"](this.clockwise,this.sliceAngle,a,b);n.h.copy(this.height),n.a.copy(this.cutLine),n.b.copy(this.height).normalize().cross(this.cutLine),this.transforms.push(n),this.transforms.push(new k["default"](this.stress,[a,b])),this.transforms.push(new j["default"](this.tilt,[a,b])),this.transforms.push(new l["default"](this.offset,[a])),this.transforms.push(new e["default"](b,h,(!0),(!0))),this.transforms.push(new d["default"](h)),this.transforms.push(new c["default"](9,[a,h])),this.useTextureCoord&&this.transforms.push(new m["default"]((!1),(!1),(!1)));for(var o=new g["default"](this.thetaSegments,this.radialSegments),p=o.uLength,q=0;q<p;q++)for(var r=o.vLength,s=0;s<r;s++)this.applyTransforms(o.vertex(q,s),q,s,p,r);return o.toPrimitive()},b}(h["default"]),a("default",o)}}}),System.register("davinci-eight/shapes/ArrowBuilder.js",["./AxialShapeBuilder","../shapes/ConicalShellBuilder","../shapes/CylindricalShellBuilder","../checks/mustBeDefined","../atoms/reduce","../shapes/RingBuilder","../math/Vector3"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function b(b,c,d){var e=a.call(this)||this;return e.heightCone=.2,e.radiusCone=.08,e.radiusShaft=.01,e.thetaSegments=16,f["default"]("axis",b),f["default"]("cutLine",c),e.e=i["default"].copy(b).normalize(),e.cutLine=i["default"].copy(c).normalize(),e.clockwise=d,e}return k(b,a),b.prototype.toPrimitive=function(){var a=1-this.heightCone,b=i["default"].copy(this.e).neg(),c=i["default"].copy(this.e).scale(a).add(this.offset);c.rotate(this.tilt);var f=i["default"].copy(this.offset);f.rotate(this.tilt);var j=new d["default"];j.height.copy(this.e).scale(this.heightCone),j.cutLine.copy(this.cutLine).scale(this.radiusCone),j.clockwise=this.clockwise,j.tilt.mul(this.tilt),j.offset.copy(c),j.sliceAngle=this.sliceAngle,j.thetaSegments=this.thetaSegments,j.useNormal=this.useNormal,j.usePosition=this.usePosition,j.useTextureCoord=this.useTextureCoord;var k=new h["default"];k.e.copy(b),k.cutLine.copy(this.cutLine),k.clockwise=!this.clockwise,k.innerRadius=this.radiusShaft,k.outerRadius=this.radiusCone,k.tilt.mul(this.tilt),k.offset.copy(c),k.sliceAngle=this.sliceAngle,k.thetaSegments=this.thetaSegments,k.useNormal=this.useNormal,k.usePosition=this.usePosition,k.useTextureCoord=this.useTextureCoord;var l=new e["default"];l.height.copy(this.e).normalize().scale(a),l.cutLine.copy(this.cutLine).normalize().scale(this.radiusShaft),l.clockwise=this.clockwise,l.tilt.mul(this.tilt),l.offset.copy(f),l.sliceAngle=this.sliceAngle,l.thetaSegments=this.thetaSegments,l.useNormal=this.useNormal,l.usePosition=this.usePosition,l.useTextureCoord=this.useTextureCoord;var m=new h["default"];return m.e.copy(b),m.cutLine.copy(this.cutLine),m.clockwise=!this.clockwise,m.innerRadius=0,m.outerRadius=this.radiusShaft,m.tilt.mul(this.tilt),m.offset.copy(f),m.sliceAngle=this.sliceAngle,m.thetaSegments=this.thetaSegments,m.useNormal=this.useNormal,m.usePosition=this.usePosition,m.useTextureCoord=this.useTextureCoord,g["default"]([j.toPrimitive(),k.toPrimitive(),l.toPrimitive(),m.toPrimitive()])},b}(c["default"]),a("default",j)}}}),System.register("davinci-eight/geometries/arrowPrimitive.js",["../shapes/ArrowBuilder","../checks/isDefined","../checks/mustBeObject","../checks/mustBeNumber","../math/Vector3","../math/R3"],function(a,b){"use strict";function c(a){void 0===a&&(a={kind:"ArrowGeometry"}),f["default"]("options",a);var b=new d["default"](l(a),m(a),(!1));return e["default"](a.radiusCone)&&(b.radiusCone=g["default"]("options.radiusCone",a.radiusCone)),b.stress.copy(e["default"](a.stress)?a.stress:h["default"].vector(1,1,1)),b.offset.copy(e["default"](a.offset)?a.offset:h["default"].zero()),b.toPrimitive()}b&&b.id;a("default",c);var d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=i["default"](0,1,0),k=i["default"](0,0,1),l=function(a){return e["default"](a.axis)?a.axis:j},m=function(a){return e["default"](a.meridian)?a.meridian:k}}}}),System.register("davinci-eight/geometries/ArrowGeometry.js",["./arrowPrimitive","../core/GeometryElements"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b,d,e){void 0===d&&(d={kind:"ArrowGeometry"}),void 0===e&&(e=0);var f=a.call(this,b,c["default"](d),d,e+1)||this;return f.setLoggingName("ArrowGeometry"),0===e&&f.synchUp(),f}return f(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("ArrowGeometry"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(d["default"]),a("default",e)}}}),System.register("davinci-eight/math/normVectorE3.js",[],function(a,b){"use strict";function c(a){var b=a.x,c=a.y,d=a.z;return Math.sqrt(b*b+c*c+d*d)}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/visual/Arrow.js",["../geometries/ArrowGeometry","../core/Color","./Defaults","../core/referenceAxis","../core/referenceMeridian","../checks/isDefined","./materialFromOptions","../checks/mustBeNumber","../core/Mesh","../math/normVectorE3","./offsetFromOptions","./setAxisAndMeridian","./setColorOption","./setDeprecatedOptions","../geometries/SimplexMode","./simplexModeFromOptions","./spinorE3Object","./vectorE3Object"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a}],execute:function(){u=function(a){function b(b,k,l){void 0===k&&(k={}),void 0===l&&(l=0);var u=a.call(this,void 0,void 0,b,{axis:f["default"](k,e.ds.axis).direction(),meridian:g["default"](k,e.ds.meridian).direction()},l+1)||this;u.setLoggingName("Arrow");var v={kind:"ArrowGeometry"};v.offset=m["default"](k),v.tilt=s["default"](k.tilt),v.axis=t["default"](f["default"](k,e.ds.axis).direction()),v.meridian=t["default"](g["default"](k,e.ds.meridian).direction()),v.radiusCone=.08;var w=b.getCacheGeometry(v);if(w&&w instanceof c["default"])u.geometry=w,w.release();else{var x=new c["default"](b,v);u.geometry=x,x.release(),b.putCacheGeometry(v,x)}var y=i["default"](b,r["default"](k,q["default"].TRIANGLE),k);return u.material=y,y.release(),n["default"](u,k),o["default"](u,k,d["default"].gray),p["default"](u,k),h["default"](k.length)&&(u.length=j["default"]("length",k.length)),0===l&&u.synchUp(),u}return v(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"vector",{get:function(){return a.prototype.getAxis.call(this).scale(this.length)},set:function(a){this.length=l["default"](a),0!==this.length&&this.setAxis(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"length",{get:function(){return this.getScaleX()},set:function(a){this.setScale(a,a,a)},enumerable:!0,configurable:!0}),b}(k["default"]),a("Arrow",u),a("default",u)}}}),System.register("davinci-eight/facets/Vector3Facet.js",["../checks/mustBeString","../math/Vector3"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a){this.vector=d["default"].vector(0,0,0),this._name=c["default"]("name",a)}return Object.defineProperty(a.prototype,"name",{get:function(){return this._name},set:function(a){this._name=c["default"]("name",a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"value",{get:function(){return this.vector},set:function(a){this.vector.copy(a)},enumerable:!0,configurable:!0}),a.prototype.setUniforms=function(a){var b=this.vector;a.uniform3f(this._name,b.x,b.y,b.z)},a}(),a("default",e)}}}),System.register("davinci-eight/visual/Basis.js",["../core/BeginMode","../core/Color","../facets/ColorFacet","../core/DataType","./Defaults","../core/GeometryArrays","../core/GraphicsProgramSymbols","../core/Mesh","./setColorOption","./setDeprecatedOptions","../materials/ShaderMaterial","../math/Vector3","../facets/Vector3Facet"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a}],execute:function(){p="uPointA",q="uPointB",r="uPointC",s="uColorA",t="uColorB",u="uColorC",v=function(){var a=["attribute float aPointIndex;","attribute float aColorIndex;","uniform vec3 "+p+";","uniform vec3 "+q+";","uniform vec3 "+r+";","uniform vec3 "+s+";","uniform vec3 "+t+";","uniform vec3 "+u+";","uniform mat4 "+i["default"].UNIFORM_MODEL_MATRIX+";","uniform mat4 "+i["default"].UNIFORM_PROJECTION_MATRIX+";","uniform mat4 "+i["default"].UNIFORM_VIEW_MATRIX+";","varying highp vec4 "+i["default"].VARYING_COLOR+";","","void main(void) {","  vec3 "+i["default"].ATTRIBUTE_POSITION+";","  vec3 "+i["default"].ATTRIBUTE_COLOR+";","  if (aPointIndex == 0.0) {","    "+i["default"].ATTRIBUTE_POSITION+" = vec3(0.0, 0.0, 0.0);","  }","  if (aPointIndex == 1.0) {","    "+i["default"].ATTRIBUTE_POSITION+" = "+p+";","  }","  if (aPointIndex == 2.0) {","    "+i["default"].ATTRIBUTE_POSITION+" = "+q+";","  }","  if (aPointIndex == 3.0) {","    "+i["default"].ATTRIBUTE_POSITION+" = "+r+";","  }","  if (aColorIndex == 1.0) {","    "+i["default"].ATTRIBUTE_COLOR+" = "+s+";","  }","  if (aColorIndex == 2.0) {","    "+i["default"].ATTRIBUTE_COLOR+" = "+t+";","  }","  if (aColorIndex == 3.0) {","    "+i["default"].ATTRIBUTE_COLOR+" = "+u+";","  }","  gl_Position = "+i["default"].UNIFORM_PROJECTION_MATRIX+" * "+i["default"].UNIFORM_VIEW_MATRIX+" * "+i["default"].UNIFORM_MODEL_MATRIX+" * vec4("+i["default"].ATTRIBUTE_POSITION+", 1.0);","  "+i["default"].VARYING_COLOR+" = vec4("+i["default"].ATTRIBUTE_COLOR+", 1.0);","}"].join("\n");return a},w=function(){var a=["precision mediump float;","varying highp vec4 "+i["default"].VARYING_COLOR+";","","void main(void) {","  gl_FragColor = "+i["default"].VARYING_COLOR+";","}"].join("\n");return a},x=function(a){function b(b,i,j){void 0===i&&(i={}),void 0===j&&(j=0);var x=a.call(this,void 0,void 0,b,{axis:g.ds.axis,meridian:g.ds.meridian},j+1)||this;x.uPointA=new o["default"](p),x.uPointB=new o["default"](q),x.uPointC=new o["default"](r),x.uColorA=new e["default"](s),x.uColorB=new e["default"](t),x.uColorC=new e["default"](u),x.setLoggingName("Basis"),x.uPointA.vector=n["default"].vector(1,0,0),x.colorA.copy(d["default"].red),x.uPointB.vector=n["default"].vector(0,1,0),x.colorB.copy(d["default"].green),x.uPointC.vector=n["default"].vector(0,0,1),x.colorC.copy(d["default"].blue);var y={mode:c["default"].LINES,attributes:{aPointIndex:{values:[0,1,0,2,0,3],size:1,type:f["default"].FLOAT},aColorIndex:{values:[1,1,2,2,3,3],size:1,type:f["default"].FLOAT}}},z=new h["default"](b,y);x.geometry=z,z.release();var A=new m.ShaderMaterial(v(),w(),[],b);return x.material=A,A.release(),x.setFacet("Basis-"+p,x.uPointA),x.setFacet("Basis-"+q,x.uPointB),x.setFacet("Basis-"+r,x.uPointC),x.setFacet("Basis-"+s,x.uColorA),x.setFacet("Basis-"+t,x.uColorB),x.setFacet("Basis-"+u,x.uColorC),k["default"](x,i,void 0),l["default"](x,i),0===j&&x.synchUp(),x}return y(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"a",{get:function(){return this.uPointA.vector},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"b",{get:function(){return this.uPointB.vector},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"c",{get:function(){return this.uPointC.vector},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"colorA",{get:function(){return this.uColorA.color},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"colorB",{get:function(){return this.uColorB.color},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"colorC",{get:function(){return this.uColorC.color},enumerable:!0,configurable:!0}),b}(j["default"]),a("default",x)}}}),System.register("davinci-eight/geometries/SphereGeometry.js",["../geometries/arc3","../math/Geometric3","../core/GeometryElements","./GeometryMode","../checks/isInteger","../checks/isNumber","../checks/isUndefined","../checks/mustBeGE","../checks/mustBeInteger","../checks/mustBeNumber","../math/R3","../geometries/SimplexPrimitivesBuilder","./SimplexMode","../math/Spinor3","../math/Vector2","../math/Vector3"],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i,l,m){for(var n=w["default"].dual(A,!1),o=i+1,p=f+1,q=0;q<o;q++)for(var r=q/i,s=g+r*h,t=Math.sin(s),u=k["default"].fromSpinor(n).scale(-d/2).exp(),v=k["default"].fromVector(z).rotate(u).scale(t),y=j["default"](v,e,n,f),B=Math.cos(s),C=B,D=0;D<p;D++){var E=y[D].add(A,C).stress(a).rotate(b).add(c);l.push(E);var F=D/f;m.push(new x["default"]([F,r]))}}function d(a,b,c){return a*(c+1)+b}function e(a,b,c){switch(b){case 0:return a+1;case 1:return a;case 2:return a+c+1;case 3:return a+c+2}throw new Error("n must be in the range [0, 3]")}function f(a,b,c,f,g,h){for(var i=0;i<f;i++)for(var j=0;j<g;j++){var k=d(i,j,g),l=e(k,0,g),m=e(k,1,g),n=e(k,2,g),o=e(k,3,g),p=y["default"].copy(a[l]).normalize(),q=y["default"].copy(a[m]).normalize(),r=y["default"].copy(a[n]).normalize(),s=y["default"].copy(a[o]).normalize(),t=b[l].clone(),u=b[m].clone(),v=b[n].clone(),w=b[o].clone();h.triangle([a[l],a[m],a[o]],[p,q,s],[t,u,w]),h.triangle([a[n],a[o],a[m]],[r,s,q],[v,w,u])}}function g(a,b,c,f,g,h){for(var i=0;i<f;i++)for(var j=0;j<g;j++){var k=d(i,j,g),l=e(k,0,g),m=e(k,1,g),n=e(k,2,g),o=e(k,3,g),p=y["default"].copy(a[l]).normalize(),q=y["default"].copy(a[m]).normalize(),r=y["default"].copy(a[n]).normalize(),s=y["default"].copy(a[o]).normalize(),t=b[l].clone(),u=b[m].clone(),v=b[n].clone(),w=b[o].clone();h.lineSegment([a[l],a[m]],[p,q],[t,u]),h.lineSegment([a[m],a[n]],[q,r],[u,v]),h.lineSegment([a[n],a[o]],[r,s],[v,w]),h.lineSegment([a[o],a[l]],[s,p],[w,t])}}function h(a,b,c,f,g,h){for(var i=0;i<f;i++)for(var j=0;j<g;j++){var k=d(i,j,g),l=e(k,0,g),m=e(k,1,g),n=e(k,2,g),o=e(k,3,g),p=y["default"].copy(a[l]).normalize(),q=y["default"].copy(a[m]).normalize(),r=y["default"].copy(a[n]).normalize(),s=y["default"].copy(a[o]).normalize(),t=b[l].clone(),u=b[m].clone(),v=b[n].clone(),w=b[o].clone();h.point([a[l]],[p],[t]),h.point([a[m]],[q],[u]),h.point([a[n]],[r],[v]),h.point([a[o]],[s],[w])}}function i(a){void 0===a&&(a={kind:"SphereGeometry"});var b=new I;if(o["default"](a.radius)?b.radius=a.radius:p["default"](a.radius)?b.radius=H:s["default"]("radius",a.radius),n["default"](a.mode))switch(a.mode){case m["default"].POINT:b.k=v["default"].POINT;break;case m["default"].WIRE:b.k=v["default"].LINE;break;case m["default"].MESH:b.k=v["default"].TRIANGLE;break;default:throw new Error("options.mode must be POINT="+m["default"].POINT+" or WIRE="+m["default"].WIRE+" or MESH="+m["default"].MESH+".")}else p["default"](a.mode)?b.k=v["default"].TRIANGLE:r["default"]("mode",a.mode);o["default"](a.azimuthStart)?b.azimuthStart=a.azimuthStart:p["default"](a.azimuthStart)?b.azimuthStart=B:s["default"]("azimuthStart",a.azimuthStart),o["default"](a.azimuthLength)?b.azimuthLength=a.azimuthLength:p["default"](a.azimuthLength)?b.azimuthLength=C:s["default"]("azimuthLength",a.azimuthLength),n["default"](a.azimuthSegments)?b.azimuthSegments=q["default"]("azimuthSegements",a.azimuthSegments,3):p["default"](a.azimuthSegments)?b.azimuthSegments=D:r["default"]("azimuthSegments",a.azimuthSegments),o["default"](a.elevationStart)?b.elevationStart=a.elevationStart:p["default"](a.elevationStart)?b.elevationStart=E:s["default"]("elevationStart",a.elevationStart),o["default"](a.elevationLength)?b.elevationLength=a.elevationLength:p["default"](a.elevationLength)?b.elevationLength=F:s["default"]("elevationLength",a.elevationLength),n["default"](a.elevationSegments)?b.elevationSegments=q["default"]("elevationSegments",a.elevationSegments,2):p["default"](a.elevationSegments)?b.elevationSegments=G:r["default"]("elevationSegments",a.elevationSegments),a.stress&&b.stress.copy(a.stress),a.offset&&b.offset.copy(a.offset);var c=b.toPrimitives();if(1===c.length)return c[0];throw new Error("Expecting SphereSimplexPrimitivesBuilder to return one Primitive.")}var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a},function(a){x=a},function(a){y=a}],execute:function(){z=t["default"](0,0,1),A=t["default"](0,1,0),B=0,C=2*Math.PI,D=20,E=0,F=Math.PI,G=10,H=1,I=function(a){function b(){var b=a.call(this)||this;return b.tilt=w["default"].one.clone(),b.azimuthStart=B,b.azimuthLength=C,b.azimuthSegments=D,b.elevationStart=E,b.elevationLength=F,b.elevationSegments=G,b.setModified(!0),b.regenerate(),b}return K(b,a),Object.defineProperty(b.prototype,"radius",{get:function(){return this.stress.x},set:function(a){s["default"]("radius",a),this.stress.x=a,this.stress.y=a,this.stress.z=a},enumerable:!0,configurable:!0}),b.prototype.isModified=function(){return a.prototype.isModified.call(this)},b.prototype.setModified=function(b){return a.prototype.setModified.call(this,b),this},b.prototype.regenerate=function(){this.data=[];var a=[],b=[];switch(c(this.stress,this.tilt,this.offset,this.azimuthStart,this.azimuthLength,this.azimuthSegments,this.elevationStart,this.elevationLength,this.elevationSegments,a,b),this.k){case v["default"].EMPTY:f(a,b,this.radius,this.elevationSegments,this.azimuthSegments,this);break;case v["default"].POINT:h(a,b,this.radius,this.elevationSegments,this.azimuthSegments,this);break;case v["default"].LINE:g(a,b,this.radius,this.elevationSegments,this.azimuthSegments,this);break;case v["default"].TRIANGLE:f(a,b,this.radius,this.elevationSegments,this.azimuthSegments,this);break;default:console.warn(this.k+"-simplex is not supported for geometry generation.")}this.setModified(!1)},b}(u["default"]),J=function(a){function b(b,c,d){void 0===c&&(c={kind:"SphereGeometry"}),void 0===d&&(d=0);var e=a.call(this,b,i(c),c,d+1)||this;return e.setLoggingName("SphereGeometry"),0===d&&e.synchUp(),e}return K(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("SphereGeometry"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(l["default"]),a("default",J)}}}),System.register("davinci-eight/visual/Sphere.js",["../core/Color","./Defaults","../core/referenceAxis","../core/referenceMeridian","../checks/isDefined","./geometryModeFromOptions","./materialFromOptions","../core/Mesh","../checks/mustBeNumber","./offsetFromOptions","./setAxisAndMeridian","./setColorOption","./setDeprecatedOptions","../geometries/SimplexMode","./simplexModeFromOptions","../geometries/SphereGeometry","./spinorE3Object","./vectorE3Object"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a}],execute:function(){u="radius",v=function(a){function b(b,j,v){void 0===j&&(j={}),void 0===v&&(v=0);var w=a.call(this,void 0,void 0,b,{axis:e["default"](j,d.ds.axis).direction(),meridian:f["default"](j,d.ds.meridian).direction()},v+1)||this;w.setLoggingName("Sphere");var x=h["default"](j),y={kind:"SphereGeometry"};y.mode=x,y.azimuthSegments=j.azimuthSegments,y.azimuthStart=j.azimuthStart,y.azimuthLength=j.azimuthLength,y.elevationLength=j.elevationLength,y.elevationSegments=j.elevationSegments,y.elevationStart=j.elevationStart,y.offset=l["default"](j),y.stress=void 0,y.tilt=s["default"](j.tilt),y.axis=t["default"](e["default"](j,d.ds.axis).direction()),y.meridian=t["default"](f["default"](j,d.ds.meridian).direction());var z=b.getCacheGeometry(y);if(z&&z instanceof r["default"])w.geometry=z,z.release();else{var A=new r["default"](b,y);w.geometry=A,A.release(),b.putCacheGeometry(y,A)}var B=i["default"](b,q["default"](j,p["default"].TRIANGLE),j);return w.material=B,B.release(),m["default"](w,j),n["default"](w,j,j.textured?c["default"].white:c["default"].gray),o["default"](w,j),w.radius=g["default"](j.radius)?k["default"](u,j.radius):d.ds.radius,0===v&&w.synchUp(),w}return w(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"radius",{get:function(){return this.getScaleX()},set:function(a){this.setScale(a,a,a)},enumerable:!0,configurable:!0}),b}(j["default"]),a("Sphere",v),a("default",v)}}}),System.register("davinci-eight/geometries/computeFaceNormals.js",["../core/GraphicsProgramSymbols","../math/Vector3","../math/wedgeXY","../math/wedgeYZ","../math/wedgeZX"],function(a,b){"use strict";function c(a,b,c){void 0===b&&(b=d["default"].ATTRIBUTE_POSITION),void 0===c&&(c=d["default"].ATTRIBUTE_NORMAL);var i=a.vertices[0].attributes,j=a.vertices[1].attributes,k=a.vertices[2].attributes,l=i[b],m=j[b],n=k[b],o=l.getComponent(0),p=l.getComponent(1),q=l.getComponent(2),r=m.getComponent(0),s=m.getComponent(1),t=m.getComponent(2),u=n.getComponent(0),v=n.getComponent(1),w=n.getComponent(2),x=u-r,y=v-s,z=w-t,A=o-r,B=p-s,C=q-t,D=g["default"](x,y,z,A,B,C),E=h["default"](x,y,z,A,B,C),F=f["default"](x,y,z,A,B,C),G=new e["default"]([D,E,F]).normalize();i[c]=G,j[c]=G,k[c]=G}b&&b.id;a("default",c);var d,e,f,g,h;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){}}}),System.register("davinci-eight/geometries/triangle.js",["../geometries/computeFaceNormals","../geometries/Simplex","../geometries/SimplexMode","../core/GraphicsProgramSymbols"],function(a,b){"use strict";function c(a,b,c,h,i){void 0===h&&(h={}),void 0===i&&(i=[]);var j=new e["default"](f["default"].TRIANGLE);return j.vertices[0].attributes[g["default"].ATTRIBUTE_POSITION]=a,j.vertices[1].attributes[g["default"].ATTRIBUTE_POSITION]=b,j.vertices[2].attributes[g["default"].ATTRIBUTE_POSITION]=c,d["default"](j,g["default"].ATTRIBUTE_POSITION,g["default"].ATTRIBUTE_NORMAL),e["default"].setAttributeValues(h,j),i.push(j),i}b&&b.id;a("default",c);var d,e,f,g;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-eight/geometries/quadrilateral.js",["../geometries/triangle"],function(a,b){"use strict";function c(a,b,c){var d,e,f,g=Object.keys(b),h=g.length;for(d=0;d<h;d++)e=g[d],f=b[e],c[e]=a.map(function(a){return f[a]})}function d(a,b,d,f,g,h){void 0===g&&(g={}),void 0===h&&(h=[]);var i={};return c([1,2,0],g,i),e["default"](b,d,a,i,h),c([3,0,2],g,i),e["default"](f,a,d,i,h),h}b&&b.id;a("default",d);var e;return{setters:[function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/geometries/BoxGeometry.js",["../core/GeometryElements","../checks/isDefined","../checks/mustBeBoolean","../checks/mustBeNumber","../atoms/reduce","../math/Geometric3","./GeometryMode","../atoms/GridTriangleStrip","./PrimitivesBuilder","../core/GraphicsProgramSymbols","../math/Spinor3","../math/Vector2","../geometries/computeFaceNormals","../geometries/SimplexPrimitivesBuilder","../geometries/quadrilateral","../geometries/Simplex","../geometries/SimplexMode","../math/R3","../math/Vector1","../math/Vector3"],function(a,b){"use strict";function c(a,b,c,d,e){for(var f=o["default"].wedge(c[0],c[1]).rotate(a),g=y["default"].dual(f,!0).normalize(),h=y["default"].copy(c[0]).scale(-.5),i=y["default"].copy(c[0]).scale(.5),j=y["default"].copy(c[1]).scale(-.5),k=y["default"].copy(c[1]).scale(.5),m=y["default"].copy(c[2]).scale(.5),q=new l["default"](d,e),r=0;r<q.uLength;r++)for(var s=0;s<q.vLength;s++){var t=r/d,u=s/e,v=y["default"].copy(h).lerp(i,t),w=y["default"].copy(j).lerp(k,u),x=q.vertex(r,s),z=y["default"].copy(v).add(w).add(m);z.rotate(a),z.add(b),x.attributes[n["default"].ATTRIBUTE_POSITION]=z,x.attributes[n["default"].ATTRIBUTE_NORMAL]=g,x.attributes[n["default"].ATTRIBUTE_COORDS]=new p.Vector2([t,1-u])}return q}function d(a){void 0===a&&(a={kind:"BoxGeometry"});var b=f["default"](a.width)?h["default"]("width",a.width):1,c=f["default"](a.height)?h["default"]("height",a.height):1,d=f["default"](a.depth)?h["default"]("depth",a.depth):1,e=f["default"](a.axis)?w.vectorCopy(a.axis).direction():v["default"](0,1,0),l=(f["default"](a.meridian)?w.vectorCopy(a.meridian):v["default"](0,0,1)).rejectionFrom(e).direction(),m=j["default"].rotorFromFrameToFrame([z,A,z.cross(A)],[e,l,e.cross(l)]),n=f["default"](a.mode)?a.mode:k["default"].MESH;switch(n){case k["default"].POINT:var o=B.scale(b),p=C.scale(c),q=D.scale(d),r=new E(o,p,q,u["default"].POINT);a.stress&&r.stress.copy(a.stress),r.tilt.copy(m),a.offset&&r.offset.copy(a.offset);var s=r.toPrimitives();if(1===s.length)return s[0];throw new Error("Expecting CuboidSimplexPrimitivesBuilder to return one Primitive.");case k["default"].WIRE:var o=B.scale(b),p=C.scale(c),q=D.scale(d),r=new E(o,p,q,u["default"].LINE);a.stress&&r.stress.copy(a.stress),r.tilt.copy(m),a.offset&&r.offset.copy(a.offset);var s=r.toPrimitives();if(1===s.length)return s[0];throw new Error("Expecting CuboidSimplexPrimitivesBuilder to return one Primitive.");default:var r=new F;return r.width=b,r.height=c,r.depth=d,f["default"](a.openBack)&&(r.openBack=g["default"]("openBack",a.openBack)),f["default"](a.openBase)&&(r.openBase=g["default"]("openBase",a.openBase)),f["default"](a.openFront)&&(r.openFront=g["default"]("openFront",a.openFront)),f["default"](a.openLeft)&&(r.openLeft=g["default"]("openLeft",a.openLeft)),f["default"](a.openRight)&&(r.openRight=g["default"]("openRight",a.openRight)),f["default"](a.openCap)&&(r.openCap=g["default"]("openCap",a.openCap)),a.stress&&r.stress.copy(a.stress),r.tilt.copy(m),a.offset&&r.offset.copy(a.offset),i["default"](r.toPrimitives())}}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){
this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a,w=a},function(a){x=a},function(a){y=a}],execute:function(){z=v["default"](0,1,0),A=v["default"](0,0,1),B=v["default"](1,0,0),C=v["default"](0,1,0),D=v["default"](0,0,1),E=function(a){function b(b,c,d,e,f,g){void 0===e&&(e=u["default"].TRIANGLE),void 0===f&&(f=0),void 0===g&&(g=0);var h=a.call(this)||this;return h._isModified=!0,h._a=y["default"].copy(b),h._b=y["default"].copy(c),h._c=y["default"].copy(d),h.k=e,h.subdivide(f),h.boundary(g),h.regenerate(),h}return H(b,a),Object.defineProperty(b.prototype,"a",{get:function(){return this._a},set:function(a){this._a=a,this._isModified=!0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"b",{get:function(){return this._b},set:function(a){this._b=a,this._isModified=!0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"c",{get:function(){return this._c},set:function(a){this._c=a,this._isModified=!0},enumerable:!0,configurable:!0}),b.prototype.isModified=function(){return this._isModified||a.prototype.isModified.call(this)},b.prototype.setModified=function(b){return this._isModified=b,a.prototype.setModified.call(this,b),this},b.prototype.regenerate=function(){function a(a){for(var b=new t["default"](a.length-1),d=0;d<a.length;d++)b.vertices[d].attributes[n["default"].ATTRIBUTE_POSITION]=c[a[d]],b.vertices[d].attributes[n["default"].ATTRIBUTE_GEOMETRY_INDEX]=new x["default"]([d]);return b}var b=this;this.setModified(!1);var c=[0,1,2,3,4,5,6,7].map(function(){});switch(c[0]=(new y["default"]).sub(this._a).sub(this._b).add(this._c).divByScalar(2),c[1]=(new y["default"]).add(this._a).sub(this._b).add(this._c).divByScalar(2),c[2]=(new y["default"]).add(this._a).add(this._b).add(this._c).divByScalar(2),c[3]=(new y["default"]).sub(this._a).add(this._b).add(this._c).divByScalar(2),c[4]=(new y["default"]).copy(c[3]).sub(this._c),c[5]=(new y["default"]).copy(c[2]).sub(this._c),c[6]=(new y["default"]).copy(c[1]).sub(this._c),c[7]=(new y["default"]).copy(c[0]).sub(this._c),c.forEach(function(a){a.rotate(b.tilt),a.add(b.offset)}),this.k){case u["default"].POINT:var d=[[0],[1],[2],[3],[4],[5],[6],[7]];this.data=d.map(function(b){return a(b)});break;case u["default"].LINE:var e=[[0,1],[1,2],[2,3],[3,0],[0,7],[1,6],[2,5],[3,4],[4,5],[5,6],[6,7],[7,4]];this.data=e.map(function(b){return a(b)});break;case u["default"].TRIANGLE:var f=[0,1,2,3,4,5].map(function(){});f[0]=s["default"](c[0],c[1],c[2],c[3]),f[1]=s["default"](c[1],c[6],c[5],c[2]),f[2]=s["default"](c[7],c[0],c[3],c[4]),f[3]=s["default"](c[6],c[7],c[4],c[5]),f[4]=s["default"](c[3],c[2],c[5],c[4]),f[5]=s["default"](c[7],c[6],c[1],c[0]),this.data=f.reduce(function(a,b){return a.concat(b)},[]),this.data.forEach(function(a){q["default"](a)})}this.check()},b}(r["default"]),F=function(a){function b(){var b=a.call(this)||this;return b.iSegments=1,b.jSegments=1,b.kSegments=1,b.openBack=!1,b.openBase=!1,b.openFront=!1,b.openLeft=!1,b.openRight=!1,b.openCap=!1,b._a=y["default"].vector(1,0,0),b._b=y["default"].vector(0,1,0),b._c=y["default"].vector(0,0,1),b.sides=[],b}return H(b,a),Object.defineProperty(b.prototype,"width",{get:function(){return this._a.magnitude()},set:function(a){h["default"]("width",a),this._a.normalize().scale(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this._b.magnitude()},set:function(a){h["default"]("height",a),this._b.normalize().scale(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"depth",{get:function(){return this._c.magnitude()},set:function(a){h["default"]("depth",a),this._c.normalize().scale(a)},enumerable:!0,configurable:!0}),b.prototype.regenerate=function(){this.sides=[];var a=this.tilt,b=this.offset;this.openFront||this.sides.push(c(a,b,[this._a,this._b,this._c],this.iSegments,this.jSegments)),this.openRight||this.sides.push(c(a,b,[y["default"].copy(this._c).scale(-1),this._b,this._a],this.kSegments,this.jSegments)),this.openLeft||this.sides.push(c(a,b,[this._c,this._b,y["default"].copy(this._a).scale(-1)],this.kSegments,this.jSegments)),this.openBack||this.sides.push(c(a,b,[y["default"].copy(this._a).scale(-1),this._b,y["default"].copy(this._c).scale(-1)],this.iSegments,this.jSegments)),this.openCap||this.sides.push(c(a,b,[this._a,y["default"].copy(this._c).scale(-1),this._b],this.iSegments,this.kSegments)),this.openBase||this.sides.push(c(a,b,[this._a,this._c,y["default"].copy(this._b).scale(-1)],this.iSegments,this.kSegments))},b.prototype.toPrimitives=function(){return this.regenerate(),this.sides.map(function(a){return a.toPrimitive()})},b}(m["default"]),G=function(a){function b(b,c,e){void 0===c&&(c={kind:"BoxGeometry"}),void 0===e&&(e=0);var f=a.call(this,b,d(c),c,e+1)||this;return f.setLoggingName("BoxGeometry"),0===e&&f.synchUp(),f}return H(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("BoxGeometry"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(e["default"]),a("default",G)}}}),System.register("davinci-eight/visual/Box.js",["../geometries/BoxGeometry","../core/Color","./Defaults","../checks/isDefined","./geometryModeFromOptions","./materialFromOptions","../core/Mesh","../checks/mustBeNumber","../core/referenceAxis","../core/referenceMeridian","./setAxisAndMeridian","./setColorOption","./setDeprecatedOptions","../geometries/SimplexMode","./simplexModeFromOptions","./spinorE3Object","./vectorE3Object"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a}],execute:function(){t=function(a){function b(b,i,t){void 0===i&&(i={}),void 0===t&&(t=0);var u=a.call(this,void 0,void 0,b,{axis:k["default"](i,e.ds.axis).direction(),meridian:l["default"](i,e.ds.meridian).direction()},t+1)||this;u.setLoggingName("Box");var v={kind:"BoxGeometry"};v.mode=g["default"](i),v.offset=s["default"](i.offset),v.tilt=r["default"](i.tilt),v.axis=s["default"](k["default"](i,e.ds.axis).direction()),v.meridian=s["default"](l["default"](i,e.ds.meridian).direction()),v.openBack=i.openBack,v.openBase=i.openBase,v.openFront=i.openFront,v.openLeft=i.openLeft,v.openRight=i.openRight,v.openCap=i.openCap;var w=b.getCacheGeometry(v);if(w&&w instanceof c["default"])u.geometry=w,w.release();else{var x=new c["default"](b,v);u.geometry=x,x.release(),b.putCacheGeometry(v,x)}var y=h["default"](b,q["default"](i,p["default"].TRIANGLE),i);return u.material=y,y.release(),m["default"](u,i),n["default"](u,i,i.textured?d["default"].white:d["default"].gray),o["default"](u,i),f["default"](i.width)&&(u.width=j["default"]("width",i.width)),f["default"](i.height)&&(u.height=j["default"]("height",i.height)),f["default"](i.depth)&&(u.depth=j["default"]("depth",i.depth)),0===t&&u.synchUp(),u}return u(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"width",{get:function(){return this.getScaleX()},set:function(a){var b=this.getScaleY(),c=this.getScaleZ();this.setScale(a,b,c)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this.getScaleY()},set:function(a){var b=this.getScaleX(),c=this.getScaleZ();this.setScale(b,a,c)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"depth",{get:function(){return this.getScaleZ()},set:function(a){var b=this.getScaleX(),c=this.getScaleY();this.setScale(b,c,a)},enumerable:!0,configurable:!0}),b}(i["default"]),a("Box",t),a("default",t)}}}),System.register("davinci-eight/geometries/arc3.js",["../checks/mustBeDefined","../checks/mustBeInteger","../checks/mustBeNumber","../math/Spinor3","../math/Vector3"],function(a,b){"use strict";function c(a,b,c,i){d["default"]("begin",a),f["default"]("angle",b),d["default"]("generator",c),e["default"]("segments",i);var j=[],k=h["default"].copy(a),l=g["default"].copy(c).scale(-b/2/i).exp();j.push(k.clone());for(var m=0;m<i;m++)k.rotate(l),j.push(k.clone());return j}b&&b.id;a("default",c);var d,e,f,g,h;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){}}}),System.register("davinci-eight/geometries/CylinderGeometry.js",["../math/Geometric3","../core/GeometryElements","./GeometryMode","../checks/isDefined","../checks/mustBeBoolean","../checks/mustBeInteger","../checks/mustBeNumber","../geometries/arc3","../geometries/SimplexPrimitivesBuilder","../math/Spinor3","../math/Vector2","../math/Vector3","../math/R3"],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n){for(var p=s["default"].copy(a).scale(.5),t=s["default"].copy(a).scale(1/i),u=i+1,v=0;v<u;v++){for(var w=s["default"].copy(t).scale(v).sub(p),x=[],y=[],z=(i-v)/i,A=o["default"](b,g,h,j),B=A.length,C=0;C<B;C++){var D=A[C],E=q["default"].dual(D,!1);D.add(w),D.stress(d),D.rotate(e),D.add(f),E.stress(d),E.rotate(e);var F=C/j;k.push(D),l.push(E),x.push(k.length-1),y.push(new r["default"]([F,z]))}m.push(x),n.push(y)}}function d(a){return void 0===a&&(a={kind:"CylinderGeometry"}),k["default"](a.axis)?a.axis:k["default"](a.length)?t["default"](0,n["default"]("length",a.length),0):t["default"](0,1,0)}function e(a){return void 0===a&&(a={kind:"CylinderGeometry"}),k["default"](a.meridian)?a.meridian:k["default"](a.radius)?t["default"](0,0,n["default"]("radius",a.radius)):t["default"](0,0,1)}function f(a){void 0===a&&(a={kind:"CylinderGeometry"});var b=d(a),c=e(a),f=k["default"](a.mode)?a.mode:j["default"].MESH,g=new v(b,c,(!1),f);k["default"](a.openBase)&&(g.openBase=l["default"]("openBase",a.openBase)),k["default"](a.openCap)&&(g.openCap=l["default"]("openCap",a.openCap)),k["default"](a.openWall)&&(g.openWall=l["default"]("openWall",a.openWall)),k["default"](a.heightSegments)&&(g.flatSegments=m["default"]("heightSegments",a.heightSegments)),k["default"](a.thetaSegments)&&(g.curvedSegments=m["default"]("thetaSegments",a.thetaSegments)),a.offset&&g.offset.copy(a.offset);var h=g.toPrimitives();if(1===h.length)return h[0];throw new Error("Expecting CylinderSimplexPrimitivesBuilder to return one Primitive.")}function g(a){var b=d(a),c=h["default"].rotorFromDirections(u,b);return{tilt:c}}var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a}],execute:function(){u=t["default"](0,1,0),v=function(a){function b(b,c,d,e){var f=a.call(this)||this;return f.mode=e,f.sliceAngle=2*Math.PI,f.openBase=!1,f.openCap=!1,f.openWall=!1,f.height=s["default"].copy(b),f.cutLine=s["default"].copy(c),f.clockwise=d,f.setModified(!0),f}return x(b,a),b.prototype.regenerate=function(){this.data=[];var a=this.flatSegments,b=this.curvedSegments,d=q["default"].dual(s["default"].copy(this.height).normalize(),!1),e=.5,f=[],g=[],h=[],i=[];if(c(this.height,this.cutLine,this.clockwise,this.stress,this.tilt,this.offset,this.sliceAngle,d,a,b,f,g,h,i),!this.openWall)for(var k=0;k<b;k++)for(var l=0;l<a;l++){var m=h[l][k],n=h[l+1][k],o=h[l+1][k+1],p=h[l][k+1],t=s["default"].dual(g[m],!0).normalize(),u=s["default"].dual(g[n],!0).normalize(),v=s["default"].dual(g[o],!0).normalize(),w=s["default"].dual(g[p],!0).normalize(),x=i[l][k].clone(),y=i[l+1][k].clone(),z=i[l+1][k+1].clone(),A=i[l][k+1].clone();switch(this.mode){case j["default"].MESH:this.triangle([f[n],f[m],f[o]],[u,t,v],[y,x,z]),this.triangle([f[p],f[o],f[m]],[w,v.clone(),t.clone()],[A,z.clone(),x.clone()]);break;case j["default"].WIRE:this.lineSegment([f[m],f[n]],[t,u],[x,y]),this.lineSegment([f[n],f[o]],[u,v],[y,z]),this.lineSegment([f[o],f[o]],[v,w],[z,A]),this.lineSegment([f[p],f[m]],[w,t],[A,x]);break;case j["default"].POINT:this.point([f[m]],[t],[x]),this.point([f[n]],[u],[y]),this.point([f[o]],[v],[z]),this.point([f[p]],[w],[A])}}if(!this.openCap){var B=s["default"].copy(this.height).scale(e).add(this.offset),C=q["default"].dual(s["default"].copy(this.height).normalize(),!1).stress(this.stress).rotate(this.tilt),D=s["default"].dual(C,!0);f.push(B);for(var k=0;k<b;k++){var m=h[a][k+1],n=f.length-1,o=h[a][k],x=i[a][k+1].clone(),z=i[a][k].clone(),y=new r["default"]([(x.x+z.x)/2,(x.y+z.y)/2]);switch(this.mode){case j["default"].MESH:this.triangle([f[m],f[n],f[o]],[D,D,D],[x,y,z]);break;case j["default"].WIRE:this.lineSegment([f[m],f[n]],[D,D],[x,y]),this.lineSegment([f[n],f[o]],[D,D],[y,z]),this.lineSegment([f[o],f[m]],[D,D],[z,x]);break;case j["default"].POINT:this.point([f[m]],[D],[x]),this.point([f[n]],[D],[y]),this.point([f[o]],[D],[z])}}}if(!this.openBase){var E=s["default"].copy(this.height).scale(-e).add(this.offset),C=q["default"].dual(s["default"].copy(this.height).normalize(),!1).neg().stress(this.stress).rotate(this.tilt),D=s["default"].dual(C,!0);f.push(E);for(var k=0;k<b;k++){var m=h[0][k],n=f.length-1,o=h[0][k+1],x=i[0][k].clone(),z=i[0][k+1].clone(),y=new r["default"]([(x.x+z.x)/2,(x.y+z.y)/2]);switch(this.mode){case j["default"].MESH:this.triangle([f[m],f[n],f[o]],[D,D,D],[x,y,z]);break;case j["default"].WIRE:this.lineSegment([f[m],f[n]],[D,D],[x,y]),this.lineSegment([f[n],f[o]],[D,D],[y,z]),this.lineSegment([f[o],f[m]],[D,D],[z,x]);break;case j["default"].POINT:this.point([f[m]],[D],[x]),this.point([f[n]],[D],[y]),this.point([f[o]],[D],[z])}}}this.setModified(!1)},b}(p["default"]),w=function(a){function b(b,c,d){void 0===c&&(c={kind:"CylinderGeometry"}),void 0===d&&(d=0);var e=a.call(this,b,f(c),g(c),d+1)||this;return e.setLoggingName("CylinderGeometry"),0===d&&e.synchUp(),e}return x(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("CylinderGeometry"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(i["default"]),a("default",w)}}}),System.register("davinci-eight/visual/Cylinder.js",["../core/Color","../geometries/CylinderGeometry","./Defaults","./geometryModeFromOptions","../checks/isDefined","./materialFromOptions","../core/Mesh","../checks/mustBeNumber","./offsetFromOptions","../core/referenceAxis","../core/referenceMeridian","./setAxisAndMeridian","./setColorOption","./setDeprecatedOptions","../geometries/SimplexMode","./simplexModeFromOptions","./spinorE3Object","./vectorE3Object"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a}],execute:function(){u=function(a){function b(b,i,u){void 0===i&&(i={}),void 0===u&&(u=0);var v=a.call(this,void 0,void 0,b,{axis:l["default"](i,e.ds.axis).direction(),meridian:m["default"](i,e.ds.meridian).direction()},u+1)||this;v.setLoggingName("Cylinder");var w={kind:"CylinderGeometry"};w.mode=f["default"](i),w.offset=k["default"](i),w.tilt=s["default"](i.tilt),w.axis=t["default"](l["default"](i,e.ds.axis).direction()),w.meridian=t["default"](m["default"](i,e.ds.meridian).direction()),w.openCap=i.openCap,w.openBase=i.openBase,w.openWall=i.openWall,w.heightSegments=i.heightSegments,w.thetaSegments=i.thetaSegments;var x=b.getCacheGeometry(w);if(x&&x instanceof d["default"])v.geometry=x,x.release();else{var y=new d["default"](b,w);v.geometry=y,y.release(),b.putCacheGeometry(w,y)}var z=h["default"](b,r["default"](i,q["default"].TRIANGLE),i);return v.material=z,z.release(),n["default"](v,i),o["default"](v,i,i.textured?c["default"].white:c["default"].gray),p["default"](v,i),v.radius=g["default"](i.radius)?j["default"]("radius",i.radius):e.ds.radius,g["default"](i.length)&&(v.length=j["default"]("length",i.length)),0===u&&v.synchUp(),v}return v(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"length",{get:function(){return this.getScaleY()},set:function(a){var b=this.getScaleX(),c=this.getScaleZ();this.setScale(b,a,c)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"radius",{get:function(){return this.getScaleX()},set:function(a){var b=this.getScaleY();this.setScale(a,b,a)},enumerable:!0,configurable:!0}),b}(i["default"]),a("Cylinder",u),a("default",u)}}}),System.register("davinci-eight/atoms/LineStrip.js",["./CurvePrimitive","../core/BeginMode","./elementsForCurve","../checks/mustBeGE","../checks/mustBeInteger","../checks/mustBeLT"],function(a,b){"use strict";var c,d,e,f,g,h,i,j=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function b(b){var c=a.call(this,d["default"].LINE_STRIP,b,!1)||this;return c.elements=e["default"](b,!1),c}return j(b,a),b.prototype.vertex=function(a){return g["default"]("uIndex",a),f["default"]("uIndex",a,0),h["default"]("uIndex",a,this.uLength),this.vertices[a]},b}(c["default"]),a("default",i)}}}),System.register("davinci-eight/atoms/numVerticesForCurve.js",["../checks/mustBeInteger"],function(a,b){"use strict";function c(a){return d["default"]("uSegments",a),a+1}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/atoms/CurvePrimitive.js",["../checks/mustBeGE","../checks/mustBeLT","../checks/mustBeBoolean","../checks/mustBeInteger","./numPostsForFence","./numVerticesForCurve","../i18n/readOnly","./VertexPrimitive"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){k=function(a){function b(b,d,g){var i=a.call(this,b,h["default"](d),1)||this;f["default"]("uSegments",d),c["default"]("uSegments",d,0),e["default"]("uClosed",g),i._uSegments=d,i._uClosed=g;for(var j=i.uLength,k=0;k<j;k++){var l=i.vertex(k).coords;l.setComponent(0,k)}return i}return l(b,a),Object.defineProperty(b.prototype,"uSegments",{get:function(){return this._uSegments},set:function(a){throw f["default"]("uSegments",a),new Error(i["default"]("uSegments").message)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"uLength",{get:function(){return g["default"](this._uSegments,this._uClosed)},set:function(a){throw f["default"]("uLength",a),new Error(i["default"]("uLength").message)},enumerable:!0,configurable:!0}),b.prototype.vertexTransform=function(a){for(var b=this.vertices.length,c=0;c<b;c++){var d=this.vertices[c],e=d.coords.getComponent(0);a.exec(d,e,0,this.uLength,0)}},b.prototype.vertex=function(a){return f["default"]("uIndex",a),c["default"]("uIndex",a,0),d["default"]("uIndex",a,this.uLength),this.vertices[a]},b}(j["default"]),a("default",k)}}}),System.register("davinci-eight/atoms/elementsForCurve.js",["../checks/isDefined","../checks/mustBeArray","./numPostsForFence"],function(a,b){"use strict";function c(a,b,c){c=d["default"](c)?e["default"]("elements",c):[];for(var g=f["default"](a,b),h=0;h<g;h++)c.push(h);return c}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/checks/isLT.js",[],function(a,b){"use strict";function c(a,b){return a<b}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeLT.js",["../checks/mustSatisfy","../checks/isLT"],function(a,b){"use strict";function c(a,b,c,f){return d["default"](a,e["default"](b,c),function(){return"be less than "+c},f),b}b&&b.id;a("default",c);var d,e;return{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/atoms/LinePoints.js",["./CurvePrimitive","../core/BeginMode","./elementsForCurve","../checks/mustBeGE","../checks/mustBeInteger","../checks/mustBeLT"],function(a,b){"use strict";var c,d,e,f,g,h,i,j=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function b(b){var c=a.call(this,d["default"].POINTS,b,!1)||this;return c.elements=e["default"](b,!1),c}return j(b,a),b.prototype.vertex=function(a){return g["default"]("uIndex",a),f["default"]("uIndex",a,0),h["default"]("uIndex",a,this.uLength),this.vertices[a]},b}(c["default"]),a("default",i)}}}),System.register("davinci-eight/geometries/curvePrimitive.js",["../core/Color","../core/GraphicsProgramSymbols","../atoms/LineStrip","./CurveMode","../atoms/LinePoints","../checks/isDefined","../checks/isFunction","../checks/mustBeNumber","../math/Vector3"],function(a,b){"use strict";function c(a){return o["default"].vector(a,0,0)}function d(a,b,c){switch(a){case j["default"].POINTS:return new k["default"](b);case j["default"].LINES:return new i["default"](b);default:throw new Error("mode must be POINTS or LINES")}}function e(a,b,d){var e=l["default"](d.aPosition)?d.aPosition:c,f=l["default"](d.aColor)?d.aColor:void 0;m["default"](e)&&(a.attributes[h["default"].ATTRIBUTE_POSITION]=o["default"].copy(e(b))),m["default"](f)&&(a.attributes[h["default"].ATTRIBUTE_COLOR]=g.Color.copy(f(b)))}function f(a){var b=l["default"](a.uMin)?n["default"]("uMin",a.uMin):0,c=l["default"](a.uMax)?n["default"]("uMax",a.uMax):1,f=l["default"](a.uSegments)?a.uSegments:1,g=l["default"](a.mode)?a.mode:j["default"].LINES,h=d(g,f,!1),i=h.uLength;if(f>0)for(var k=0;k<i;k++){var m=h.vertex(k),o=b+(c-b)*k/f;e(m,o,a)}else{var m=h.vertex(0),o=(b+c)/2;e(m,o,a)}return h.toPrimitive()}b&&b.id;a("default",f);var g,h,i,j,k,l,m,n,o;return{setters:[function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a}],execute:function(){}}}),System.register("davinci-eight/geometries/CurveGeometry.js",["../core/GeometryElements","./curvePrimitive"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b,c,e){void 0===c&&(c={kind:"CurveGeometry"}),void 0===e&&(e=0);var f=a.call(this,b,d["default"](c),c,e+1)||this;return f.setLoggingName("CurveGeometry"),0===e&&f.synchUp(),f}return f(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("CurveGeometry"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(c["default"]),a("default",e)}}}),System.register("davinci-eight/geometries/CurveMode.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES"}(c||(c={})),a("CurveMode",c),a("default",c)}}}),System.register("davinci-eight/visual/Curve.js",["../core/GraphicsProgramSymbols","../core/Color","../geometries/CurveGeometry","../geometries/CurveMode","../checks/isDefined","../checks/isFunction","../checks/isNull","../checks/isUndefined","../materials/LineMaterial","../core/Mesh","../checks/mustBeGE","../checks/mustBeNumber","../materials/PointMaterial","./setColorOption","./setDeprecatedOptions","../math/Vector3"],function(a,b){"use strict";function c(a){return x["default"].vector(a,0,0)}function d(a){return n["default"](a)||o["default"](a)}function e(a){return n["default"](a)||p["default"](a)}function f(a,b){if(d(a.aPosition))b.aPosition=a.aPosition;else{if(!p["default"](a.aPosition))throw new Error("aPosition must be one of function, null, or undefined.");b.aPosition=c}if(d(a.aColor))b.aColor=a.aColor;else if(!p["default"](a.aColor))throw new Error("aColor must be one of function, null, or undefined.");m["default"](a.uMax)?b.uMax=t["default"]("uMax",a.uMax):b.uMax=.5,m["default"](a.uMin)?b.uMin=t["default"]("uMin",a.uMin):b.uMin=-.5,m["default"](a.uSegments)?b.uSegments=s["default"]("uSegments",a.uSegments,0):b.uSegments=1}function g(a,b,c){var d={kind:"CurveGeometry"};f(b,d),d.mode=l["default"].POINTS;var g=new k["default"](a,d);c.geometry=g,g.release();var h={kind:"PointMaterial",attributes:{},uniforms:{}};if(e(b.aPosition))h.attributes[i["default"].ATTRIBUTE_POSITION]=3;else if(!o["default"](b.aPosition))throw new Error;n["default"](b.aColor)?h.attributes[i["default"].ATTRIBUTE_COLOR]=3:h.uniforms[i["default"].UNIFORM_COLOR]="vec3",n["default"](b.aOpacity)?h.attributes[i["default"].ATTRIBUTE_OPACITY]=1:(h.uniforms[i["default"].UNIFORM_OPACITY]="float",h.uniforms[i["default"].UNIFORM_OPACITY]="float"),h.uniforms[i["default"].UNIFORM_MODEL_MATRIX]="mat4",h.uniforms[i["default"].UNIFORM_PROJECTION_MATRIX]="mat4",h.uniforms[i["default"].UNIFORM_VIEW_MATRIX]="mat4",h.uniforms[i["default"].UNIFORM_POINT_SIZE]="float";var j=new u["default"](a,h);c.material=j,j.release()}function h(a,b,c){var d={kind:"CurveGeometry"};f(b,d),d.mode=l["default"].LINES;var g=new k["default"](a,d);c.geometry=g,g.release();var h={kind:"LineMaterial",attributes:{},uniforms:{}};if(e(b.aPosition))h.attributes[i["default"].ATTRIBUTE_POSITION]=3;else if(!o["default"](b.aPosition))throw new Error;n["default"](b.aColor)?h.attributes[i["default"].ATTRIBUTE_COLOR]=3:(h.uniforms[i["default"].UNIFORM_COLOR]="vec3",h.uniforms[i["default"].UNIFORM_OPACITY]="float"),h.uniforms[i["default"].UNIFORM_MODEL_MATRIX]="mat4",h.uniforms[i["default"].UNIFORM_PROJECTION_MATRIX]="mat4",h.uniforms[i["default"].UNIFORM_VIEW_MATRIX]="mat4";var j=new q["default"](a,h);c.material=j,j.release()}var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a},function(a){x=a}],execute:function(){y=function(a){function b(b,c,d){void 0===c&&(c={}),void 0===d&&(d=0);var e=a.call(this,void 0,void 0,b,{},d+1)||this;e.setLoggingName("Curve");var f=m["default"](c.mode)?c.mode:l["default"].LINES;switch(f){case l["default"].POINTS:g(b,c,e);break;case l["default"].LINES:h(b,c,e);break;default:throw new Error("'"+f+"' is not a valid option for mode.")}return v["default"](e,c,j["default"].gray),w["default"](e,c),0===d&&e.synchUp(),e}return z(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(r["default"]),a("Curve",y),a("default",y)}}}),System.register("davinci-eight/visual/GridXY.js",["../checks/expectOptions","../geometries/GeometryMode","./Grid","../checks/isDefined","../checks/mustBeFunction","../checks/mustBeInteger","../checks/mustBeNumber","../checks/validate","../math/R3"],function(a,b){"use strict";function c(a){d["default"](m,Object.keys(a));var b;g["default"](a.z)?(h["default"]("z",a.z),b=function(b,c){return l["default"](b,c,a.z(b,c))}):b=function(a,b){return l["default"](a,b,0)};var c=k["default"]("xMin",a.xMin,-1,j["default"]),f=k["default"]("xMax",a.xMax,1,j["default"]),n=k["default"]("xSegments",a.xSegments,10,i["default"]),o=k["default"]("yMin",a.yMin,-1,j["default"]),p=k["default"]("yMax",a.yMax,1,j["default"]),q=k["default"]("ySegments",a.ySegments,10,i["default"]),r=k["default"]("mode",a.mode,e["default"].WIRE,i["default"]);return{uMin:c,uMax:f,uSegments:n,vMin:o,vMax:p,vSegments:q,aPosition:b,mode:r}}var d,e,f,g,h,i,j,k,l,m,n,o=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m=["xMin","xMax","xSegments","yMin","yMax","ySegments","z","contextManager","engine","tilt","offset","mode"],n=function(a){function b(b,d,e){void 0===d&&(d={}),void 0===e&&(e=0);var f=a.call(this,b,c(d),e+1)||this;return f.setLoggingName("GridXY"),0===e&&f.synchUp(),f}return o(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(f["default"]),a("default",n)}}}),System.register("davinci-eight/visual/GridYZ.js",["../checks/expectOptions","../geometries/GeometryMode","./Grid","../checks/isDefined","../checks/mustBeFunction","../checks/mustBeInteger","../checks/mustBeNumber","../math/R3","../checks/validate"],function(a,b){"use strict";function c(a){d["default"](m,Object.keys(a));var b;g["default"](a.x)?(h["default"]("x",a.x),
b=function(b,c){return k["default"](a.x(b,c),b,c)}):b=function(a,b){return k["default"](0,a,b)};var c=l["default"]("yMin",a.yMin,-1,j["default"]),f=l["default"]("yMax",a.yMax,1,j["default"]),n=l["default"]("ySegments",a.ySegments,10,i["default"]),o=l["default"]("zMin",a.zMin,-1,j["default"]),p=l["default"]("zMax",a.zMax,1,j["default"]),q=l["default"]("zSegments",a.zSegments,10,i["default"]),r=l["default"]("mode",a.mode,e["default"].WIRE,i["default"]);return{uMin:c,uMax:f,uSegments:n,vMin:o,vMax:p,vSegments:q,aPosition:b,mode:r}}var d,e,f,g,h,i,j,k,l,m,n,o=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m=["yMin","yMax","ySegments","zMin","zMax","zSegments","x","contextManager","engine","tilt","offset","mode"],n=function(a){function b(b,d,e){void 0===d&&(d={}),void 0===e&&(e=0);var f=a.call(this,b,c(d),e+1)||this;return f.setLoggingName("GridYZ"),0===e&&f.synchUp(),f}return o(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(f["default"]),a("default",n)}}}),System.register("davinci-eight/checks/expectOptions.js",["./mustBeArray"],function(a,b){"use strict";function c(a,b){d["default"]("expects",a),d["default"]("actuals",b);for(var c=b.length,e=0;e<c;e++){var f=b[e];if(a.indexOf(f)<0)throw new Error(f+" is not one of the expected options: "+JSON.stringify(a,null,2)+".")}}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/visual/geometryModeFromOptions.js",["../checks/isDefined","../checks/mustBeBoolean","../checks/mustBeInteger","../geometries/GeometryMode","../geometries/SimplexMode"],function(a,b){"use strict";function c(a,b,c){if(void 0===b&&(b=g["default"].MESH),void 0===c&&(c=!1),!d["default"](a))return b;if(d["default"](a.mode))switch(a.mode){case g["default"].POINT:return a.mode;case g["default"].WIRE:return a.mode;case g["default"].MESH:return a.mode;case"mesh":return g["default"].MESH;case"wire":return g["default"].WIRE;case"point":return g["default"].POINT;default:throw new Error("mode must be POINT = "+g["default"].POINT+", WIRE = "+g["default"].WIRE+", or MESH = "+g["default"].MESH)}else{if(d["default"](a.wireFrame))return c||console.warn("wireFrame: boolean is deprecated. Please use mode: GeometryMode instead."),e["default"]("wireFrame",a.wireFrame)?g["default"].WIRE:b;if(!d["default"](a.k))return b;c||console.warn("k: SimplexMode is deprecated. Please use mode: GeometryMode instead.");var i=f["default"]("k",a.k);switch(i){case h["default"].POINT:return g["default"].POINT;case h["default"].LINE:return g["default"].WIRE;case h["default"].TRIANGLE:return g["default"].MESH;default:throw new Error("k must be POINT = "+h["default"].POINT+", LINE = "+h["default"].LINE+", or TRIANGLE = "+h["default"].TRIANGLE)}}}b&&b.id;a("default",c);var d,e,f,g,h;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){}}}),System.register("davinci-eight/atoms/GridLines.js",["../core/BeginMode","./GridPrimitive","../checks/mustBeInteger","./numPostsForFence"],function(a,b){"use strict";function c(a,b,c,d){return g["default"]("iLength",c),g["default"]("jLength",d),b*c+a}function d(a,b,d,e){for(var f=h["default"](a,b),g=h["default"](d,e),i=[],j=0;j<f;j++)for(var k=0;k<g;k++)j<a&&(i.push(c(j,k,f,g)),i.push(c(j+1,k,f,g))),k<d&&(i.push(c(j,k,f,g)),i.push(c(j,k+1,f,g)));return i}var e,f,g,h,i,j=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function b(b,c,f,g){var i=a.call(this,e["default"].LINES,b,f)||this;i.elements=d(b,c,f,g);for(var j=h["default"](b,c),k=h["default"](f,g),l=0;l<j;l++)for(var m=0;m<k;m++){var n=i.vertex(l,m).coords;n.setComponent(0,l),n.setComponent(1,m)}return i}return j(b,a),b.prototype.vertex=function(a,b){return g["default"]("i",a),g["default"]("j",b),this.vertices[c(a,b,this.uLength,this.vLength)]},b}(f["default"]),a("default",i)}}}),System.register("davinci-eight/atoms/GridPoints.js",["../core/BeginMode","./GridPrimitive","../checks/mustBeInteger","./numPostsForFence"],function(a,b){"use strict";function c(a,b,c,d){return g["default"]("iLength",c),g["default"]("jLength",d),b*c+a}function d(a,b,d,e){for(var f=h["default"](a,b),g=h["default"](d,e),i=[],j=0;j<f;j++)for(var k=0;k<g;k++)i.push(c(j,k,f,g));return i}var e,f,g,h,i,j=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function b(b,c,f,g){var i=a.call(this,e["default"].POINTS,b,f)||this;i.elements=d(b,c,f,g);for(var j=h["default"](b,c),k=h["default"](f,g),l=0;l<j;l++)for(var m=0;m<k;m++){var n=i.vertex(l,m).coords;n.setComponent(0,l),n.setComponent(1,m)}return i}return j(b,a),b.prototype.vertex=function(a,b){return g["default"]("i",a),g["default"]("j",b),this.vertices[c(a,b,this.uLength,this.vLength)]},b}(f["default"]),a("default",i)}}}),System.register("davinci-eight/geometries/gridPrimitive.js",["../core/Color","./GeometryMode","../core/GraphicsProgramSymbols","../atoms/GridLines","../atoms/GridPoints","../atoms/GridTriangleStrip","../checks/isDefined","../checks/isFunction","../checks/mustBeBoolean","../checks/mustBeNumber","../math/Vector2","../math/Vector3"],function(a,b){"use strict";function c(a,b,c,d,e){switch(a){case g["default"].POINT:return new j["default"](b,c,d,e);case g["default"].WIRE:return new i["default"](b,c,d,e);case g["default"].MESH:return new k["default"](b,d);default:throw new Error("mode must be POINT = "+g["default"].POINT+", WIRE = "+g["default"].WIRE+" or MESH = "+g["default"].MESH)}}function d(a,b,c,d){var e=l["default"](d.aPosition)?d.aPosition:void 0,g=l["default"](d.aNormal)?d.aNormal:void 0,i=l["default"](d.aColor)?d.aColor:void 0,j=l["default"](d.aCoords)?d.aCoords:void 0;if(m["default"](j)){var k=j(b,c);a.attributes[h["default"].ATTRIBUTE_COORDS]=p["default"].vector(k.u,k.v)}m["default"](e)&&(a.attributes[h["default"].ATTRIBUTE_POSITION]=q["default"].copy(e(b,c))),m["default"](g)&&(a.attributes[h["default"].ATTRIBUTE_NORMAL]=q["default"].copy(g(b,c))),m["default"](i)&&(a.attributes[h["default"].ATTRIBUTE_COLOR]=f.Color.copy(i(b,c)))}function e(a){var b=l["default"](a.uMin)?o["default"]("uMin",a.uMin):0,e=l["default"](a.uMax)?o["default"]("uMax",a.uMax):1,f=l["default"](a.uSegments)?o["default"]("uSegments",a.uSegments):1,h=!!l["default"](a.uClosed)&&n["default"]("uClosed",a.uClosed),i=l["default"](a.vMin)?o["default"]("vMin",a.vMin):0,j=l["default"](a.vMax)?o["default"]("vMax",a.vMax):1,k=l["default"](a.vSegments)?o["default"]("vSegments",a.vSegments):1,m=!!l["default"](a.vClosed)&&n["default"]("vClosed",a.vClosed),p=l["default"](a.mode)?a.mode:g["default"].WIRE,q=c(p,f,h,k,m),r=q.uLength,s=q.vLength;if(f>0)if(k>0)for(var t=0;t<r;t++)for(var u=0;u<s;u++){var v=q.vertex(t,u),w=b+(e-b)*t/f,x=i+(j-i)*u/k;d(v,w,x,a)}else for(var t=0;t<r;t++){var v=q.vertex(t,0),w=b+(e-b)*t/f,x=(i+j)/2;d(v,w,x,a)}else if(k>0)for(var u=0;u<s;u++){var v=q.vertex(0,u),w=(b+e)/2,x=i+(j-i)*u/k;d(v,w,x,a)}else{var v=q.vertex(0,0),w=(b+e)/2,x=(i+j)/2;d(v,w,x,a)}return q.toPrimitive()}b&&b.id;a("default",e);var f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a}],execute:function(){}}}),System.register("davinci-eight/geometries/GridGeometry.js",["../core/GeometryElements","./gridPrimitive"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b,c,e){void 0===c&&(c={kind:"GridGeometry"}),void 0===e&&(e=0);var f=a.call(this,b,d["default"](c),c,e+1)||this;return f.setLoggingName("GridGeometry"),0===e&&f.synchUp(),f}return f(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("GridGeometry"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(c["default"]),a("GridGeometry",e),a("default",e)}}}),System.register("davinci-eight/visual/Grid.js",["../core/Color","../checks/expectOptions","../geometries/GeometryMode","./geometryModeFromOptions","../core/GraphicsProgramSymbols","../geometries/GridGeometry","../checks/isFunction","../checks/isNull","../checks/isUndefined","../materials/LineMaterial","../core/Mesh","../materials/MeshMaterial","../checks/mustBeGE","../checks/mustBeFunction","../checks/mustBeInteger","../checks/mustBeNumber","../checks/mustBeObject","../materials/PointMaterial","../math/R3","./setAxisAndMeridian","./setColorOption","./setDeprecatedOptions","../checks/validate"],function(a,b){"use strict";function c(a,b){return D["default"](a,b,0)}function d(a,b){return A["default"]("u",a),A["default"]("v",b),D["default"](0,0,1)}function e(a){return r["default"](a)||s["default"](a)}function f(a){return r["default"](a)||t["default"](a)}function g(a,b){if(e(a.aPosition))b.aPosition=a.aPosition;else{if(!t["default"](a.aPosition))throw new Error("aPosition must be one of function, null, or undefined.");b.aPosition=c}if(e(a.aNormal))b.aNormal=a.aNormal;else{if(!t["default"](a.aNormal))throw new Error("aNormal must be one of function, null, or undefined.");b.aNormal=d}if(e(a.aColor))b.aColor=a.aColor;else if(!t["default"](a.aColor))throw new Error("aColor must be one of function, null, or undefined.");b.uMin=H["default"]("uMin",a.uMin,I,A["default"]),b.uMax=H["default"]("uMax",a.uMax,J,A["default"]),b.uSegments=H["default"]("uSegments",a.uSegments,K,z["default"]),x["default"]("uSegments",b.uSegments,0),b.vMin=H["default"]("vMin",a.vMin,I,A["default"]),b.vMax=H["default"]("vMax",a.vMax,J,A["default"]),b.vSegments=H["default"]("vSegments",a.vSegments,K,z["default"]),x["default"]("vSegments",b.vSegments,0)}function h(a,b,c){var d=new q["default"](a,b);c.geometry=d,d.release()}function i(a,b,c){var d={kind:"GridGeometry"};g(b,d),d.mode=n["default"].POINT,h(a,d,c);var e={kind:"PointMaterial",attributes:{},uniforms:{}};if(f(b.aPosition))e.attributes[p["default"].ATTRIBUTE_POSITION]=3;else if(!s["default"](b.aPosition))throw new Error;r["default"](b.aColor)?e.attributes[p["default"].ATTRIBUTE_COLOR]=3:(e.uniforms[p["default"].UNIFORM_COLOR]="vec3",e.uniforms[p["default"].UNIFORM_OPACITY]="float"),e.uniforms[p["default"].UNIFORM_MODEL_MATRIX]="mat4",e.uniforms[p["default"].UNIFORM_PROJECTION_MATRIX]="mat4",e.uniforms[p["default"].UNIFORM_VIEW_MATRIX]="mat4",e.uniforms[p["default"].UNIFORM_POINT_SIZE]="float";var i=a.getCacheMaterial(e);if(i&&i instanceof C["default"])c.material=i,i.release();else{var j=new C["default"](a,e);c.material=j,j.release(),a.putCacheMaterial(e,j)}}function j(a,b,c){var d={kind:"GridGeometry"};g(b,d),d.mode=n["default"].WIRE,h(a,d,c);var e={kind:"LineMaterial",attributes:{},uniforms:{}};if(f(b.aPosition))e.attributes[p["default"].ATTRIBUTE_POSITION]=3;else if(!s["default"](b.aPosition))throw new Error;r["default"](b.aColor)?e.attributes[p["default"].ATTRIBUTE_COLOR]=3:(e.uniforms[p["default"].UNIFORM_COLOR]="vec3",e.uniforms[p["default"].UNIFORM_OPACITY]="float"),e.uniforms[p["default"].UNIFORM_MODEL_MATRIX]="mat4",e.uniforms[p["default"].UNIFORM_PROJECTION_MATRIX]="mat4",e.uniforms[p["default"].UNIFORM_VIEW_MATRIX]="mat4";var i=a.getCacheMaterial(e);if(i&&i instanceof u["default"])c.material=i,i.release();else{var j=new u["default"](a,e);c.material=j,j.release(),a.putCacheMaterial(e,j)}}function k(a,b,c){var d={kind:"GridGeometry"};g(b,d),d.mode=n["default"].MESH,h(a,d,c);var e=new q["default"](a,d);c.geometry=e,e.release();var i={kind:"MeshMaterial",attributes:{},uniforms:{}};if(f(b.aPosition))i.attributes[p["default"].ATTRIBUTE_POSITION]=3;else if(!s["default"](b.aPosition))throw new Error;if(f(b.aNormal))i.attributes[p["default"].ATTRIBUTE_NORMAL]=3,i.uniforms[p["default"].UNIFORM_NORMAL_MATRIX]="mat3",i.uniforms[p["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]="vec3",i.uniforms[p["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION]="vec3";else if(!s["default"](b.aNormal))throw new Error;if(r["default"](b.aColor))i.attributes[p["default"].ATTRIBUTE_COLOR]=3;else if(s["default"](b.aColor))i.uniforms[p["default"].UNIFORM_COLOR]="vec3";else{if(!t["default"](b.aColor))throw new Error;i.uniforms[p["default"].UNIFORM_COLOR]="vec3"}i.uniforms[p["default"].UNIFORM_MODEL_MATRIX]="mat4",i.uniforms[p["default"].UNIFORM_PROJECTION_MATRIX]="mat4",i.uniforms[p["default"].UNIFORM_VIEW_MATRIX]="mat4",i.uniforms[p["default"].UNIFORM_AMBIENT_LIGHT]="vec3";var j=a.getCacheMaterial(i);if(j&&j instanceof w["default"])c.material=j,j.release();else{var k=new w["default"](a,i);c.material=k,k.release(),a.putCacheMaterial(i,k)}}var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a},function(a){x=a},function(a){y=a},function(a){z=a},function(a){A=a},function(a){B=a},function(a){C=a},function(a){D=a},function(a){E=a},function(a){F=a},function(a){G=a},function(a){H=a}],execute:function(){I=-1,J=1,K=10,L={name:"offset"},M={name:"tilt"},N={name:"stress"},O={name:"color",assertFn:B["default"]},P={name:"aPosition",assertFn:y["default"]},Q={name:"aNormal",assertFn:y["default"]},R={name:"aColor",assertFn:y["default"]},S={name:"uMin",defaultValue:I,assertFn:A["default"]},T={name:"uMax",defaultValue:J,assertFn:A["default"]},U={name:"uSegments",defaultValue:K,assertFn:z["default"]},V={name:"vMin",defaultValue:I,assertFn:A["default"]},W={name:"vMax",defaultValue:J,assertFn:A["default"]},X={name:"vSegments",defaultValue:K,assertFn:z["default"]},Y={name:"mode",defaultValue:n["default"].WIRE,assertFn:z["default"]},Z=[L,M,N,O,P,Q,R,S,T,U,V,W,X,Y],$=Z.map(function(a){return a.name}),_=function(a){function b(b,c,d){void 0===c&&(c={}),void 0===d&&(d=0);var e=a.call(this,void 0,void 0,b,{},d+1)||this;e.setLoggingName("Grid"),m["default"]($,Object.keys(c));var f=o["default"](c,n["default"].WIRE);switch(f){case n["default"].POINT:i(b,c,e);break;case n["default"].WIRE:j(b,c,e);break;case n["default"].MESH:k(b,c,e);break;default:throw new Error("'"+f+"' is not a valid option for mode.")}return E["default"](e,c),F["default"](e,c,l["default"].gray),G["default"](e,c),0===d&&e.synchUp(),e}return aa(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(v["default"]),a("Grid",_),a("default",_)}}}),System.register("davinci-eight/checks/validate.js",["./isDefined"],function(a,b){"use strict";function c(a,b,c,e){return d["default"](b)?e(a,b):c}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/visual/GridZX.js",["../checks/expectOptions","../geometries/GeometryMode","./Grid","../checks/isDefined","../checks/mustBeFunction","../checks/mustBeInteger","../checks/mustBeNumber","../math/R3","../checks/validate"],function(a,b){"use strict";function c(a){d["default"](m,Object.keys(a));var b;g["default"](a.y)?(h["default"]("y",a.y),b=function(b,c){return k["default"](c,a.y(b,c),b)}):b=function(a,b){return k["default"](b,0,a)};var c=l["default"]("zMin",a.zMin,-1,j["default"]),f=l["default"]("zMax",a.zMax,1,j["default"]),n=l["default"]("zSegments",a.zSegments,10,i["default"]),o=l["default"]("xMin",a.xMin,-1,j["default"]),p=l["default"]("xMax",a.xMax,1,j["default"]),q=l["default"]("xSegments",a.xSegments,10,i["default"]),r=l["default"]("mode",a.mode,e["default"].WIRE,i["default"]);return{uMin:c,uMax:f,uSegments:n,vMin:o,vMax:p,vSegments:q,aPosition:b,mode:r}}var d,e,f,g,h,i,j,k,l,m,n,o=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m=["zMin","zMax","zSegments","xMin","xMax","xSegments","y","contextManager","engine","tilt","offset","mode"],n=function(a){function b(b,d,e){void 0===d&&(d={}),void 0===e&&(e=0);var f=a.call(this,b,c(d),e+1)||this;return f.setLoggingName("GridZX"),0===e&&f.synchUp(),f}return o(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(f["default"]),a("default",n)}}}),System.register("davinci-eight/transforms/CylinderTransform.js",["../checks/mustBeNumber","../checks/mustBeString","../math/Spinor3","../math/Vector3"],function(a,b){"use strict";var c,d,e,f,g;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(){function a(a,b,g,h,i,j,k){this.height=f["default"].copy(a),this.cutLine=f["default"].copy(b),this.generator=e["default"].dual(this.height.clone().normalize(),g),this.sliceAngle=c["default"]("sliceAngle",h),this.orientation=c["default"]("orientation",i),this.aPosition=d["default"]("aPosition",j),this.aTangent=d["default"]("aTangent",k)}return a.prototype.exec=function(a,b,c,d,g){var h=d-1,i=b/h,j=g-1,k=c/j,l=this.generator.clone().scale(-this.sliceAngle*i/2).exp(),m=f["default"].copy(this.cutLine).rotate(l);a.attributes[this.aPosition]=m.clone().add(this.height,k),a.attributes[this.aTangent]=e["default"].dual(m,!1).scale(this.orientation)},a}(),a("default",g)}}}),System.register("davinci-eight/shapes/CylindricalShellBuilder.js",["../transforms/Approximation","../transforms/Direction","../transforms/Duality","../core/GraphicsProgramSymbols","../atoms/GridTriangleStrip","./AxialShapeBuilder","../transforms/CylinderTransform","../transforms/Rotation","../transforms/Scaling","../transforms/Translation","../transforms/CoordsTransform2D","../math/Vector3"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a}],execute:function(){o=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.radialSegments=1,b.thetaSegments=32,b.height=n["default"].vector(0,1,0),b.cutLine=n["default"].vector(0,0,1),b.clockwise=!0,b.convex=!0,b}return p(b,a),b.prototype.toPrimitive=function(){var a=f["default"].ATTRIBUTE_POSITION,b=f["default"].ATTRIBUTE_TANGENT,h=f["default"].ATTRIBUTE_NORMAL,n=this.convex?1:-1;this.transforms.push(new i["default"](this.height,this.cutLine,this.clockwise,this.sliceAngle,n,a,b)),this.transforms.push(new k["default"](this.stress,[a,b])),this.transforms.push(new j["default"](this.tilt,[a,b])),this.transforms.push(new l["default"](this.offset,[a])),this.transforms.push(new e["default"](b,h,(!0),(!0))),this.transforms.push(new d["default"](h)),this.transforms.push(new c["default"](9,[a,h])),this.useTextureCoord&&this.transforms.push(new m["default"]((!1),(!1),(!1)));for(var o=new g["default"](this.thetaSegments,this.radialSegments),p=o.uLength,q=0;q<p;q++)for(var r=o.vLength,s=0;s<r;s++)this.applyTransforms(o.vertex(q,s),q,s,p,r);return o.toPrimitive()},b}(h["default"]),a("default",o)}}}),System.register("davinci-eight/transforms/Approximation.js",["../checks/mustBeNumber","../math/Coords","../math/Geometric2","../math/Geometric3","../math/Spinor2","../math/Spinor3","../math/Vector2","../math/Vector3"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){k=function(){function a(a,b){this.n=c["default"]("n",a),this.names=b}return a.prototype.exec=function(a,b,c,k,l){for(var m=this.names.length,n=0;n<m;n++){var o=this.names[n],p=a.attributes[o];if(p instanceof d.Coords)p.approx(this.n);else if(p instanceof j["default"])p.approx(this.n);else if(p instanceof h["default"])p.approx(this.n);else if(p instanceof i.Vector2)p.approx(this.n);else if(p instanceof g["default"])p.approx(this.n);else if(p instanceof e.Geometric2)p.approx(this.n);else{if(!(p instanceof f.Geometric3))throw new Error("Expecting "+o+" to be a VectorN");p.approx(this.n)}}},a}(),a("default",k)}}}),System.register("davinci-eight/transforms/Direction.js",["../checks/mustBeString","../math/Geometric2","../math/Geometric3","../math/Spinor2","../math/Spinor3","../math/Vector2","../math/Vector3"],function(a,b){"use strict";var c,d,e,f,g,h,i,j;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(){function a(a){this.sourceName=c["default"]("sourceName",a)}return a.prototype.exec=function(a,b,c,j,k){var l=a.attributes[this.sourceName];if(!l)throw new Error("Vertex attribute "+this.sourceName+" was not found");if(l instanceof i["default"])a.attributes[this.sourceName]=l.normalize();else if(l instanceof g["default"])a.attributes[this.sourceName]=l.normalize();else if(l instanceof h.Vector2)a.attributes[this.sourceName]=l.normalize();else if(l instanceof f["default"])a.attributes[this.sourceName]=l.normalize();else if(l instanceof e.Geometric3)a.attributes[this.sourceName]=l.normalize();else{if(!(l instanceof d.Geometric2))throw new Error("Expecting "+this.sourceName+" to be a Vector, Spinor, or Geometric");a.attributes[this.sourceName]=l.normalize()}},a}(),a("default",j)}}}),System.register("davinci-eight/math/quadSpinorE2.js",["../checks/isDefined","../checks/isNumber"],function(a,b){"use strict";function c(a){if(d["default"](a)){var b=a.a,c=a.b;return e["default"](b)&&e["default"](c)?b*b+c*c:void 0}}b&&b.id;a("default",c);var d,e;return{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/Spinor2.js",["../utils/applyMixins","./approx","../math/dotVectorCartesianE2","../core/Lockable","../checks/mustBeInteger","../checks/mustBeNumber","../checks/mustBeObject","../i18n/notSupported","../math/quadSpinorE2","../math/rotorFromDirectionsE2","../math/wedgeXY"],function(a,b){"use strict";function c(a){return[a.b,a.a]}function d(){var a=[0,0];return a[p]=1,a[q]=0,a}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;b&&b.id;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a}],execute:function(){p=1,q=0,r=Math.abs,s=Math.atan2,t=Math.log,u=Math.cos,v=Math.sin,w=Math.sqrt,x=function(){function a(a,b){void 0===a&&(a=d()),void 0===b&&(b=!1),this.coords_=a,this.modified_=b}return Object.defineProperty(a.prototype,"length",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"modified",{get:function(){return this.modified_},set:function(a){if(this.isLocked())throw new h.TargetLockedError("set modified");this.modified_=a},enumerable:!0,configurable:!0}),a.prototype.getComponent=function(a){return this.coords_[a]},Object.defineProperty(a.prototype,"xy",{get:function(){return this.coords_[q]},set:function(a){if(this.isLocked())throw new h.TargetLockedError("xy");j["default"]("xy",a);var b=this.coords_;this.modified_=this.modified_||b[q]!==a,b[q]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"a",{get:function(){return this.coords_[p]},set:function(a){if(this.isLocked())throw new h.TargetLockedError("a");j["default"]("",a);var b=this.coords_;this.modified_=this.modified_||b[p]!==a,b[p]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"b",{get:function(){return this.coords_[q]},set:function(a){if(this.isLocked())throw new h.TargetLockedError("b");j["default"]("b",a);var b=this.coords_;this.modified_=this.modified_||b[q]!==a,b[q]=a},enumerable:!0,configurable:!0}),a.prototype.add=function(a,b){return void 0===b&&(b=1),k["default"]("spinor",a),j["default"]("",b),this.xy+=a.b*b,this.a+=a.a*b,this},a.prototype.add2=function(a,b){return this.a=a.a+b.a,this.xy=a.b+b.b,this},a.prototype.addPseudo=function(a){return j["default"]("",a),this},a.prototype.addScalar=function(a){return j["default"]("",a),this.a+=a,this},a.prototype.arg=function(){return this.log().grade(2)},a.prototype.approx=function(a){return f["default"](this.coords_,a),this},a.prototype.clone=function(){var b=a.copy(this);return b.modified_=this.modified_,b},a.prototype.conj=function(){return this.xy=-this.xy,this},a.prototype.copy=function(a){return k["default"]("spinor",a),this.xy=j["default"]("spinor.b",a.b),this.a=j["default"]("spinor.a",a.a),this},a.prototype.copyScalar=function(a){return this.zero().addScalar(a)},a.prototype.copySpinor=function(a){return this.copy(a)},a.prototype.copyVector=function(a){return this.zero()},a.prototype.cos=function(){throw new Error("Spinor2.cos")},a.prototype.cosh=function(){throw new Error("Spinor2.cosh")},a.prototype.div=function(a){return this.div2(this,a)},a.prototype.div2=function(a,b){var c=a.a,d=a.b,e=b.a,f=b.b,g=m["default"](b);return this.a=(c*e+d*f)/g,this.xy=(d*e-c*f)/g,this},a.prototype.divByScalar=function(a){return this.xy/=a,this.a/=a,this},a.prototype.exp=function(){var a=this.a,b=this.b,c=Math.exp(a),d=w(b*b),e=c*(0!==d?v(d)/d:1);return this.a=c*u(d),this.b=b*e,this},a.prototype.inv=function(){return this.conj(),this.divByScalar(this.quaditude()),this},a.prototype.isOne=function(){return 1===this.a&&0===this.b},a.prototype.isZero=function(){return 0===this.a&&0===this.b},a.prototype.lco=function(a){return this.lco2(this,a)},a.prototype.lco2=function(a,b){return this},a.prototype.lerp=function(b,c){var d=a.copy(b),e=this.clone(),f=d.mul(e.inv());return f.log(),f.scale(c),f.exp(),this.copy(f),this},a.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},a.prototype.log=function(){if(this.isLocked())return h.lock(this.clone().log());var a=this.a,b=this.xy,c=b*b,d=w(c),e=r(a),f=w(a*a+c);this.a=t(f);var g=s(d,e)/d;return this.xy=b*g,this},a.prototype.magnitude=function(){return w(this.quaditude())},a.prototype.mul=function(a){return this.mul2(this,a)},a.prototype.mul2=function(a,b){var c=a.a,d=a.b,e=b.a,f=b.b;return this.a=c*e-d*f,this.xy=c*f+d*e,this},a.prototype.neg=function(){return this.a=-this.a,this.xy=-this.xy,this},a.prototype.norm=function(){var a=this.magnitude();return this.zero().addScalar(a)},a.prototype.normalize=function(){var a=this.magnitude();return this.xy=this.xy/a,this.a=this.a/a,this},a.prototype.one=function(){return this.a=1,this.xy=0,this},a.prototype.pow=function(){throw new Error("Spinor2.pow")},a.prototype.quaditude=function(){return m["default"](this)},a.prototype.sin=function(){throw new Error("Spinor2.sin")},a.prototype.sinh=function(){throw new Error("Spinor2.sinh")},a.prototype.squaredNorm=function(){var a=this.quaditude();return this.zero().addScalar(a)},a.prototype.rco=function(a){return this.rco2(this,a)},a.prototype.rco2=function(a,b){return this},a.prototype.rev=function(){return this.xy*=-1,this},a.prototype.reflect=function(a){var b=this.a,c=this.xy,d=a.x,e=a.y,f=d*d+e*e;return this.a=f*b,this.xy=-f*c,this},a.prototype.rotate=function(a){return console.warn("Spinor2.rotate is not implemented"),this},a.prototype.rotorFromDirections=function(a,b){return n["default"](a,b,this),this},a.prototype.rotorFromGeneratorAngle=function(a,b){var c=b/2,d=v(c);return this.xy=-a.b*d,this.a=u(c),this},a.prototype.rotorFromVectorToVector=function(a,b){return n["default"](a,b,this),this},a.prototype.scp=function(a){return this.scp2(this,a)},a.prototype.scp2=function(a,b){return this},a.prototype.scale=function(a){return j["default"]("",a),this.xy*=a,this.a*=a,this},a.prototype.stress=function(a){throw new Error(l["default"]("stress").message)},a.prototype.sub=function(a,b){return void 0===b&&(b=1),k["default"]("s",a),j["default"]("",b),this.xy-=a.b*b,this.a-=a.a*b,this},a.prototype.sub2=function(a,b){return this.xy=a.b-b.b,this.a=a.a-b.a,this},a.prototype.versor=function(a,b){var c=a.x,d=a.y,e=b.x,f=b.y;return this.a=g["default"](c,d,e,f),this.xy=o["default"](c,d,0,e,f,0),this},a.prototype.grade=function(a){if(this.isLocked())return h.lock(this.clone().grade(a));switch(i["default"]("i",a),a){case 0:this.xy=0;break;case 2:this.a=0;break;default:this.a=0,this.xy=0}return this},a.prototype.toArray=function(){return c(this)},a.prototype.toExponential=function(a){return this.toString()},a.prototype.toFixed=function(a){return this.toString()},a.prototype.toPrecision=function(a){return this.toString()},a.prototype.toString=function(a){return"Spinor2({: "+this.xy+", w: "+this.a+"})"},a.prototype.ext=function(a){return this.ext2(this,a)},a.prototype.ext2=function(a,b){return this},a.prototype.zero=function(){return this.a=0,this.xy=0,this},a.copy=function(b){return(new a).copy(b)},a.fromBivector=function(b){return(new a).zero().addPseudo(b.b)},a.lerp=function(b,c,d){return a.copy(b).lerp(c,d)},a.one=function(){return a.zero().addScalar(1)},a.rotorFromDirections=function(b,c){return(new a).rotorFromDirections(b,c)},a.zero=function(){return new a([0,0],(!1))},a}(),a("default",x),e["default"](x,[h.LockableMixin])}}}),System.register("davinci-eight/transforms/Duality.js",["../checks/mustBeBoolean","../checks/mustBeString","../i18n/notImplemented","../math/Spinor2","../math/Spinor3","../math/Vector2","../math/Vector3"],function(a,b){"use strict";var c,d,e,f,g,h,i,j;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(){function a(a,b,e,f){
this.sourceName=d["default"]("sourceName",a),this.outputName=d["default"]("outputName",b),this.changeSign=c["default"]("changeSign",e),this.removeSource=c["default"]("removeSource",f)}return a.prototype.exec=function(a,b,c,d,j){var k=a.attributes[this.sourceName];if(!k)throw new Error("Vertex attribute "+this.sourceName+" was not found");if(k instanceof i["default"]){var l=g["default"].dual(k,this.changeSign);a.attributes[this.outputName]=l}else{if(!(k instanceof g["default"]))throw k instanceof h.Vector2?new Error(e["default"]("dual(vector: Vector2)").message):k instanceof f["default"]?new Error(e["default"]("dual(spinor: Spinor2)").message):new Error("Expecting "+this.sourceName+" to be a Vector3 or Spinor");var m=i["default"].dual(k,this.changeSign);a.attributes[this.outputName]=m}this.removeSource&&delete a.attributes[this.sourceName]},a}(),a("default",j)}}}),System.register("davinci-eight/atoms/numVerticesForGrid.js",["../checks/mustBeInteger"],function(a,b){"use strict";function c(a,b){return d["default"]("uSegments",a),d["default"]("vSegments",b),(a+1)*(b+1)}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/atoms/VertexPrimitive.js",["../core/DataType","./DrawAttribute","./DrawPrimitive","../checks/mustBeArray","../checks/mustBeGE","../checks/mustBeInteger","../checks/mustBeNonNullObject","../i18n/notSupported","./Vertex","../geometries/dataFromVectorN"],function(a,b){"use strict";function c(a){if(1===a)return 1;if(2===a)return 2;if(3===a)return 3;if(4===a)return 4;throw new Error("length must be 1, 2, 3, or 4")}function d(a,b){h["default"]("elements",a);for(var d={},g=b.length,i=0;i<g;i++)for(var j=b[i],k=Object.keys(j.attributes),l=k.length,m=0;m<l;m++){var o=k[m],p=n["default"](j.attributes[o]),q=c(p.length),r=d[o];r||(r=d[o]=new f["default"]([],q,e["default"].FLOAT));for(var s=0;s<q;s++)r.values.push(p[s])}return d}var e,f,g,h,i,j,k,l,m,n,o;b&&b.id;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a}],execute:function(){o=function(){function a(a,b,c){this.mode=j["default"]("mode",a),j["default"]("numVertices",b),i["default"]("numVertices",b,0),j["default"]("numCoordinates",c),i["default"]("numCoordinates",c,0),this.vertices=[];for(var d=0;d<b;d++)this.vertices.push(new m["default"](c))}return a.prototype.vertexTransform=function(a){throw k["default"]("transform",a),new Error(l["default"]("vertexTransform").message)},a.prototype.toPrimitive=function(){var a=function(){return"toPrimitive"};return h["default"]("elements",this.elements,a),new g["default"](this.mode,this.elements,d(this.elements,this.vertices))},a}(),a("default",o)}}}),System.register("davinci-eight/atoms/GridPrimitive.js",["../checks/mustBeInteger","./numPostsForFence","./numVerticesForGrid","../i18n/notSupported","../i18n/readOnly","./VertexPrimitive"],function(a,b){"use strict";var c,d,e,f,g,h,i,j=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function b(b,c,d){var f=a.call(this,b,e["default"](c,d),2)||this;return f._uClosed=!1,f._vClosed=!1,f._uSegments=c,f._vSegments=d,f}return j(b,a),Object.defineProperty(b.prototype,"uSegments",{get:function(){return this._uSegments},set:function(a){throw c["default"]("uSegments",a),new Error(g["default"]("uSegments").message)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"uLength",{get:function(){return d["default"](this._uSegments,this._uClosed)},set:function(a){throw c["default"]("uLength",a),new Error(g["default"]("uLength").message)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"vSegments",{get:function(){return this._vSegments},set:function(a){throw c["default"]("vSegments",a),new Error(g["default"]("vSegments").message)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"vLength",{get:function(){return d["default"](this._vSegments,this._vClosed)},set:function(a){throw c["default"]("vLength",a),new Error(g["default"]("vLength").message)},enumerable:!0,configurable:!0}),b.prototype.vertexTransform=function(a){for(var b=this.vertices.length,c=0;c<b;c++){var d=this.vertices[c],e=d.coords.getComponent(0),f=d.coords.getComponent(1);a.exec(d,e,f,this.uLength,this.vLength)}},b.prototype.vertex=function(a,b){throw c["default"]("i",a),c["default"]("j",b),new Error(f["default"]("vertex").message)},b}(h["default"]),a("default",i)}}}),System.register("davinci-eight/atoms/numPostsForFence.js",["../checks/mustBeBoolean","../checks/mustBeGE","../checks/mustBeInteger"],function(a,b){"use strict";function c(a,b){return f["default"]("segmentCount",a),e["default"]("segmentCount",a,0),d["default"]("closed",b),b?a:a+1}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/atoms/GridTriangleStrip.js",["../core/BeginMode","../checks/isDefined","./GridPrimitive","../checks/mustBeArray","../checks/mustBeInteger","./numPostsForFence"],function(a,b){"use strict";function c(a,b,c){c=e["default"](c)?g["default"]("elements",c):[];for(var d=i["default"](a,!1),f=a+d*b,h=2*d*b,j=0,k=1;k<=h;k+=2)c[j]=(k-1)/2,c[j+1]=c[j]+d,c[j+1]%d===a&&c[j+1]!==a&&c[j+1]!==f&&(c[j+2]=c[j+1],c[j+3]=(1+k)/2,j+=2),j+=2;return c}var d,e,f,g,h,i,j,k=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function b(b,e){var f=a.call(this,d["default"].TRIANGLE_STRIP,b,e)||this;return f.elements=c(b,e),f}return k(b,a),b.prototype.vertex=function(a,b){return h["default"]("uIndex",a),h["default"]("vIndex",b),this.vertices[(this.vSegments-b)*this.uLength+a]},b}(f["default"]),a("default",j)}}}),System.register("davinci-eight/shapes/ShapeBuilder.js",["../math/Geometric3","../math/Vector3"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(){this.stress=d["default"].vector(1,1,1),this.tilt=c.Geometric3.one(!1),this.offset=d["default"].zero(),this.transforms=[],this.useNormal=!0,this.usePosition=!0,this.useTextureCoord=!1}return a.prototype.applyTransforms=function(a,b,c,d,e){for(var f=this.transforms.length,g=0;g<f;g++)this.transforms[g].exec(a,b,c,d,e)},a}(),a("default",e)}}}),System.register("davinci-eight/shapes/AxialShapeBuilder.js",["./ShapeBuilder"],function(a,b){"use strict";var c,d,e=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(a){function b(){var b=a.call(this)||this;return b.sliceAngle=2*Math.PI,b}return e(b,a),b}(c["default"]),a("default",d)}}}),System.register("davinci-eight/transforms/RingTransform.js",["../checks/mustBeNumber","../checks/mustBeString","../math/Spinor3","../math/Vector3"],function(a,b){"use strict";var c,d,e,f,g;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(){function a(a,b,g,h,i,j,k,l){this.e=f["default"].copy(a),this.innerRadius=c["default"]("a",h),this.outerRadius=c["default"]("b",i),this.sliceAngle=c["default"]("sliceAngle",j),this.generator=e["default"].dual(a,g),this.cutLine=f["default"].copy(b).normalize(),this.aPosition=d["default"]("aPosition",k),this.aTangent=d["default"]("aTangent",l)}return a.prototype.exec=function(a,b,c,d,g){var h=d-1,i=b/h,j=g-1,k=c/j,l=this.innerRadius,m=this.outerRadius,n=this.generator.clone().scale(-this.sliceAngle*i/2).exp(),o=f["default"].copy(this.cutLine).rotate(n).scale(l+(m-l)*k),p=e["default"].dual(this.e,!1);a.attributes[this.aPosition]=o,a.attributes[this.aTangent]=p},a}(),a("default",g)}}}),System.register("davinci-eight/transforms/Rotation.js",["../checks/mustBeObject","../math/Spinor3","../math/Vector3"],function(a,b){"use strict";var c,d,e,f;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(a,b){this.R=d["default"].copy(c["default"]("R",a)),this.names=b}return a.prototype.exec=function(a,b,c,f,g){for(var h=this.names.length,i=0;i<h;i++){var j=this.names[i],k=a.attributes[j];if(3===k.length){var l=e["default"].vector(k.getComponent(0),k.getComponent(1),k.getComponent(2));l.rotate(this.R),a.attributes[j]=l}else{if(4!==k.length)throw new Error("Expecting "+j+" to be a vector with 3 coordinates");var m=d["default"].spinor(k.getComponent(0),k.getComponent(1),k.getComponent(2),k.getComponent(3));m.rotate(this.R),a.attributes[j]=m}}},a}(),a("default",f)}}}),System.register("davinci-eight/transforms/Scaling.js",["../checks/mustBeArray","../checks/mustBeObject","../math/Spinor3","../math/Vector3"],function(a,b){"use strict";var c,d,e,f,g;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(){function a(a,b){this.stress=f["default"].copy(d["default"]("stress",a)),this.names=c["default"]("names",b)}return a.prototype.exec=function(a,b,c,d,g){for(var h=this.names.length,i=0;i<h;i++){var j=this.names[i],k=a.attributes[j];if(k)if(3===k.length){var l=f["default"].vector(k.getComponent(0),k.getComponent(1),k.getComponent(2));l.stress(this.stress),a.attributes[j]=l}else{if(4!==k.length)throw new Error("Expecting "+j+" to be a vector with 3 coordinates or a spinor with 4 coordinates.");var m=e["default"].spinor(k.getComponent(0),k.getComponent(1),k.getComponent(2),k.getComponent(3));m.stress(this.stress),a.attributes[j]=m}else console.warn("Expecting "+j+" to be a VectorN.")}},a}(),a("default",g)}}}),System.register("davinci-eight/transforms/Translation.js",["../checks/mustBeObject","../math/Vector3"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a,b){this.s=d["default"].copy(c["default"]("s",a)),this.names=b}return a.prototype.exec=function(a,b,c,e,f){for(var g=this.names.length,h=0;h<g;h++){var i=this.names[h],j=a.attributes[i];if(3!==j.length)throw new Error("Expecting "+i+" to be a vector with 3 coordinates");var k=d["default"].vector(j.getComponent(0),j.getComponent(1),j.getComponent(2));k.add(this.s),a.attributes[i]=k}},a}(),a("default",e)}}}),System.register("davinci-eight/transforms/CoordsTransform2D.js",["../core/GraphicsProgramSymbols","../checks/mustBeBoolean","../math/Vector2"],function(a,b){"use strict";var c,d,e,f;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(a,b,c){this.flipU=d["default"]("flipU",a),this.flipV=d["default"]("flipV",b),this.exchageUV=d["default"]("exchangeUV",c)}return a.prototype.exec=function(a,b,d,f,g){var h=b/(f-1),i=d/(g-1);a.attributes[c["default"].ATTRIBUTE_COORDS]=new e.Vector2([h,i])},a}(),a("default",f)}}}),System.register("davinci-eight/shapes/RingBuilder.js",["../transforms/Approximation","../transforms/Direction","../transforms/Duality","../core/GraphicsProgramSymbols","../atoms/GridTriangleStrip","./AxialShapeBuilder","../transforms/RingTransform","../transforms/Rotation","../transforms/Scaling","../transforms/Translation","../transforms/CoordsTransform2D","../math/Vector3"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a}],execute:function(){o=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.innerRadius=0,b.outerRadius=1,b.radialSegments=1,b.thetaSegments=32,b.e=n["default"].vector(0,1,0),b.cutLine=n["default"].vector(0,0,1),b.clockwise=!0,b}return p(b,a),b.prototype.toPrimitive=function(){var a=f["default"].ATTRIBUTE_POSITION,b=f["default"].ATTRIBUTE_TANGENT,h=f["default"].ATTRIBUTE_NORMAL;this.transforms.push(new i["default"](this.e,this.cutLine,this.clockwise,this.outerRadius,this.innerRadius,this.sliceAngle,a,b)),this.transforms.push(new k["default"](this.stress,[a,b])),this.transforms.push(new j["default"](this.tilt,[a,b])),this.transforms.push(new l["default"](this.offset,[a])),this.transforms.push(new e["default"](b,h,(!0),(!0))),this.transforms.push(new d["default"](h)),this.transforms.push(new c["default"](9,[a,h])),this.useTextureCoord&&this.transforms.push(new m["default"]((!1),(!1),(!1)));for(var n=new g["default"](this.thetaSegments,this.radialSegments),o=n.uLength,p=0;p<o;p++)for(var q=n.vLength,r=0;r<q;r++)this.applyTransforms(n.vertex(p,r),p,r,o,q);return n.toPrimitive()},b}(h["default"]),a("default",o)}}}),System.register("davinci-eight/atoms/reduce.js",["../core/BeginMode"],function(a,b){"use strict";function c(a,b,c){if(a.indices)for(var d=a.indices.length,e=0;e<d;e++)b.push(a.indices[e]+c)}function d(a){return a.reduce(function(a,b){return a>b?a:b})}function e(a,b,c){if(a.indices){var e=a.indices[a.indices.length-1];if(b.indices){var f=b.indices[0]+d(a.indices)+1;c.push(e),c.push(f)}}}function f(a,b,c,d){return a[b]||(a[b]={values:[],size:c,type:d}),a[b]}function g(a,b){for(var c=Object.keys(a.attributes),d=c.length,e=0;e<d;e++)for(var g=c[e],h=a.attributes[g],i=f(b,g,h.size,h.type),j=h.values,k=j.length,l=0;l<k;l++)i.values.push(j[l])}function h(a){for(var b=0;b<a.length;b++){var f=a[b];if(f.mode!==i["default"].TRIANGLE_STRIP)throw new Error("mode ("+f.mode+") must be TRIANGLE_STRIP")}return a.reduce(function(a,b){var f=[];c(a,f,0),e(a,b,f),c(b,f,d(a.indices)+1);var h={};return g(a,h),g(b,h),{mode:i["default"].TRIANGLE_STRIP,indices:f,attributes:h}})}b&&b.id;a("default",h);var i;return{setters:[function(a){i=a}],execute:function(){}}}),System.register("davinci-eight/geometries/HollowCylinderGeometry.js",["../shapes/CylindricalShellBuilder","../core/GeometryElements","../shapes/RingBuilder","../atoms/reduce","../math/Vector3"],function(a,b){"use strict";function c(a){void 0===a&&(a={kind:"HollowCylinderGeometry"});var b="object"==typeof a.axis?h["default"].copy(a.axis):i,c="object"==typeof a.meridian?h["default"].copy(a.meridian).normalize():j,e="number"==typeof a.outerRadius?a.outerRadius:1,k="number"==typeof a.innerRadius?a.innerRadius:.5,l="number"==typeof a.sliceAngle?a.sliceAngle:2*Math.PI,m=new d["default"];m.height.copy(b),m.cutLine.copy(c).normalize().scale(e),m.clockwise=!0,m.sliceAngle=l,m.offset.copy(b).scale(-.5);var n=m.toPrimitive();m.cutLine.normalize().scale(k),m.convex=!1;var o=m.toPrimitive(),p=new f["default"];p.e.copy(b).normalize(),p.cutLine.copy(c),p.clockwise=!0,p.innerRadius=k,p.outerRadius=e,p.sliceAngle=l,p.offset.copy(b).scale(.5);var q=p.toPrimitive();p.e.scale(-1),p.clockwise=!1,p.offset.copy(b).scale(-.5);var r=p.toPrimitive();return g["default"]([n,o,q,r])}var d,e,f,g,h,i,j,k,l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=h["default"].vector(0,1,0),j=h["default"].vector(0,0,1),k=function(a){function b(b,d,e){void 0===d&&(d={kind:"HollowCylinderGeometry"}),void 0===e&&(e=0);var f=a.call(this,b,c(d),{},e+1)||this;return f.setLoggingName("HollowCylinderGeometry"),0===e&&f.synchUp(),f}return l(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("HollowCylinderGeometry"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(e["default"]),a("default",k)}}}),System.register("davinci-eight/visual/HollowCylinder.js",["../core/Color","./Defaults","../core/GraphicsProgramSymbols","../geometries/HollowCylinderGeometry","./offsetFromOptions","../core/referenceAxis","../core/referenceMeridian","../checks/isDefined","../core/Mesh","../materials/MeshMaterial","../checks/mustBeNumber","./setAxisAndMeridian","./setColorOption","./setDeprecatedOptions","./spinorE3Object","./vectorE3Object"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a}],execute:function(){s=function(a){function b(b,k,s){void 0===k&&(k={}),void 0===s&&(s=0);var t=a.call(this,void 0,void 0,b,{axis:h["default"](k,d.ds.axis).direction(),meridian:i["default"](k,d.ds.meridian).direction()},s+1)||this;t.setLoggingName("HollowCylinder");var u={kind:"HollowCylinderGeometry"};u.offset=g["default"](k),u.tilt=q["default"](k.tilt),u.axis=r["default"](h["default"](k,d.ds.axis).direction()),u.meridian=r["default"](i["default"](k,d.ds.meridian).direction()),u.outerRadius=j["default"](k.outerRadius)?m["default"]("outerRadius",k.outerRadius):d.ds.radius,u.innerRadius=j["default"](k.innerRadius)?m["default"]("innerRadius",k.innerRadius):.5*u.outerRadius,u.sliceAngle=k.sliceAngle;var v=b.getCacheGeometry(u);if(v&&v instanceof f["default"])t.geometry=v,v.release();else{var w=new f["default"](b,u);t.geometry=w,w.release(),b.putCacheGeometry(u,w)}var x={kind:"MeshMaterial",attributes:{},uniforms:{}};x.attributes[e["default"].ATTRIBUTE_POSITION]=3,x.attributes[e["default"].ATTRIBUTE_NORMAL]=3,x.uniforms[e["default"].UNIFORM_COLOR]="vec3",x.uniforms[e["default"].UNIFORM_OPACITY]="float",x.uniforms[e["default"].UNIFORM_MODEL_MATRIX]="mat4",x.uniforms[e["default"].UNIFORM_NORMAL_MATRIX]="mat3",x.uniforms[e["default"].UNIFORM_PROJECTION_MATRIX]="mat4",x.uniforms[e["default"].UNIFORM_VIEW_MATRIX]="mat4",x.uniforms[e["default"].UNIFORM_AMBIENT_LIGHT]="vec3",x.uniforms[e["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]="vec3",x.uniforms[e["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION]="vec3";var y=b.getCacheMaterial(x);if(y&&y instanceof l["default"])t.material=y,y.release();else{var z=new l["default"](b,x);t.material=z,z.release(),b.putCacheMaterial(x,z)}return n["default"](t,k),o["default"](t,k,c["default"].gray),p["default"](t,k),j["default"](k.length)&&(t.length=m["default"]("length",k.length)),0===s&&t.synchUp(),t}return t(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"length",{get:function(){return this.getScaleY()},set:function(a){var b=this.getScaleX(),c=this.getScaleZ();this.setScale(b,a,c)},enumerable:!0,configurable:!0}),b}(k["default"]),a("default",s)}}}),System.register("davinci-eight/collections/ShareableArray.js",["../i18n/readOnly","../core/ShareableBase"],function(a,b){"use strict";function c(a){if(a){for(var b=new f(a),c=0,d=a.length;c<d;c++){var e=a[c];e&&e.release&&e.release()}return b}}var d,e,f,g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(b){void 0===b&&(b=[]);var c=a.call(this)||this;c.setLoggingName("ShareableArray"),c._elements=b;for(var d=0,e=c._elements.length;d<e;d++){var f=c._elements[d];f.addRef&&f.addRef()}return c}return g(b,a),b.prototype.destructor=function(b){for(var c=0,d=this._elements.length;c<d;c++){var e=this._elements[c];e.release&&e.release()}this._elements=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.find=function(a){for(var c=new b([]),d=this._elements,e=d.length,f=0;f<e;f++){var g=d[f];a(g)&&c.push(g)}return c},b.prototype.findOne=function(a){for(var b=this._elements,c=0,d=b.length;c<d;c++){var e=b[c];if(a(e))return e.addRef&&e.addRef(),e}},b.prototype.get=function(a){var b=this.getWeakRef(a);return b&&b.addRef&&b.addRef(),b},b.prototype.getWeakRef=function(a){return this._elements[a]},b.prototype.indexOf=function(a,b){return this._elements.indexOf(a,b)},Object.defineProperty(b.prototype,"length",{get:function(){return this._elements?this._elements.length:void console.warn("ShareableArray is now a zombie, length is undefined")},set:function(a){throw new Error(d["default"]("length").message)},enumerable:!0,configurable:!0}),b.prototype.slice=function(a,c){return new b(this._elements.slice(a,c))},b.prototype.splice=function(a,b){return c(this._elements.splice(a,b))},b.prototype.shift=function(){return this._elements.shift()},b.prototype.forEach=function(a){return this._elements.forEach(a)},b.prototype.push=function(a){return a&&a.addRef&&a.addRef(),this.pushWeakRef(a)},b.prototype.pushWeakRef=function(a){return this._elements.push(a)},b.prototype.pop=function(){return this._elements.pop()},b.prototype.unshift=function(a){return a.addRef&&a.addRef(),this.unshiftWeakRef(a)},b.prototype.unshiftWeakRef=function(a){return this._elements.unshift(a)},b}(e.ShareableBase),a("default",f)}}}),System.register("davinci-eight/visual/Group.js",["../math/Geometric3","../math/Matrix4","../collections/ShareableArray","../core/ShareableBase"],function(a,b){"use strict";var c,d,e,f,g,h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function b(){var b=a.call(this)||this;return b.X=c.Geometric3.zero(!1),b.R=c.Geometric3.one(!1),b.stress=d["default"].one.clone(),b.visible=!0,b.setLoggingName("Group"),b.members=new e["default"]([]),b}return h(b,a),b.prototype.destructor=function(b){this.members.release(),this.members=void 0,a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"position",{get:function(){return this.X},set:function(a){a&&this.X.copyVector(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"attitude",{get:function(){return this.R},set:function(a){a&&this.R.copySpinor(a)},enumerable:!0,configurable:!0}),b.prototype.add=function(a){this.members.push(a)},b.prototype.remove=function(a){var b=this.members.indexOf(a);if(b>=0){var c=this.members.splice(b,1);c.release()}},b.prototype.render=function(a){var b=this;this.visible&&this.members.forEach(function(c){var d=c.X.x,e=c.X.y,f=c.X.z,g=c.R.a,h=c.R.xy,i=c.R.yz,j=c.R.zx;c.X.rotate(b.R).add(b.X),c.R.mul2(b.R,c.R),c.render(a),c.X.x=d,c.X.y=e,c.X.z=f,c.R.a=g,c.R.xy=h,c.R.yz=i,c.R.zx=j})},b}(f.ShareableBase),a("default",g)}}}),System.register("davinci-eight/visual/Minecraft.js",["../core/BeginMode","../core/DataType","../core/GeometryArrays","../core/ImageTexture","../checks/isBoolean","../checks/isNumber","../core/Mesh","../materials/ShaderMaterial"],function(a,b){"use strict";function c(a,b){var c=.125*b,d=.25*b,e=.375*b;switch(a){case q.Head:return[d,d,d];case q.Helm:return[d,d,d];case q.LeftLeg:case q.LeftLegLayer2:case q.RightLeg:case q.RightLegLayer2:return[c,e,c];case q.Torso:case q.TorsoLayer2:return[d,e,c];case q.LeftArm:case q.LeftArmLayer2:case q.RightArm:case q.RightArmLayer2:return[c,e,c];default:throw new Error("part: "+a)}}function d(a,b,c,d){switch(a){case q.Head:switch(b){case r.Top:return[8,0,16,8];case r.Bottom:return d?[16,0,24,8]:[24,8,16,0];case r.Right:return[0,8,8,16];case r.Front:return[8,8,16,16];case r.Left:return[16,8,24,16];case r.Back:return[24,8,32,16];default:throw new Error(""+b)}case q.Helm:switch(b){case r.Top:return[40,0,48,8];case r.Bottom:return[48,0,56,8];case r.Right:return[32,8,40,16];case r.Front:return[40,8,48,16];case r.Left:return[48,8,56,16];case r.Back:return[56,8,64,16];default:throw new Error(""+b)}case q.RightLeg:switch(b){case r.Top:return[4,16,8,20];case r.Bottom:return[8,16,12,20];case r.Right:return[0,20,4,32];case r.Front:return[4,20,8,32];case r.Left:return[8,20,12,32];case r.Back:return[12,20,16,32];default:throw new Error(""+b)}case q.Torso:switch(b){case r.Top:return[20,16,28,20];case r.Bottom:return[28,16,36,20];case r.Right:return[16,20,20,32];case r.Front:return[20,20,28,32];case r.Left:return[28,20,32,32];case r.Back:return[32,20,40,32];default:throw new Error(""+b)}case q.RightArm:switch(b){case r.Top:return[44,16,48,20];case r.Bottom:return[48,16,52,20];case r.Right:return[40,20,44,32];case r.Front:return[44,20,48,32];case r.Left:return[48,20,52,32];case r.Back:return[52,20,56,32];default:throw new Error(""+b)}case q.LeftLeg:if(c>0)switch(b){case r.Top:return[20,48,24,52];case r.Bottom:return[24,48,28,52];case r.Right:return[16,52,20,64];case r.Front:return[20,52,24,64];case r.Left:return[24,52,28,64];case r.Back:return[28,52,32,64];default:throw new Error(""+b)}else switch(b){case r.Top:return[8,16,4,20];case r.Bottom:return[12,16,8,20];case r.Right:return[12,20,8,32];case r.Front:return[8,20,4,32];case r.Left:return[4,20,0,32];case r.Back:return[16,20,12,32];default:throw new Error(""+b)}case q.LeftArm:if(c>0)switch(b){case r.Top:return[36,48,40,52];case r.Bottom:return[40,48,44,52];case r.Right:return[32,52,36,64];case r.Front:return[36,52,40,64];case r.Left:return[40,52,44,64];case r.Back:return[44,52,48,64];default:throw new Error(""+b)}else switch(b){case r.Top:return[48,16,44,20];case r.Bottom:return[52,16,48,20];case r.Right:return[52,20,48,32];case r.Front:return[48,20,44,32];case r.Left:return[44,20,40,32];case r.Back:return[56,20,52,32];default:throw new Error(""+b)}case q.RightLegLayer2:switch(b){case r.Top:return[4,48,8,36];case r.Bottom:return[8,48,12,36];case r.Right:return[0,36,4,48];case r.Front:return[4,36,8,48];case r.Left:return[8,36,12,48];case r.Back:return[12,36,16,48];default:throw new Error(""+b)}case q.TorsoLayer2:switch(b){case r.Top:return[20,48,28,36];case r.Bottom:return[28,48,36,36];case r.Right:return[16,36,20,48];case r.Front:return[20,36,28,48];case r.Left:return[28,36,32,48];case r.Back:return[32,36,40,48];default:throw new Error(""+b)}case q.RightArmLayer2:switch(b){case r.Top:return[44,48,48,36];case r.Bottom:return[48,48,52,36];case r.Right:return[40,36,44,48];case r.Front:return[44,36,48,48];case r.Left:return[48,36,52,48];case r.Back:return[52,36,64,48];default:throw new Error(""+b)}case q.LeftLegLayer2:switch(b){case r.Top:return[4,48,8,52];case r.Bottom:return[8,48,12,52];case r.Right:return[0,52,4,64];case r.Front:return[4,52,8,64];case r.Left:return[8,52,12,64];case r.Back:return[12,52,16,64];default:throw new Error(""+b)}case q.LeftArmLayer2:switch(b){case r.Top:return[52,48,56,52];case r.Bottom:return[56,48,60,52];case r.Right:return[48,52,52,64];case r.Front:return[52,52,56,64];case r.Left:return[56,52,60,64];case r.Back:return[60,52,64,64];default:throw new Error(""+b)}default:throw new Error("part: "+a)}}function e(a,b,c,e,g){var h=d(a,b,f(c,e),g),i=h[0]/c,j=h[1]/e,k=h[2]/c,l=h[3]/e;return[i,l,k,l,i,j,k,l,k,j,i,j]}function f(a,b){return a===2*b?0:a===b?1.8:0}function g(a,b){var d=b.partKind,f=b.offset?b.offset:{x:0,y:0,z:0},g=c(d,b.height),h=[[-.5,-.5,.5],[.5,-.5,.5],[-.5,.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[.5,-.5,-.5],[-.5,-.5,-.5],[.5,.5,-.5],[-.5,-.5,-.5],[-.5,.5,-.5],[.5,.5,-.5],[.5,-.5,.5],[.5,-.5,-.5],[.5,.5,.5],[.5,-.5,-.5],[.5,.5,-.5],[.5,.5,.5],[-.5,-.5,-.5],[-.5,-.5,.5],[-.5,.5,-.5],[-.5,-.5,.5],[-.5,.5,.5],[-.5,.5,-.5],[-.5,.5,.5],[.5,.5,.5],[-.5,.5,-.5],[.5,.5,.5],[.5,.5,-.5],[-.5,.5,-.5],[-.5,-.5,-.5],[.5,-.5,-.5],[-.5,-.5,.5],[.5,-.5,-.5],[.5,-.5,.5],[-.5,-.5,.5]].map(function(a){return[g[0]*a[0],g[1]*a[1],g[2]*a[2]]}).map(function(a){return[a[0]+f.x,a[1]+f.y,a[2]+f.z]}).reduce(function(a,b){return a.concat(b)}),k=a instanceof l["default"]?a.naturalWidth:64,m=a instanceof l["default"]?a.naturalHeight:64,n=64/k,o=k*n,p=m*n,q=b.oldSkinLayout,s=[e(d,r.Front,o,p,q),e(d,r.Back,o,p,q),e(d,r.Left,o,p,q),e(d,r.Right,o,p,q),e(d,r.Top,o,p,q),e(d,r.Bottom,o,p,q)].reduce(function(a,b){return a.concat(b)}),t={mode:i["default"].TRIANGLES,attributes:{aPosition:{values:h,size:3,type:j["default"].FLOAT},aCoords:{values:s,size:2,type:j["default"].FLOAT}}};return t}function h(a,b,c){return new k["default"](a,g(b,c))}var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a}],execute:function(){!function(a){a[a.Head=0]="Head",a[a.Helm=1]="Helm",a[a.RightLeg=2]="RightLeg",a[a.Torso=3]="Torso",a[a.RightArm=4]="RightArm",a[a.LeftLeg=5]="LeftLeg",a[a.LeftArm=6]="LeftArm",a[a.RightLegLayer2=7]="RightLegLayer2",a[a.TorsoLayer2=8]="TorsoLayer2",a[a.RightArmLayer2=9]="RightArmLayer2",a[a.LeftLegLayer2=10]="LeftLegLayer2",a[a.LeftArmLayer2=11]="LeftArmLayer2"}(q||(q={})),function(a){a[a.Top=0]="Top",a[a.Bottom=1]="Bottom",a[a.Right=2]="Right",a[a.Front=3]="Front",a[a.Left=4]="Left",a[a.Back=5]="Back"}(r||(r={})),s=["attribute vec3 aPosition;","attribute vec2 aCoords;","uniform mat4 uModel;","uniform mat4 uProjection;","uniform mat4 uView;","varying highp vec2 vCoords;","void main(void) {","  gl_Position = uProjection * uView * uModel * vec4(aPosition, 1.0);","  vCoords = aCoords;","}"].join("\n"),t=["precision mediump float;","varying highp vec2 vCoords;","uniform sampler2D uImage;","  void main(void) {","  gl_FragColor = texture2D(uImage, vec2(vCoords.s, vCoords.t));","}"].join("\n"),u=function(a){return new p.ShaderMaterial(s,t,[],a)},v=function(a){function b(b,c,d,e){void 0===e&&(e=0);var f=a.call(this,void 0,void 0,b,{},e+1)||this;f.setLoggingName("MinecraftBodyPart");var g=h(b,c,d);f.geometry=g,g.release();
var i=u(b);return f.material=i,i.release(),f.texture=c,f}return C(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b}(o.Mesh),w=function(a){function b(b,c,d){void 0===d&&(d={});var e=a.call(this,b,c,{height:n["default"](d.height)?d.height:1,partKind:q.Head,offset:d.offset,oldSkinLayout:!!m["default"](d.oldSkinLayout)&&d.oldSkinLayout})||this;return e.setLoggingName("MinecraftHead"),e}return C(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b}(v),a("MinecraftHead",w),x=function(a){function b(b,c,d){void 0===d&&(d={});var e=a.call(this,b,c,{height:n["default"](d.height)?d.height:1,partKind:q.Torso,offset:d.offset,oldSkinLayout:!!m["default"](d.oldSkinLayout)&&d.oldSkinLayout})||this;return e.setLoggingName("MinecraftTorso"),e}return C(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b}(v),a("MinecraftTorso",x),y=function(a){function b(b,c,d){void 0===d&&(d={});var e=a.call(this,b,c,{height:n["default"](d.height)?d.height:1,partKind:q.LeftArm,offset:d.offset,oldSkinLayout:!!m["default"](d.oldSkinLayout)&&d.oldSkinLayout})||this;return e.setLoggingName("MinecraftArmL"),e}return C(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b}(v),a("MinecraftArmL",y),z=function(a){function b(b,c,d){void 0===d&&(d={});var e=a.call(this,b,c,{height:n["default"](d.height)?d.height:1,partKind:q.RightArm,offset:d.offset,oldSkinLayout:!!m["default"](d.oldSkinLayout)&&d.oldSkinLayout})||this;return e.setLoggingName("MinecraftArmR"),e}return C(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b}(v),a("MinecraftArmR",z),A=function(a){function b(b,c,d){void 0===d&&(d={});var e=a.call(this,b,c,{height:n["default"](d.height)?d.height:1,partKind:q.LeftLeg,offset:d.offset,oldSkinLayout:!!m["default"](d.oldSkinLayout)&&d.oldSkinLayout})||this;return e.setLoggingName("MinecraftLegL"),e}return C(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b}(v),a("MinecraftLegL",A),B=function(a){function b(b,c,d){void 0===d&&(d={});var e=a.call(this,b,c,{height:n["default"](d.height)?d.height:1,partKind:q.RightLeg,offset:d.offset,oldSkinLayout:!!m["default"](d.oldSkinLayout)&&d.oldSkinLayout})||this;return e.setLoggingName("MinecraftLegR"),e}return C(b,a),b.prototype.destructor=function(b){a.prototype.destructor.call(this,b+1)},b}(v),a("MinecraftLegR",B)}}}),System.register("davinci-eight/visual/MinecraftFigure.js",["./Group","../checks/isBoolean","../checks/isNumber","./Minecraft","../math/R3"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a,g=a,h=a,i=a,j=a,k=a},function(a){l=a}],execute:function(){m=l["default"](1,0,0),n=l["default"](0,1,0),o=function(a){function b(b,c,l){void 0===l&&(l={});var o=a.call(this)||this,p=e["default"](l.height)?l.height:1,q=p/32,r=!!d["default"](l.oldSkinLayout)&&l.oldSkinLayout;return o.head=new f.MinecraftHead(b,c,{height:p,offset:n.scale(4*q),oldSkinLayout:r}),o.head.position.zero().addVector(n,24*q),o.add(o.head),o.head.release(),o.torso=new k.MinecraftTorso(b,c,{height:p,oldSkinLayout:r}),o.torso.position.zero().addVector(n,18*q),o.add(o.torso),o.torso.release(),o.armL=new g.MinecraftArmL(b,c,{height:p,offset:n.scale(4*-q),oldSkinLayout:r}),o.armL.position.zero().addVector(n,22*q).addVector(m,6*q),o.add(o.armL),o.armL.release(),o.armR=new h.MinecraftArmR(b,c,{height:p,offset:n.scale(4*-q),oldSkinLayout:r}),o.armR.position.zero().addVector(n,22*q).subVector(m,6*q),o.add(o.armR),o.armR.release(),o.legL=new i.MinecraftLegL(b,c,{height:p,offset:n.scale(4*-q),oldSkinLayout:r}),o.legL.position.zero().addVector(n,10*q).addVector(m,2*q),o.add(o.legL),o.legL.release(),o.legR=new j.MinecraftLegR(b,c,{height:p,offset:n.scale(4*-q),oldSkinLayout:r}),o.legR.position.zero().addVector(n,10*q).subVector(m,2*q),o.add(o.legR),o.legR.release(),o}return p(b,a),b}(c["default"]),a("default",o)}}}),System.register("davinci-eight/visual/Parallelepiped.js",["../core/BeginMode","../core/Color","../core/DataType","../base/exchange","../math/Geometric3","../core/GeometryArrays","../core/Mesh","../core/refChange","../materials/ShaderMaterial"],function(a,b){"use strict";function c(a,b,c,d){for(var e=[a,b,c,a,c,d],f=0;f<e.length;f++){for(var g=o[e[f]],h=g.length,i=0;i<h;i++)p.push(g[i]);q.push(a-1)}}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m=["attribute vec3 aCoords;","attribute float aFace;","uniform vec3 a;","uniform vec3 b;","uniform vec3 c;","uniform vec3 color0;","uniform vec3 color1;","uniform vec3 color2;","uniform vec3 color3;","uniform vec3 color4;","uniform vec3 color5;","uniform float uOpacity;","uniform vec3 uPosition;","uniform mat4 uModel;","uniform mat4 uProjection;","uniform mat4 uView;","varying highp vec4 vColor;","","void main(void) {","  vec3 X = aCoords.x * a + aCoords.y * b + aCoords.z * c;","  gl_Position = uProjection * uView * uModel * vec4(X + uPosition, 1.0);","  if (aFace == 0.0) {","    vColor = vec4(color0, uOpacity);","  }","  if (aFace == 1.0) {","    vColor = vec4(color1, uOpacity);","  }","  if (aFace == 2.0) {","    vColor = vec4(color2, uOpacity);","  }","  if (aFace == 3.0) {","    vColor = vec4(color3, uOpacity);","  }","  if (aFace == 4.0) {","    vColor = vec4(color4, uOpacity);","  }","  if (aFace == 5.0) {","    vColor = vec4(color5, uOpacity);","  }","}"].join("\n"),n=["precision mediump float;","varying highp vec4 vColor;","","void main(void) {","  gl_FragColor = vColor;","}"].join("\n"),o=[[-.5,-.5,.5],[-.5,.5,.5],[.5,.5,.5],[.5,-.5,.5],[-.5,-.5,-.5],[-.5,.5,-.5],[.5,.5,-.5],[.5,-.5,-.5]],p=[],q=[],r="parallelepiped",s="Parallelepiped",c(1,0,3,2),c(2,3,7,6),c(3,0,4,7),c(6,5,1,2),c(4,5,6,7),c(5,4,0,1),t=function(){function a(a,b){void 0===b&&(b=0),this.levelUp=b,this.opacity=1,this.transparent=!1,this.X=h["default"].vector(0,0,0),this.a=h["default"].vector(1,0,0),this.b=h["default"].vector(0,1,0),this.c=h["default"].vector(0,0,1),this.colors=[],this.refCount=0,this.contextManager=g["default"](this.contextManager,a),this.addRef(),this.colors[0]=e["default"].gray.clone(),this.colors[1]=e["default"].gray.clone(),this.colors[2]=e["default"].gray.clone(),this.colors[3]=e["default"].gray.clone(),this.colors[4]=e["default"].gray.clone(),this.colors[5]=e["default"].gray.clone(),0===b&&this.contextManager.synchronize(this)}return a.prototype.destructor=function(a){0===a&&this.contextManager&&this.contextManager.gl&&(this.contextManager.gl.isContextLost()?this.contextLost():this.contextFree()),this.mesh=g["default"](this.mesh,void 0),this.contextManager=g["default"](this.contextManager,void 0)},a.prototype.render=function(a){if(this.mesh){var b=this.mesh.material;b.use(),b.getUniform("uOpacity").uniform1f(this.opacity),b.getUniform("uPosition").uniform3f(this.X.x,this.X.y,this.X.z),b.getUniform("a").uniform3f(this.a.x,this.a.y,this.a.z),b.getUniform("b").uniform3f(this.b.x,this.b.y,this.b.z),b.getUniform("c").uniform3f(this.c.x,this.c.y,this.c.z);for(var c=0;c<this.colors.length;c++)b.getUniform("color"+c).uniform3f(this.colors[c].r,this.colors[c].g,this.colors[c].b);b.release(),this.mesh.render(a)}},a.prototype.addRef=function(){return k["default"](r,s,1),this.refCount++,this.refCount},a.prototype.release=function(){return k["default"](r,s,-1),this.refCount--,0===this.refCount&&this.destructor(this.levelUp),this.refCount},a.prototype.contextFree=function(){this.mesh=g["default"](this.mesh,void 0)},a.prototype.contextGain=function(){if(!this.mesh){var a={mode:d["default"].TRIANGLES,attributes:{aCoords:{values:p,size:3,type:f["default"].FLOAT},aFace:{values:q,size:1,type:f["default"].FLOAT}}},b=new i["default"](this.contextManager,a),c=new l["default"](m,n,[],this.contextManager);this.mesh=new j["default"](b,c,this.contextManager,{},0),b.release(),c.release()}},a.prototype.contextLost=function(){this.mesh=g["default"](this.mesh,void 0)},a}(),a("default",t)}}}),System.register("davinci-eight/visual/setDeprecatedOptions.js",["../checks/isDefined"],function(a,b){"use strict";function c(a,b){d["default"](b[f])&&(console.warn("options."+f+" is deprecated. Please use the X (position vector) property instead."),a.X.copyVector(b[f])),d["default"](b[e])&&(console.warn("options."+e+" is deprecated. Please use the R (attitude rotor) property instead."),a.R.copySpinor(b[e]))}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a}],execute:function(){e="attitude",f="position"}}}),System.register("davinci-eight/core/IndexBuffer.js",["./BufferObjects","../checks/mustBeUndefined","./ShareableContextConsumer"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(b,c,d,e){void 0===e&&(e=0);var f=a.call(this,b)||this;return f.data=c,f.usage=d,f.setLoggingName("IndexBuffer"),0===e&&f.synchUp(),f}return g(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("IndexBuffer"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),d["default"](this.getLoggingName(),this.webGLBuffer),a.prototype.destructor.call(this,b+1)},b.prototype.upload=function(){var a=this.gl;a&&this.webGLBuffer&&this.data&&a.bufferData(c["default"].ELEMENT_ARRAY_BUFFER,this.data,this.usage)},b.prototype.contextFree=function(){if(this.webGLBuffer){var b=this.gl;b?b.deleteBuffer(this.webGLBuffer):console.error(this.getLoggingName()+" must leak WebGLBuffer because WebGLRenderingContext is "+typeof b),this.webGLBuffer=void 0}a.prototype.contextFree.call(this)},b.prototype.contextGain=function(){a.prototype.contextGain.call(this);var b=this.gl;this.webGLBuffer||(this.webGLBuffer=b.createBuffer(),this.bind(),this.upload(),this.unbind())},b.prototype.contextLost=function(){this.webGLBuffer=void 0,a.prototype.contextLost.call(this)},b.prototype.bind=function(){var a=this.gl;a&&a.bindBuffer(c["default"].ELEMENT_ARRAY_BUFFER,this.webGLBuffer)},b.prototype.unbind=function(){var a=this.gl;a&&a.bindBuffer(c["default"].ELEMENT_ARRAY_BUFFER,null)},b}(e["default"]),a("default",f)}}}),System.register("davinci-eight/core/GeometryElements.js",["./DataType","./GeometryBase","./IndexBuffer","../checks/isArray","../checks/isNull","../checks/isUndefined","../checks/mustBeArray","../checks/mustBeNonNullObject","./vertexArraysFromPrimitive","./VertexBuffer","./Usage"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a}],execute:function(){n=function(a){function b(b,c,d,n){void 0===d&&(d={}),void 0===n&&(n=0);var o=a.call(this,b,n+1)||this;o.offset=0,o.setLoggingName("GeometryElements"),j["default"]("primitive",c);var p=k["default"](c,d.order);return o.mode=p.mode,o.count=p.indices.length,o.ibo=new e["default"](b,new Uint16Array(p.indices),m["default"].STATIC_DRAW),o.stride=p.stride,g["default"](p.pointers)||h["default"](p.pointers)?o.pointers=[]:f["default"](p.pointers)?o.pointers=p.pointers:i["default"]("data.pointers",p.pointers),o.vbo=new l["default"](b,new Float32Array(p.attributes),m["default"].STATIC_DRAW),0===n&&o.synchUp(),o}return o(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("GeometryElements"),this.ibo.addRef(),this.vbo.addRef(),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),this.ibo.release(),this.vbo.release(),a.prototype.destructor.call(this,b+1)},b.prototype.contextFree=function(){this.ibo.contextFree(),this.vbo.contextFree(),a.prototype.contextFree.call(this)},b.prototype.contextGain=function(){this.ibo.contextGain(),this.vbo.contextGain(),a.prototype.contextGain.call(this)},b.prototype.contextLost=function(){this.ibo.contextLost(),this.vbo.contextLost(),a.prototype.contextLost.call(this)},b.prototype.bind=function(a){this.vbo.bind();var b=this.pointers;if(b)for(var c=b.length,d=0;d<c;d++){var e=b[d],f=a.getAttrib(e.name);f&&(f.config(e.size,e.type,e.normalized,this.stride,e.offset),f.enable())}return this.ibo.bind(),this},b.prototype.unbind=function(a){this.ibo.unbind();var b=this.pointers;if(b)for(var c=b.length,d=0;d<c;d++){var e=b[d],f=a.getAttrib(e.name);f&&f.disable()}return this.vbo.unbind(),this},b.prototype.draw=function(){return this.gl&&this.count&&this.gl.drawElements(this.mode,this.count,c["default"].UNSIGNED_SHORT,this.offset),this},b}(d["default"]),a("GeometryElements",n),a("default",n)}}}),System.register("davinci-eight/geometries/PrimitivesBuilder.js",["../math/Spinor3","../math/Vector3"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(){this.stress=d["default"].vector(1,1,1),this.tilt=c["default"].one.clone(),this.offset=d["default"].zero(),this.transforms=[],this.useNormal=!0,this.usePosition=!0,this.useTextureCoord=!1}return a.prototype.applyTransforms=function(a,b,c,d,e){for(var f=this.transforms.length,g=0;g<f;g++)this.transforms[g].exec(a,b,c,d,e)},a.prototype.toPrimitives=function(){return console.warn("toPrimitives() must be implemented by derived classes."),[]},a}(),a("default",e)}}}),System.register("davinci-eight/collections/copyToArray.js",[],function(a,b){"use strict";function c(a,b,c){void 0===b&&(b=[]),void 0===c&&(c=0);for(var d=a.length,e=0;e<d;e++)b[c+e]=a[e];return b}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/geometries/dataFromVectorN.js",["../math/Geometric2","../math/Geometric3","../math/Vector2","../math/Vector3"],function(a,b){"use strict";function c(a){if(a instanceof e.Geometric3){var b=a;return[b.x,b.y,b.z]}if(a instanceof d.Geometric2){var c=a;return[c.x,c.y]}if(a instanceof g["default"]){var h=a;return[h.x,h.y,h.z]}if(a instanceof f.Vector2){var i=a;return[i.x,i.y]}return a.toArray()}b&&b.id;a("default",c);var d,e,f,g;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-eight/atoms/DrawAttribute.js",[],function(a,b){"use strict";function c(a){return Array.isArray(a)}function d(a){if(!c(a))throw new Error("values must be a number[]");return a}function e(a,b){return a%b===0}function f(a,b){if("number"!=typeof a)throw new Error("size must be a number");if(!e(b.length,a))throw new Error("values.length must be an exact multiple of size");return a}var g;b&&b.id;return{setters:[],execute:function(){g=function(){function a(a,b,c){this.values=d(a),this.size=f(b,a),this.type=c}return a}(),a("default",g)}}}),System.register("davinci-eight/atoms/DrawPrimitive.js",["../checks/mustBeArray","../checks/mustBeInteger","../checks/mustBeObject"],function(a,b){"use strict";var c,d,e,f,g;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){return"DrawPrimitive constructor"},g=function(){function a(a,b,g){this.attributes={},this.mode=d["default"]("mode",a,f),this.indices=c["default"]("indices",b,f),this.attributes=e["default"]("attributes",g,f)}return a}(),a("default",g)}}}),System.register("davinci-eight/geometries/computeUniqueVertices.js",[],function(a,b){"use strict";function c(a){function b(a){var b=a.toString();if(c[b]){var e=c[b];a.index=e.index}else a.index=d.length,d.push(a),c[b]=a}var c={},d=[];return a.forEach(function(a){a.vertices.forEach(function(a){b(a)})}),d}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/geometries/simplicesToPrimitive.js",["../collections/copyToArray","./dataFromVectorN","../core/DataType","../math/VectorN","../atoms/DrawAttribute","../core/BeginMode","../atoms/DrawPrimitive","./simplicesToGeometryMeta","./computeUniqueVertices","../checks/expectArg","./Simplex","./SimplexMode"],function(a,b){"use strict";function c(a,b){for(var c=[],d=0;d<a;d++)c.push(b);return c}function d(a,b){q["default"]("name",a).toBeString(),q["default"]("attribMap",b).toBeObject();var c=b[a];if(c){var d=c.name;return d?d:a}throw new Error("Unable to compute name; missing attribute specification for "+a)}function e(a,b){q["default"]("key",a).toBeString(),q["default"]("attribMap",b).toBeObject();var c=b[a];if(c){var d=c.size;return q["default"]("size",d).toBeNumber(),c.size}throw new Error("Unable to compute size; missing attribute specification for "+a)}function f(a,b){return a.concat(b)}function g(a,b){q["default"]("simplices",a).toBeObject();var g=o["default"](a);b?q["default"]("geometryMeta",b).toBeObject():b=g;for(var t=b.attributes,u=Object.keys(t),v=u.length,w=p["default"](a),x=w.length,y=a.map(r["default"].indices).reduce(f,[]),z=[],A=0;A<v;A++){var B=u[A],C=e(B,t),D=c(x*C,void 0);z.push({data:D,dimensions:C,name:d(B,t)})}for(var E=0;E<x;E++){var F=w[E],G=F.attributes;F.index!==E&&q["default"]("vertex.index",E).toSatisfy(!1,"vertex.index must equal loop index, i");for(var A=0;A<v;A++){var H=z[A],I=H.dimensions,J=G[u[A]];J||(J=new k["default"](c(I,0),(!1),I));var D=i["default"](J);h["default"](D,H.data,E*H.dimensions)}}for(var K={},A=0;A<v;A++){var H=z[A],D=H.data;K[H.name]=new l["default"](D,H.dimensions,j["default"].FLOAT)}switch(b.k){case s["default"].TRIANGLE:return new n["default"](m["default"].TRIANGLES,y,K);case s["default"].LINE:return new n["default"](m["default"].LINES,y,K);case s["default"].POINT:return new n["default"](m["default"].POINTS,y,K);case s["default"].EMPTY:return new n["default"](m["default"].POINTS,y,K);default:throw new Error("k => "+b.k)}}b&&b.id;a("default",g);var h,i,j,k,l,m,n,o,p,q,r,s;return{setters:[function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a}],execute:function(){}}}),System.register("davinci-eight/math/extE2.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e);break;case 1:j=+(a*f+b*e);break;case 2:j=+(a*g+c*e);break;case 3:j=+(a*h+b*g-c*f+d*e);break;default:throw new Error("index must be in the range [0..3]")}return+j}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/lcoE2.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e+b*f+c*g-d*h);break;case 1:j=+(a*f-c*h);break;case 2:j=+(a*g+b*h);break;case 3:j=+(a*h);break;default:throw new Error("index must be in the range [0..3]")}return+j}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/mulE2.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e+b*f+c*g-d*h);break;case 1:j=+(a*f+b*e-c*h+d*g);break;case 2:j=+(a*g+b*h+c*e-d*f);break;case 3:j=+(a*h+b*g-c*f+d*e);break;default:throw new Error("index must be in the range [0..3]")}return+j}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/rcoE2.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=0|i;var j=0;switch(~~i){case 0:j=+(a*e+b*f+c*g-d*h);break;case 1:j=+(-b*e-d*g);break;case 2:j=+(-c*e+d*f);break;case 3:j=+(d*e);break;default:throw new Error("index must be in the range [0..3]")}return+j}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/dotVectorE2.js",["../checks/isDefined"],function(a,b){"use strict";function c(a,b){return d["default"](a)&&d["default"](b)?a.x*b.x+a.y*b.y:void 0}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/math/dotVectorCartesianE2.js",[],function(a,b){"use strict";function c(a,b,c,d){return a*c+b*d}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/quadVectorE2.js",["../math/dotVectorCartesianE2","../checks/isDefined","../checks/isNumber"],function(a,b){"use strict";function c(a){if(e["default"](a)){var b=a.x,c=a.y;return f["default"](b)&&f["default"](c)?d["default"](b,c,b,c):void 0}}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/math/rotorFromDirectionsE2.js",["./dotVectorE2","./quadVectorE2"],function(a,b){"use strict";function c(a,b,c){var g=e["default"](a),h=f(g),i=e["default"](b),j=f(i),k=j*h,l=d["default"](b,a),m=f(2*(i*g+k*l));0!==m&&(c=c.versor(b,a),c=c.addScalar(k),c=c.divByScalar(m))}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a}],execute:function(){f=Math.sqrt}}}),System.register("davinci-eight/math/scpE2.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i){switch(i){case 0:return a*e+b*f+c*g-d*h;case 1:return 0;case 2:return 0;case 3:return 0;default:throw new Error("index must be in the range [0..3]")}}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/Geometric2.js",["../utils/applyMixins","./approx","./arraysEQ","../geometries/b2","../geometries/b3","./dotVectorE2","./extE2","./gauss","../checks/isDefined","../checks/isNumber","../checks/isObject","./lcoE2","../core/Lockable","./mulE2","../checks/mustBeEQ","../checks/mustBeInteger","../checks/mustBeNumber","../checks/mustBeObject","../i18n/notImplemented","../i18n/notSupported","./rcoE2","./rotorFromDirectionsE2","./scpE2","./stringFromCoordinates","./wedgeXY"],function(a,b){"use strict";function c(a){var b=X();return b[D]=a.a,b[E]=a.x,b[F]=a.y,b[G]=a.b,b}function d(a){if(o["default"](a)){var b=a;return n["default"](b.x)&&n["default"](b.y)?n["default"](b.a)&&n["default"](b.b)?(console.warn("Copying GeometricE2 to Geometric2"),_.copy(b)):(console.warn("Copying VectorE2 to Geometric2"),_.fromVector(b)):n["default"](b.a)&&n["default"](b.b)?(console.warn("Copying SpinorE2 to Geometric2"),_.fromSpinor(b)):void 0}}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_;b&&b.id;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a},function(a){x=a},function(a){y=a},function(a){z=a},function(a){A=a},function(a){B=a},function(a){C=a}],execute:function(){D=0,E=1,F=2,G=3,H=Math.abs,I=Math.atan2,J=Math.exp,K=Math.log,L=Math.cos,M=Math.sin,N=Math.sqrt,O="",P="",Q="",R="",S="",T="",U=["1",[O,P],[R,Q],[S,T]],V=["1",["W","E"],["S","N"],[S,T]],W=["1","e1","e2","I"],X=function(){return[0,0,0,0]},Y=function(a){var b=X();return b[D]=a,b},Z=function(a,b){var c=X();return c[E]=a,c[F]=b,c},$=function(a){var b=X();return b[G]=a,b},_=function(){function a(a,b){void 0===a&&(a=[0,0,0,0]),void 0===b&&(b=!1),s["default"]("coords.length",a.length,4),this.coords_=a,this.modified_=b}return Object.defineProperty(a.prototype,"length",{get:function(){return 4},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"modified",{get:function(){return this.modified_},set:function(a){if(this.isLocked())throw new q.TargetLockedError("set modified");this.modified_=a},enumerable:!0,configurable:!0}),a.prototype.getComponent=function(a){return this.coords_[a]},Object.defineProperty(a.prototype,"a",{get:function(){return this.coords_[D]},set:function(a){if(this.isLocked())throw new q.TargetLockedError("set a");var b=this.coords_;this.modified_=this.modified_||b[D]!==a,b[D]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"x",{get:function(){return this.coords_[E]},set:function(a){if(this.isLocked())throw new q.TargetLockedError("set x");var b=this.coords_;this.modified_=this.modified_||b[E]!==a,b[E]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.coords_[F]},set:function(a){if(this.isLocked())throw new q.TargetLockedError("set y");var b=this.coords_;this.modified_=this.modified_||b[F]!==a,b[F]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"b",{get:function(){return this.coords_[G]},set:function(a){if(this.isLocked())throw new q.TargetLockedError("set b");var b=this.coords_;this.modified_=this.modified_||b[G]!==a,b[G]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"xy",{get:function(){return this.coords_[G]},set:function(a){if(this.isLocked())throw new q.TargetLockedError("set xy");var b=this.coords_;this.modified_=this.modified_||b[G]!==a,b[G]=a},enumerable:!0,configurable:!0}),a.prototype.add=function(a,b){return void 0===b&&(b=1),v["default"]("M",a),u["default"]("",b),this.a+=a.a*b,this.x+=a.x*b,this.y+=a.y*b,this.b+=a.b*b,this},a.prototype.add2=function(a,b){return v["default"]("a",a),v["default"]("b",b),this.a=a.a+b.a,this.x=a.x+b.x,this.y=a.y+b.y,this.b=a.b+b.b,this},a.prototype.addPseudo=function(a){return u["default"]("",a),this.b+=a,this},a.prototype.addScalar=function(a){return u["default"]("",a),this.a+=a,this},a.prototype.addVector=function(a,b){return void 0===b&&(b=1),v["default"]("v",a),u["default"]("",b),this.x+=a.x*b,this.y+=a.y*b,this},a.prototype.arg=function(){return this.isLocked()?q.lock(this.clone().arg()):this.log().grade(2)},a.prototype.approx=function(a){return f["default"](this.coords_,a),this},a.prototype.clone=function(){var b=new a([0,0,0,0]);return b.copy(this),b},a.prototype.conj=function(){return this.b=-this.b,this},a.prototype.cos=function(){throw new Error(w["default"]("cos").message)},a.prototype.cosh=function(){throw new Error(w["default"]("cosh").message)},a.prototype.distanceTo=function(a){var b=this.a-a.a,c=this.x-a.x,d=this.y-a.y,e=this.b-a.b;return Math.sqrt(A["default"](b,c,d,e,b,c,d,e,0))},a.prototype.copy=function(a){return v["default"]("M",a),this.a=a.a,this.x=a.x,this.y=a.y,this.b=a.b,this},a.prototype.copyScalar=function(a){return this.zero().addScalar(a)},a.prototype.copySpinor=function(a){return v["default"]("spinor",a),this.a=a.a,this.x=0,this.y=0,this.b=a.b,this},a.prototype.copyVector=function(a){return v["default"]("vector",a),this.a=0,this.x=a.x,this.y=a.y,this.b=0,this},a.prototype.cubicBezier=function(a,b,c,d){var e=i["default"](a,this.a,b.a,c.a,d.a),f=i["default"](a,this.x,b.x,c.x,d.x),g=i["default"](a,this.y,b.y,c.y,d.y),h=i["default"](a,this.b,b.b,c.b,d.b);return this.a=e,this.x=f,this.y=g,this.b=h,this},a.prototype.normalize=function(){if(this.isLocked())throw new q.TargetLockedError("normalize");var a=this.magnitude();return this.a=this.a/a,this.x=this.x/a,this.y=this.y/a,this.b=this.b/a,this},a.prototype.div=function(a){return this.div2(this,a)},a.prototype.div2=function(a,b){var c=a.a,d=a.x,e=a.y,f=a.b;this.copy(b).inv();var g=this.a,h=this.x,i=this.y,j=this.b;return this.a=r["default"](c,d,e,f,g,h,i,j,0),this.x=r["default"](c,d,e,f,g,h,i,j,1),this.y=r["default"](c,d,e,f,g,h,i,j,2),this.b=r["default"](c,d,e,f,g,h,i,j,3),this},a.prototype.divByScalar=function(a){return u["default"]("",a),this.a/=a,this.x/=a,this.y/=a,this.b/=a,this},a.prototype.dual=function(a){var b=-a.b,c=+a.y,d=-a.x,e=+a.a;return this.a=b,this.x=c,this.y=d,this.b=e,this},a.prototype.equals=function(b){if(b instanceof a){var c=b;return g["default"](this.coords_,c.coords_)}return!1},a.prototype.exp=function(){var a=this.a,b=this.b,c=J(a),d=N(b*b),e=c*(0!==d?M(d)/d:1);return this.a=c*L(d),this.b=b*e,this},a.prototype.ext=function(a){return this.ext2(this,a)},a.prototype.ext2=function(a,b){var c=a.a,d=a.x,e=a.y,f=a.b,g=b.a,h=b.x,i=b.y,j=b.b;return this.a=k["default"](c,d,e,f,g,h,i,j,0),this.x=k["default"](c,d,e,f,g,h,i,j,1),this.y=k["default"](c,d,e,f,g,h,i,j,2),this.b=k["default"](c,d,e,f,g,h,i,j,3),this},a.prototype.inv=function(){var a=this.a,b=this.x,c=this.y,d=this.b,e=[[a,b,c,-d],[b,a,d,-c],[c,-d,a,b],[d,-c,b,a]],f=[1,0,0,0],g=l["default"](e,f);return this.a=g[0],this.x=g[1],this.y=g[2],this.b=g[3],this},a.prototype.isOne=function(){return 1===this.a&&0===this.x&&0===this.y&&0===this.b},a.prototype.isZero=function(){return 0===this.a&&0===this.x&&0===this.y&&0===this.b},a.prototype.lco=function(a){return this.lco2(this,a)},a.prototype.lco2=function(a,b){var c=a.a,d=a.x,e=a.y,f=a.b,g=b.a,h=b.x,i=b.y,j=b.b;return this.a=p["default"](c,d,e,f,g,h,i,j,0),this.x=p["default"](c,d,e,f,g,h,i,j,1),this.y=p["default"](c,d,e,f,g,h,i,j,2),this.b=p["default"](c,d,e,f,g,h,i,j,3),this},a.prototype.lerp=function(a,b){return v["default"]("target",a),u["default"]("",b),this.a+=(a.a-this.a)*b,this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.b+=(a.b-this.b)*b,this},a.prototype.lerp2=function(a,b,c){return v["default"]("a",a),v["default"]("b",b),u["default"]("",c),this.copy(a).lerp(b,c),this},a.prototype.log=function(){var a=this.a,b=this.b;return this.a=K(N(a*a+b*b)),this.x=0,this.y=0,this.b=I(b,a),this},a.prototype.magnitude=function(){return N(this.quaditude())},a.prototype.mul=function(a){return this.mul2(this,a)},a.prototype.mul2=function(a,b){var c=a.a,d=a.x,e=a.y,f=a.b,g=b.a,h=b.x,i=b.y,j=b.b;return this.a=r["default"](c,d,e,f,g,h,i,j,0),this.x=r["default"](c,d,e,f,g,h,i,j,1),this.y=r["default"](c,d,e,f,g,h,i,j,2),this.b=r["default"](c,d,e,f,g,h,i,j,3),this},a.prototype.neg=function(){return this.a=-this.a,this.x=-this.x,this.y=-this.y,this.b=-this.b,this},a.prototype.norm=function(){return this.a=this.magnitude(),this.x=0,this.y=0,this.b=0,this},a.prototype.one=function(){return this.a=1,this.x=0,this.y=0,this.b=0,this},a.prototype.pow=function(a){throw v["default"]("M",a),new Error(w["default"]("pow").message)},a.prototype.quad=function(){return this.a=this.quaditude(),this.x=0,this.y=0,this.b=0,this},a.prototype.quadraticBezier=function(a,b,c){var d=h["default"](a,this.a,b.a,c.a),e=h["default"](a,this.x,b.x,c.x),f=h["default"](a,this.y,b.y,c.y),g=h["default"](a,this.b,b.b,c.b);return this.a=d,this.x=e,this.y=f,this.b=g,this},a.prototype.rco=function(a){return this.rco2(this,a)},a.prototype.rco2=function(a,b){var c=a.a,d=a.x,e=a.y,f=a.b,g=b.a,h=b.x,i=b.y,j=b.b;return this.a=y["default"](c,d,e,f,g,h,i,j,0),this.x=y["default"](c,d,e,f,g,h,i,j,1),this.y=y["default"](c,d,e,f,g,h,i,j,2),this.b=y["default"](c,d,e,f,g,h,i,j,3),this},a.prototype.reflect=function(a){v["default"]("n",a);var b=a.x,c=a.y;u["default"]("n.x",b),u["default"]("n.y",c);var d=this.x,e=this.y,f=b*b-c*c,g=-2*b*c;return this.a=-this.a,this.x=g*e-f*d,this.y=g*d+f*e,this.b=+this.b,this},a.prototype.rev=function(){return this.a=this.a,this.x=this.x,this.y=this.y,this.b=-this.b,
this},a.prototype.sin=function(){throw new Error(w["default"]("sin").message)},a.prototype.sinh=function(){throw new Error(w["default"]("sinh").message)},a.prototype.rotate=function(a){v["default"]("R",a);var b=this.x,c=this.y,d=a.b,e=a.a,f=e*b+d*c,g=e*c-d*b;return this.x=f*e+g*d,this.y=g*e-f*d,this},a.prototype.rotorFromDirections=function(a,b){return z["default"](a,b,this),this},a.prototype.rotorFromVectorToVector=function(a,b){return z["default"](a,b,this),this},a.prototype.rotorFromGeneratorAngle=function(a,b){v["default"]("B",a),u["default"]("",b);var c=a.b,d=b/2;return this.a=L(H(c)*d),this.x=0,this.y=0,this.b=-M(c*d),this},a.prototype.scp=function(a){return this.scp2(this,a)},a.prototype.scp2=function(a,b){return this.a=A["default"](a.a,a.x,a.y,a.b,b.a,b.x,b.y,b.b,0),this.x=0,this.y=0,this.b=0,this},a.prototype.scale=function(a){return u["default"]("",a),this.a*=a,this.x*=a,this.y*=a,this.b*=a,this},a.prototype.stress=function(a){throw v["default"]("",a),new Error(x["default"]("stress").message)},a.prototype.versor=function(a,b){var c=a.x,d=a.y,e=b.x,f=b.y;return this.a=j["default"](a,b),this.x=0,this.y=0,this.b=C["default"](c,d,0,e,f,0),this},a.prototype.squaredNorm=function(){return this.a=this.magnitude(),this.x=0,this.y=0,this.b=0,this},a.prototype.quaditude=function(){var a=this.a,b=this.x,c=this.y,d=this.b;return a*a+b*b+c*c+d*d},a.prototype.sub=function(a,b){return void 0===b&&(b=1),v["default"]("M",a),u["default"]("",b),this.a-=a.a*b,this.x-=a.x*b,this.y-=a.y*b,this.b-=a.b*b,this},a.prototype.sub2=function(a,b){return v["default"]("a",a),v["default"]("b",b),this.a=a.a-b.a,this.x=a.x-b.x,this.y=a.y-b.y,this.b=a.b-b.b,this},a.prototype.toArray=function(){return c(this)},a.prototype.toExponential=function(b){var d=function(a){return a.toExponential(b)};return B["default"](c(this),d,a.BASIS_LABELS)},a.prototype.toFixed=function(b){var d=function(a){return a.toFixed(b)};return B["default"](c(this),d,a.BASIS_LABELS)},a.prototype.toPrecision=function(b){var d=function(a){return a.toPrecision(b)};return B["default"](c(this),d,a.BASIS_LABELS)},a.prototype.toString=function(b){var d=function(a){return a.toString(b)};return B["default"](c(this),d,a.BASIS_LABELS)},a.prototype.grade=function(a){if(this.isLocked())return q.lock(this.clone().grade(a));switch(t["default"]("i",a),a){case 0:this.x=0,this.y=0,this.b=0;break;case 1:this.a=0,this.b=0;break;case 2:this.a=0,this.x=0,this.y=0;break;default:this.a=0,this.x=0,this.y=0,this.b=0}return this},a.prototype.zero=function(){return this.a=0,this.x=0,this.y=0,this.b=0,this},a.prototype.__add__=function(b){if(b instanceof a)return q.lock(a.copy(this).add(b));if("number"==typeof b)return q.lock(a.scalar(b).add(this));var c=d(b);return c?q.lock(c.add(this)):void 0},a.prototype.__div__=function(b){return b instanceof a?q.lock(a.copy(this).div(b)):"number"==typeof b?q.lock(a.copy(this).divByScalar(b)):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?q.lock(a.copy(b).div(this)):"number"==typeof b?q.lock(a.scalar(b).div(this)):void 0},a.prototype.__mul__=function(b){if(b instanceof a)return q.lock(a.copy(this).mul(b));if("number"==typeof b)return q.lock(a.copy(this).scale(b));var c=d(b);return c?this.__mul__(c):void 0},a.prototype.__rmul__=function(b){if(b instanceof a)return q.lock(a.copy(b).mul(this));if("number"==typeof b)return q.lock(a.copy(this).scale(b));var c=d(b);return c?q.lock(c.mul(this)):void 0},a.prototype.__radd__=function(b){if(b instanceof a)return q.lock(a.copy(b).add(this));if("number"==typeof b)return q.lock(a.scalar(b).add(this));var c=d(b);return c?q.lock(c.add(this)):void 0},a.prototype.__sub__=function(b){return b instanceof a?q.lock(a.copy(this).sub(b)):"number"==typeof b?q.lock(a.scalar(-b).add(this)):void 0},a.prototype.__rsub__=function(b){return b instanceof a?q.lock(a.copy(b).sub(this)):"number"==typeof b?q.lock(a.scalar(b).sub(this)):void 0},a.prototype.__wedge__=function(b){return b instanceof a?q.lock(a.copy(this).ext(b)):"number"==typeof b?q.lock(a.copy(this).scale(b)):void 0},a.prototype.__rwedge__=function(b){return b instanceof a?q.lock(a.copy(b).ext(this)):"number"==typeof b?q.lock(a.copy(this).scale(b)):void 0},a.prototype.__lshift__=function(b){return b instanceof a?q.lock(a.copy(this).lco(b)):"number"==typeof b?q.lock(a.copy(this).lco(a.scalar(b))):void 0},a.prototype.__rlshift__=function(b){return b instanceof a?q.lock(a.copy(b).lco(this)):"number"==typeof b?q.lock(a.scalar(b).lco(this)):void 0},a.prototype.__rshift__=function(b){return b instanceof a?q.lock(a.copy(this).rco(b)):"number"==typeof b?q.lock(a.copy(this).rco(a.scalar(b))):void 0},a.prototype.__rrshift__=function(b){return b instanceof a?q.lock(a.copy(b).rco(this)):"number"==typeof b?q.lock(a.scalar(b).rco(this)):void 0},a.prototype.__vbar__=function(b){return b instanceof a?q.lock(a.copy(this).scp(b)):"number"==typeof b?q.lock(a.copy(this).scp(a.scalar(b))):void 0},a.prototype.__rvbar__=function(b){return b instanceof a?q.lock(a.copy(b).scp(this)):"number"==typeof b?q.lock(a.scalar(b).scp(this)):void 0},a.prototype.__bang__=function(){return q.lock(a.copy(this).inv())},a.prototype.__tilde__=function(){return q.lock(a.copy(this).rev())},a.prototype.__pos__=function(){return q.lock(a.copy(this))},a.prototype.__neg__=function(){return q.lock(a.copy(this).neg())},a.copy=function(b){return new a([b.a,b.x,b.y,b.b])},a.e1=function(b){return void 0===b&&(b=!1),b?a.E1:a.vector(1,0)},a.e2=function(b){return void 0===b&&(b=!1),b?a.E2:a.vector(0,1)},a.fromCartesian=function(b,c,d,e){return new a([b,c,d,e])},a.fromBivector=function(b){return a.fromCartesian(0,0,0,b.b)},a.fromSpinor=function(b){return new a([b.a,0,0,b.b])},a.fromVector=function(b){return m["default"](b)?new a([0,b.x,b.y,0]):void 0},a.I=function(b){return void 0===b&&(b=!1),b?a.PSEUDO:a.pseudo(1)},a.lerp=function(b,c,d){return a.copy(b).lerp(c,d)},a.one=function(b){return void 0===b&&(b=!1),b?a.ONE:a.scalar(1)},a.rotorFromDirections=function(b,c){return(new a).rotorFromDirections(b,c)},a.pseudo=function(b){return a.fromCartesian(0,0,0,b)},a.scalar=function(b){return a.fromCartesian(b,0,0,0)},a.vector=function(b,c){return a.fromCartesian(0,b,c,0)},a.zero=function(b){return void 0===b&&(b=!1),b?a.ZERO:new a(X())},a}(),_.BASIS_LABELS=W,_.BASIS_LABELS_COMPASS=V,_.BASIS_LABELS_GEOMETRIC=U,_.BASIS_LABELS_STANDARD=W,_.E1=new _(Z(1,0)),_.E2=new _(Z(0,1)),_.PSEUDO=new _($(1)),_.ONE=new _(Y(1)),_.ZERO=new _(Y(0)),a("Geometric2",_),e["default"](_,[q.LockableMixin]),_.E1.lock(),_.E2.lock(),_.ONE.lock(),_.PSEUDO.lock(),_.ZERO.lock(),a("default",_)}}}),System.register("davinci-eight/geometries/dataLength.js",["../math/Geometric2","../math/Geometric3","../math/Vector2","../math/Vector3"],function(a,b){"use strict";function c(a){if(a instanceof e["default"]){if(8!==a.length)throw new Error("source.length ("+a.length+") is expected to be 8");return 3}if(a instanceof d["default"]){if(4!==a.length)throw new Error("source.length ("+a.length+") is expected to be 4");return 2}if(a instanceof g["default"]){if(3!==a.length)throw new Error("source.length ("+a.length+") is expected to be 3");return 3}if(a instanceof f.Vector2){if(2!==a.length)throw new Error("source.length ("+a.length+") is expected to be 2");return 2}if(1===a.length)return 1;if(2===a.length)return 2;if(3===a.length)return 3;if(4===a.length)return 4;throw new Error("dataLength(source: VectorN<number>): AttributeSizeType, source.length => "+a.length)}b&&b.id;a("default",c);var d,e,f,g;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-eight/geometries/simplicesToGeometryMeta.js",["./dataLength","../checks/expectArg","../checks/isDefined","./Simplex"],function(a,b){"use strict";function c(a,b){var c=[];return JSON.stringify(a,function(a,b){if("object"==typeof b&&null!==b){if(c.indexOf(b)!==-1)return;c.push(b)}return b},b)}function d(a){for(var b=void 0,d={},i=a.length,j=0;j<i;j++){var k=a[j];k instanceof h["default"]||f["default"]("simplex",k).toSatisfy(!1,"Every element must be a Simplex @ simplicesToGeometryMeta(). Found "+c(k,2));var l=k.vertices;b=k.k;for(var m=0,n=l.length;m<n;m++)for(var o=l[m],p=o.attributes,q=Object.keys(p),r=q.length,s=0;s<r;s++){var t=q[s],u=p[t],v=e["default"](u),w=d[t];if(w){if(w.size!==v)throw new Error("Something is rotten in Denmark!")}else d[t]={size:v}}}if(g["default"](b)){var x={get attributes(){return d},get k(){return b}};return x}}b&&b.id;a("default",d);var e,f,g,h;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){}}}),System.register("davinci-eight/math/Vector1.js",["../math/Coords"],function(a,b){"use strict";var c,d,e,f,g,h,i=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=Math.exp,e=Math.log,f=Math.sqrt,g=0,h=function(a){function b(b,c){return void 0===b&&(b=[0]),void 0===c&&(c=!1),a.call(this,b,c,1)||this}return i(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this.coords[g]},set:function(a){this.modified=this.modified||this.x!==a,this.coords[g]=a},enumerable:!0,configurable:!0}),b.prototype.set=function(a){return this.x=a,this},b.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this},b.prototype.add2=function(a,b){return this.x=a.x+b.x,this},b.prototype.scp=function(a){return this},b.prototype.applyMatrix=function(a){var b=this.x,c=a.elements;return this.x=c[0]*b,this},b.prototype.approx=function(b){return a.prototype.approx.call(this,b),this},b.prototype.conj=function(){return this},b.prototype.copy=function(a){return this.x=a.x,this},b.prototype.det=function(){return this.x},b.prototype.dual=function(){return this},b.prototype.exp=function(){return this.x=d(this.x),this},b.prototype.one=function(){return this.x=1,this},b.prototype.inv=function(){return this.x=1/this.x,this},b.prototype.lco=function(a){return this},b.prototype.log=function(){return this.x=e(this.x),this},b.prototype.mul=function(a){return this.x*=a.x,this},b.prototype.norm=function(){return this},b.prototype.div=function(a){return this.x/=a.x,this},b.prototype.divByScalar=function(a){return this.x/=a,this},b.prototype.min=function(a){return this.x>a.x&&(this.x=a.x),this},b.prototype.max=function(a){return this.x<a.x&&(this.x=a.x),this},b.prototype.floor=function(){return this.x=Math.floor(this.x),this},b.prototype.ceil=function(){return this.x=Math.ceil(this.x),this},b.prototype.rev=function(){return this},b.prototype.rco=function(a){return this},b.prototype.round=function(){return this.x=Math.round(this.x),this},b.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this},b.prototype.scale=function(a){return this.x*=a,this},b.prototype.stress=function(a){return this.x*=a.x,this},b.prototype.sub=function(a){return this.x-=a.x,this},b.prototype.subScalar=function(a){return this.x-=a,this},b.prototype.sub2=function(a,b){return this.x=a.x-b.x,this},b.prototype.neg=function(){return this.x=-this.x,this},b.prototype.distanceTo=function(a){return f(this.quadranceTo(a))},b.prototype.dot=function(a){return this.x*a.x},b.prototype.magnitude=function(){return f(this.squaredNorm())},b.prototype.normalize=function(){return this.divByScalar(this.magnitude())},b.prototype.mul2=function(a,b){return this},b.prototype.quad=function(){var a=this.x;return this.x=a*a,this},b.prototype.squaredNorm=function(){return this.x*this.x},b.prototype.quadranceTo=function(a){var b=this.x-a.x;return b*b},b.prototype.reflect=function(a){return this},b.prototype.reflection=function(a){return this},b.prototype.rotate=function(a){return this},b.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this},b.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},b.prototype.equals=function(a){return a.x===this.x},b.prototype.fromArray=function(a,b){return void 0===b&&(b=0),this.x=a[b],this},b.prototype.toArray=function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.x,a},b.prototype.toExponential=function(a){return"TODO: Vector1.toExponential"},b.prototype.toFixed=function(a){return"TODO: Vector1.toFixed"},b.prototype.toPrecision=function(a){return"TODO: Vector1.toPrecision"},b.prototype.toString=function(a){return"TODO: Vector1.toString"},b.prototype.translation=function(a){return this.one()},b.prototype.fromAttribute=function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this},b.prototype.clone=function(){return new b([this.x])},b.prototype.ext=function(a){return this},b.prototype.zero=function(){return this.x=0,this},b.random=function(){return new b([Math.random()])},b.zero=function(){return new b([0])},b}(c.Coords),a("default",h)}}}),System.register("davinci-eight/geometries/SimplexPrimitivesBuilder.js",["../checks/mustBeBoolean","../checks/mustBeInteger","../geometries/PrimitivesBuilder","../geometries/Simplex","../geometries/SimplexMode","../core/GraphicsProgramSymbols","../geometries/simplicesToPrimitive","../geometries/simplicesToGeometryMeta","../math/Vector1","../math/Vector3"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m=function(a){function b(){var b=a.call(this)||this;return b.data=[],b._k=new k["default"]([g["default"].TRIANGLE]),b.curvedSegments=16,b.flatSegments=1,b.orientationColors=!1,b._k.modified=!0,b}return n(b,a),Object.defineProperty(b.prototype,"k",{get:function(){return this._k.x},set:function(a){this._k.x=d["default"]("k",a)},enumerable:!0,configurable:!0}),b.prototype.regenerate=function(){throw new Error("`protected regenerate(): void` method should be implemented in derived class.")},b.prototype.isModified=function(){return this._k.modified},b.prototype.setModified=function(a){return c["default"]("modified",a),this._k.modified=a,this},b.prototype.boundary=function(a){return this.regenerate(),this.data=f["default"].boundary(this.data,a),this.check()},b.prototype.check=function(){return this.meta=j["default"](this.data),this},b.prototype.subdivide=function(a){return this.regenerate(),this.data=f["default"].subdivide(this.data,a),this.check(),this},b.prototype.toPrimitives=function(){return this.regenerate(),this.check(),[i["default"](this.data,this.meta)]},b.prototype.mergeVertices=function(){},b.prototype.triangle=function(a,b,c){var d=new f["default"](g["default"].TRIANGLE);return d.vertices[0].attributes[h["default"].ATTRIBUTE_POSITION]=a[0],d.vertices[1].attributes[h["default"].ATTRIBUTE_POSITION]=a[1],d.vertices[2].attributes[h["default"].ATTRIBUTE_POSITION]=a[2],d.vertices[0].attributes[h["default"].ATTRIBUTE_NORMAL]=b[0],d.vertices[1].attributes[h["default"].ATTRIBUTE_NORMAL]=b[1],d.vertices[2].attributes[h["default"].ATTRIBUTE_NORMAL]=b[2],d.vertices[0].attributes[h["default"].ATTRIBUTE_COORDS]=c[0],d.vertices[1].attributes[h["default"].ATTRIBUTE_COORDS]=c[1],d.vertices[2].attributes[h["default"].ATTRIBUTE_COORDS]=c[2],this.orientationColors&&(d.vertices[0].attributes[h["default"].ATTRIBUTE_COLOR]=l["default"].vector(1,0,0),d.vertices[1].attributes[h["default"].ATTRIBUTE_COLOR]=l["default"].vector(0,1,0),d.vertices[2].attributes[h["default"].ATTRIBUTE_COLOR]=l["default"].vector(0,0,1)),this.data.push(d)},b.prototype.lineSegment=function(a,b,c){var d=new f["default"](g["default"].LINE);return d.vertices[0].attributes[h["default"].ATTRIBUTE_POSITION]=a[0],d.vertices[1].attributes[h["default"].ATTRIBUTE_POSITION]=a[1],d.vertices[0].attributes[h["default"].ATTRIBUTE_NORMAL]=b[0],d.vertices[1].attributes[h["default"].ATTRIBUTE_NORMAL]=b[1],d.vertices[0].attributes[h["default"].ATTRIBUTE_COORDS]=c[0],d.vertices[1].attributes[h["default"].ATTRIBUTE_COORDS]=c[1],this.orientationColors&&(d.vertices[0].attributes[h["default"].ATTRIBUTE_COLOR]=l["default"].vector(1,0,0),d.vertices[1].attributes[h["default"].ATTRIBUTE_COLOR]=l["default"].vector(0,1,0)),this.data.push(d)},b.prototype.point=function(a,b,c){var d=new f["default"](g["default"].POINT);return d.vertices[0].attributes[h["default"].ATTRIBUTE_POSITION]=a[0],d.vertices[0].attributes[h["default"].ATTRIBUTE_NORMAL]=b[0],d.vertices[0].attributes[h["default"].ATTRIBUTE_COORDS]=c[0],this.orientationColors&&(d.vertices[0].attributes[h["default"].ATTRIBUTE_COLOR]=l["default"].vector(1,0,0)),this.data.push(d)},b}(e["default"]),a("default",m)}}}),System.register("davinci-eight/atoms/Vertex.js",["../math/Coords","../checks/mustBeGE","../checks/mustBeInteger"],function(a,b){"use strict";function c(a,b){return b?a+b.toString():a}function d(a){var b=a.attributes,d=Object.keys(b).map(function(a){var d=b[a];return c(a,d)}).join(" ");return d}var e,f,g,h;b&&b.id;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(){function a(a){this.attributes={},g["default"]("numCoordinates",a),f["default"]("numCoordinates",a,0);for(var b=[],c=0;c<a;c++)b.push(0);this.coords=new e.Coords(b,(!1),a)}return a.prototype.toString=function(){return d(this)},a}(),a("default",h)}}}),System.register("davinci-eight/geometries/Simplex.js",["../checks/mustBeEQ","../checks/mustBeGE","../checks/mustBeLE","../checks/mustBeInteger","./SimplexMode","../atoms/Vertex","../math/VectorN"],function(a,b){"use strict";function c(a,b,c,d){return l["default"](a,b),j["default"](a,b,c),k["default"](a,b,d),b}function d(a){return c("count",a,0,7)}function e(a,b){return a.concat(b)}function f(a,b,c,d){void 0===d&&(d=[]),i["default"]("a.length",a.length,b.length);var e,f=a.length,g=1-c;for(e=0;e<f;e++)d.push(g*a[e]+c*b[e]);return d}function g(a,b,c){for(var d={},e=Object.keys(a),f=e.length,g=0;g<f;g++){var i=e[g];d[i]=h(a[i],b[i],c)}return d}function h(a,b,c){return new o["default"](f(a.toArray(),b.toArray(),c))}var i,j,k,l,m,n,o,p;b&&b.id;return{setters:[function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a}],execute:function(){p=function(){function a(a){this.vertices=[],l["default"]("k",a);for(var b=a+1,c=0,d=0;d<b;d++)this.vertices.push(new n["default"](c))}return Object.defineProperty(a.prototype,"k",{get:function(){return this.vertices.length-1},enumerable:!0,configurable:!0}),a.indices=function(a){return a.vertices.map(function(a){return a.index})},a.boundaryMap=function(b){var c=b.vertices,d=b.k;if(d===m["default"].TRIANGLE){var e=new a(d-1);e.vertices[0].attributes=c[0].attributes,e.vertices[1].attributes=c[1].attributes;var f=new a(d-1);f.vertices[0].attributes=c[1].attributes,f.vertices[1].attributes=c[2].attributes;var g=new a(d-1);return g.vertices[0].attributes=c[2].attributes,g.vertices[1].attributes=c[0].attributes,[e,f,g]}if(d===m["default"].LINE){var h=new a(d-1);h.vertices[0].attributes=b.vertices[0].attributes;var i=new a(d-1);return i.vertices[0].attributes=b.vertices[1].attributes,[h,i]}if(d===m["default"].POINT)return[new a(d-1)];if(d===m["default"].EMPTY)return[];throw new Error("Unexpected k-simplex, k = "+b.k+" @ Simplex.boundaryMap()")},a.subdivideMap=function(b){var c=[],d=b.vertices,e=b.k;if(e===m["default"].TRIANGLE){var f=d[0].attributes,h=d[1].attributes,i=d[2].attributes,j=g(f,h,.5),k=g(h,i,.5),l=g(i,f,.5),n=new a(e);n.vertices[0].attributes=i,n.vertices[1].attributes=l,n.vertices[2].attributes=k;var o=new a(e);o.vertices[0].attributes=f,o.vertices[1].attributes=j,o.vertices[2].attributes=l;var p=new a(e);p.vertices[0].attributes=h,p.vertices[1].attributes=k,p.vertices[2].attributes=j;var q=new a(e);q.vertices[0].attributes=j,q.vertices[1].attributes=k,q.vertices[2].attributes=l,c.push(n),c.push(o),c.push(p),c.push(q)}else if(e===m["default"].LINE){var f=d[0].attributes,h=d[1].attributes,r=g(f,h,.5),s=new a(e);s.vertices[0].attributes=f,s.vertices[1].attributes=r;var t=new a(e);t.vertices[0].attributes=r,t.vertices[1].attributes=h,c.push(s),c.push(t)}else if(e===m["default"].POINT)c.push(b);else if(e!==m["default"].EMPTY)throw new Error(e+"-simplex is not supported");return c},a.boundary=function(b,c){void 0===c&&(c=1),d(c);for(var f=0;f<c;f++)b=b.map(a.boundaryMap).reduce(e,[]);return b},a.subdivide=function(b,c){void 0===c&&(c=1),d(c);for(var f=0;f<c;f++)b=b.map(a.subdivideMap).reduce(e,[]);return b},a.setAttributeValues=function(a,b){for(var c=Object.keys(a),d=c.length,e=0;e<d;e++)for(var f=c[e],g=a[f],h=g.length,i=0;i<h;i++)b.vertices[i].attributes[f]=g[i]},a}(),a("default",p)}}}),System.register("davinci-eight/geometries/b2.js",[],function(a,b){"use strict";function c(a,b){var c=1-a;return c*c*b}function d(a,b){return 2*(1-a)*a*b}function e(a,b){return a*a*b}function f(a,b,f,g){return c(a,b)+d(a,f)+e(a,g)}b&&b.id;return a("default",f),{setters:[],execute:function(){}}}),System.register("davinci-eight/geometries/b3.js",[],function(a,b){"use strict";function c(a,b){var c=1-a;return c*c*c*b}function d(a,b){var c=1-a;return 3*c*c*a*b}function e(a,b){var c=1-a;return 3*c*a*a*b}function f(a,b){return a*a*a*b}function g(a,b,g,h,i){return c(a,b)+d(a,g)+e(a,h)+f(a,i)}b&&b.id;return a("default",g),{setters:[],execute:function(){}}}),System.register("davinci-eight/i18n/notImplemented.js",["../checks/mustBeString"],function(a,b){"use strict";function c(a){d["default"]("name",a);var b={get message(){return"'"+a+"' method is not yet implemented."}};return b}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/math/Vector2.js",["../utils/applyMixins","./approx","../geometries/b2","../geometries/b3","../core/Lockable","../i18n/notImplemented","./randomRange","../math/stringFromCoordinates"],function(a,b){"use strict";function c(a){return[a.x,a.y]}var d,e,f,g,h,i,j,k,l,m,n,o;b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=Math.sqrt,m=0,n=1,o=function(){function a(a,b){void 0===a&&(a=[0,0]),void 0===b&&(b=!1),this.coords_=a,this.modified_=b}return Object.defineProperty(a.prototype,"length",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"modified",{get:function(){return this.modified_},set:function(a){if(this.isLocked())throw new h.TargetLockedError("set modified");this.modified_=a},enumerable:!0,configurable:!0}),a.prototype.getComponent=function(a){return this.coords_[a]},Object.defineProperty(a.prototype,"x",{get:function(){return this.coords_[m]},set:function(a){if(this.isLocked())throw new h.TargetLockedError("set x");var b=this.coords_;this.modified_=this.modified_||b[m]!==a,b[m]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.coords_[n]},set:function(a){if(this.isLocked())throw new h.TargetLockedError("set y");var b=this.coords_;this.modified_=this.modified_||b[n]!==a,b[n]=a},enumerable:!0,configurable:!0}),a.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this.y+=a.y*b,this},a.prototype.add2=function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this},a.prototype.applyMatrix=function(a){var b=this.x,c=this.y,d=a.elements;return this.x=d[0]*b+d[2]*c,this.y=d[1]*b+d[3]*c,this},a.prototype.approx=function(a){return e["default"](this.coords_,a),this},a.prototype.clone=function(){return new a([this.x,this.y])},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},a.prototype.cubicBezier=function(a,b,c,d){var e=g["default"](a,this.x,b.x,c.x,d.x),f=g["default"](a,this.y,b.y,c.y,d.y);return this.x=e,this.y=f,this},a.prototype.distanceTo=function(a){return l(this.quadranceTo(a))},a.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},a.prototype.sub2=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this},a.prototype.scale=function(a){return this.x*=a,this.y*=a,this},a.prototype.divByScalar=function(a){return this.x/=a,this.y/=a,this},a.prototype.min=function(a){return this.x>a.x&&(this.x=a.x),this.y>a.y&&(this.y=a.y),this},a.prototype.max=function(a){return this.x<a.x&&(this.x=a.x),this.y<a.y&&(this.y=a.y),this},a.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},a.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},a.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},a.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},a.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y},a.prototype.magnitude=function(){return l(this.squaredNorm())},a.prototype.normalize=function(){return this.divByScalar(this.magnitude())},a.prototype.squaredNorm=function(){return this.x*this.x+this.y*this.y},a.prototype.quadranceTo=function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c},a.prototype.quadraticBezier=function(a,b,c){var d=f["default"](a,this.x,b.x,c.x),e=f["default"](a,this.y,b.y,c.y);return this.x=d,this.y=e,this},a.prototype.reflect=function(a){throw new Error(i["default"]("reflect").message)},a.prototype.rotate=function(a){var b=this.x,c=this.y,d=a.a,e=a.b,f=d*d-e*e,g=2*d*e;return this.x=f*b+g*c,this.y=f*c-g*b,this},a.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this},a.prototype.lerp2=function(a,b,c){return this.copy(a).lerp(b,c),this},a.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},a.prototype.stress=function(a){return this.x*=a.x,this.y*=a.y,this},a.prototype.toArray=function(){return c(this)},a.prototype.toExponential=function(a){var b=function(b){return b.toExponential(a)};return k["default"](this.coords_,b,["e1","e2"])},a.prototype.toFixed=function(a){var b=function(b){return b.toFixed(a)};return k["default"](this.coords_,b,["e1","e2"])},a.prototype.toPrecision=function(a){var b=function(b){return b.toPrecision(a)};return k["default"](this.coords_,b,["e1","e2"])},a.prototype.toString=function(a){var b=function(b){return b.toString(a)};return k["default"](this.coords_,b,["e1","e2"])},a.prototype.fromArray=function(a,b){return void 0===b&&(b=0),this.x=a[b],this.y=a[b+1],this},a.prototype.fromAttribute=function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this.y=a.array[b+1],this},a.prototype.zero=function(){return this.x=0,this.y=0,this},a.prototype.__neg__=function(){return h.lock(this.clone().neg())},a.copy=function(b){return a.vector(b.x,b.y)},a.lerp=function(b,c,d){return a.copy(c).sub(b).scale(d).add(b)},a.random=function(){var b=j["default"](-1,1),c=j["default"](-1,1);return a.vector(b,c).normalize()},a.vector=function(b,c){return new a([b,c])},a}(),o.zero=o.vector(0,0),a("Vector2",o),d["default"](o,[h.LockableMixin]),o.zero.lock(),a("default",o)}}}),System.register("davinci-eight/geometries/PolyhedronBuilder.js",["../geometries/SimplexPrimitivesBuilder","../geometries/Simplex","../geometries/SimplexMode","../core/GraphicsProgramSymbols","../math/Vector2","../math/Vector3"],function(a,b){"use strict";function c(a){return Math.atan2(a.z,-a.x)}function d(a){return Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))}function e(a,b){var e=m["default"].copy(a).normalize();b.push(e);var f=c(a)/2/Math.PI+.5,g=d(a)/Math.PI+.5,h=e;return h.uv=new l.Vector2([f,1-g]),e}function f(a,b,c){return c<0&&1===a.x&&(a=new l.Vector2([a.x-1,a.y])),0===b.x&&0===b.z&&(a=new l.Vector2([c/2/Math.PI+.5,a.y])),a.clone()}function g(a,b,c){return n.copy(b).sub(a),o.copy(c).sub(b),m["default"].copy(n).cross(o).normalize()}var h,i,j,k,l,m,n,o,p,q=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a}],execute:function(){n=m["default"].zero(),o=m["default"].zero(),p=function(a){function b(b,d,h,l){function n(a,b,c){var d=(a.x+b.x+c.x)/3,e=(a.y+b.y+c.y)/3,f=(a.z+b.z+c.z)/3;return{x:d,y:e,z:f}}function o(a,b,d,e){var h=c(n(a,b,d)),l=a,o=b,p=d,q=f(l.uv,a,h),r=f(o.uv,b,h),s=f(p.uv,d,h),t=g(a,b,d),u=new i["default"](j["default"].TRIANGLE);u.vertices[0].attributes[k["default"].ATTRIBUTE_POSITION]=m["default"].copy(a),u.vertices[0].attributes[k["default"].ATTRIBUTE_NORMAL]=m["default"].copy(t),u.vertices[0].attributes[k["default"].ATTRIBUTE_COORDS]=q,u.vertices[1].attributes[k["default"].ATTRIBUTE_POSITION]=m["default"].copy(b),u.vertices[1].attributes[k["default"].ATTRIBUTE_NORMAL]=m["default"].copy(t),u.vertices[1].attributes[k["default"].ATTRIBUTE_COORDS]=r,u.vertices[2].attributes[k["default"].ATTRIBUTE_POSITION]=m["default"].copy(d),u.vertices[2].attributes[k["default"].ATTRIBUTE_NORMAL]=m["default"].copy(t),u.vertices[2].attributes[k["default"].ATTRIBUTE_COORDS]=s,e.data.push(u)}function p(a,b,c,d){for(var f=Math.pow(2,b),g=e(a.vertices[0].attributes[k["default"].ATTRIBUTE_POSITION],c),h=e(a.vertices[1].attributes[k["default"].ATTRIBUTE_POSITION],c),i=e(a.vertices[2].attributes[k["default"].ATTRIBUTE_POSITION],c),j=[],l=0;l<=f;l++){j[l]=[];for(var n=e(m["default"].copy(g).lerp(i,l/f),c),p=e(m["default"].copy(h).lerp(i,l/f),c),q=f-l,r=0;r<=q;r++)0===r&&l===f?j[l][r]=n:j[l][r]=e(m["default"].copy(n).lerp(p,r/q),c)}for(var l=0;l<f;l++)for(var r=0;r<2*(f-l)-1;r++){var s=Math.floor(r/2);r%2===0?o(j[l][s+1],j[l+1][s],j[l][s],d):o(j[l][s+1],j[l+1][s+1],j[l+1][s],d)}}void 0===h&&(h=1),void 0===l&&(l=0);for(var q=a.call(this)||this,r=[],s=0,t=b.length;s<t;s+=3)e(new m["default"]([b[s],b[s+1],b[s+2]]),r);for(var u=[],s=0,v=0,t=d.length;s<t;s+=3,v++){var w=r[d[s]],x=r[d[s+1]],y=r[d[s+2]],z=g(w,x,y),A=new i["default"](j["default"].TRIANGLE);A.vertices[0].attributes[k["default"].ATTRIBUTE_POSITION]=w,A.vertices[0].attributes[k["default"].ATTRIBUTE_NORMAL]=m["default"].copy(z),A.vertices[1].attributes[k["default"].ATTRIBUTE_POSITION]=x,A.vertices[1].attributes[k["default"].ATTRIBUTE_NORMAL]=m["default"].copy(z),A.vertices[2].attributes[k["default"].ATTRIBUTE_POSITION]=y,A.vertices[2].attributes[k["default"].ATTRIBUTE_NORMAL]=m["default"].copy(z),u[v]=A}for(var s=0,B=u.length;s<B;s++)p(u[s],l,r,q);for(var s=0,C=r.length;s<C;s++)r[s].scale(h);return q.mergeVertices(),q}return q(b,a),b.prototype.regenerate=function(){},b}(h["default"]),a("default",p)}}}),System.register("davinci-eight/geometries/tetrahedronPrimitive.js",["../checks/isDefined","../checks/mustBeNumber","../geometries/PolyhedronBuilder"],function(a,b){"use strict";function c(a){void 0===a&&(a={kind:"TetrahedronGeometry"});var b=d["default"](a.radius)?e["default"]("radius",a.radius):1,c=new f["default"](g,h,b),i=c.toPrimitives();if(1===i.length)return i[0];throw new Error("Expecting PolyhedronBuilder to return one Primitive.")}b&&b.id;a("default",c);var d,e,f,g,h;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],h=[2,1,0,0,3,2,1,3,0,2,3,1]}}}),System.register("davinci-eight/geometries/TetrahedronGeometry.js",["../core/GeometryElements","./tetrahedronPrimitive"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){
var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b,c,e){void 0===c&&(c={kind:"TetrahedronGeometry"}),void 0===e&&(e=0);var f=a.call(this,b,d["default"](c),c,e+1)||this;return f.setLoggingName("TetrahedronGeometry"),0===e&&f.synchUp(),f}return f(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("TetrahedronGeometry"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(c["default"]),a("default",e)}}}),System.register("davinci-eight/visual/spinorE3Object.js",[],function(a,b){"use strict";function c(a){return a?{a:a.a,xy:a.xy,yz:a.yz,zx:a.zx}:void 0}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/visual/vectorE3Object.js",[],function(a,b){"use strict";function c(a){return a?{x:a.x,y:a.y,z:a.z}:void 0}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/visual/Tetrahedron.js",["../core/Color","./Defaults","./materialFromOptions","../core/Mesh","./offsetFromOptions","../core/referenceAxis","../core/referenceMeridian","./setAxisAndMeridian","./setColorOption","./setDeprecatedOptions","../geometries/SimplexMode","./simplexModeFromOptions","../geometries/TetrahedronGeometry","./spinorE3Object","./vectorE3Object"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a}],execute:function(){r=function(a){function b(b,f,r){void 0===f&&(f={}),void 0===r&&(r=0);var s=a.call(this,void 0,void 0,b,{axis:h["default"](f,d.ds.axis).direction(),meridian:i["default"](f,d.ds.meridian).direction()},r+1)||this;s.setLoggingName("Tetrahedron");var t={kind:"TetrahedronGeometry"};t.offset=g["default"](f),t.tilt=p["default"](f.tilt),t.axis=q["default"](h["default"](f,d.ds.axis).direction()),t.meridian=q["default"](i["default"](f,d.ds.meridian).direction());var u=b.getCacheGeometry(t);if(u&&u instanceof o["default"])s.geometry=u,u.release();else{var v=new o["default"](b,t);s.geometry=v,v.release(),b.putCacheGeometry(t,v)}var w=e["default"](b,n["default"](f,m["default"].TRIANGLE),f);return s.material=w,w.release(),j["default"](s,f),k["default"](s,f,c["default"].gray),l["default"](s,f),0===r&&s.synchUp(),s}return s(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"radius",{get:function(){return this.getScaleX()},set:function(a){this.setScale(a,a,a)},enumerable:!0,configurable:!0}),b}(f["default"]),a("default",r)}}}),System.register("davinci-eight/visual/Track.js",["../core/BeginMode","../core/Color","../core/DataType","../core/GraphicsProgramSymbols","../materials/LineMaterial","../math/Matrix4","../core/Mesh","./setColorOption","../core/Usage","../core/VertexBuffer"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m=3,n=4,o=n*m,p=function(){function a(a){this.contextManager=a,this.scaling=h["default"].one.clone(),this.count=0,this.N=2,this.dirty=!0,this.refCount=1,this.data=new Float32Array(this.N*m),this.vbo=new l["default"](a,this.data,k["default"].DYNAMIC_DRAW)}return a.prototype.destructor=function(){this.vbo.release(),this.vbo=void 0},a.prototype.bind=function(a){this.dirty&&(this.vbo.bind(),this.vbo.upload(),this.vbo.unbind(),this.dirty=!1),this.vbo.bind();var b=a.getAttrib(f["default"].ATTRIBUTE_POSITION);return b.config(m,e["default"].FLOAT,!0,o,0),b.enable(),this},a.prototype.unbind=function(a){var b=a.getAttrib(f["default"].ATTRIBUTE_POSITION);return b.disable(),this.vbo.unbind(),this},a.prototype.draw=function(){return this.contextManager.gl.drawArrays(c["default"].LINE_STRIP,0,this.count),this},a.prototype.contextFree=function(){this.vbo.contextFree()},a.prototype.contextGain=function(){this.vbo.contextGain()},a.prototype.contextLost=function(){this.vbo.contextLost()},a.prototype.addRef=function(){return this.refCount++,this.refCount},a.prototype.release=function(){return this.refCount--,0===this.refCount&&this.destructor(),this.refCount},a.prototype.addPoint=function(a,b,c){if(this.count===this.N){this.N=2*this.N;var d=new Float32Array(this.N*m);d.set(this.data),this.data=d,this.vbo.release(),this.vbo=new l["default"](this.contextManager,this.data,k["default"].DYNAMIC_DRAW)}var e=this.count*m;this.data[e+0]=a,this.data[e+1]=b,this.data[e+2]=c,this.count++,this.dirty=!0},a.prototype.erase=function(){this.count=0},a}(),q=function(a){function b(b,c,e){void 0===c&&(c={}),void 0===e&&(e=0);var f=a.call(this,new p(b),new g["default"](b),b,{},e+1)||this;f.setLoggingName("Track");var h=f.geometry;h.release(),h.release();var i=f.material;return i.release(),i.release(),j["default"](f,c,d["default"].gray),0===e&&f.synchUp(),f}return r(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b.prototype.addPoint=function(a){if(a){var b=this.geometry;b.addPoint(a.x,a.y,a.z),b.release()}},b.prototype.clear=function(){var a=this.geometry;a.erase(),a.release()},b}(i["default"]),a("Track",q),a("default",q)}}}),System.register("davinci-eight/math/Modulo.js",["../checks/mustBeGE","../checks/mustBeInteger"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(){this._value=0,this._size=0}return Object.defineProperty(a.prototype,"size",{get:function(){return this._size},set:function(a){d["default"]("size",a),c["default"]("size",a,0),this._size=a,this.value=this._value},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"value",{get:function(){return this._value},set:function(a){this._value=a%this._size},enumerable:!0,configurable:!0}),a.prototype.inc=function(){return this._value++,this._value===this._size&&(this._value=0),this._value},a}(),a("default",e)}}}),System.register("davinci-eight/math/Vector3.js",["../utils/applyMixins","./approx","./dotVectorE3","../core/Lockable","./Matrix3","../checks/isDefined","../checks/isNumber","./randomRange","../i18n/readOnly","./toStringCustom","./wedgeXY","./wedgeYZ","./wedgeZX"],function(a,b){"use strict";function c(a){return[a.x,a.y,a.z]}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a}],execute:function(){q=Math.sqrt,r=0,s=1,t=2,u=["e1","e2","e3"],v=function(){function a(a,b){void 0===a&&(a=[0,0,0]),void 0===b&&(b=!1),this.coords_=a,this.modified_=b}return a.dot=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z},Object.defineProperty(a.prototype,"length",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"modified",{get:function(){return this.modified_},set:function(a){if(this.isLocked())throw new g.TargetLockedError("set modified");this.modified_=a},enumerable:!0,configurable:!0}),a.prototype.getComponent=function(a){return this.coords_[a]},Object.defineProperty(a.prototype,"x",{get:function(){return this.coords_[r]},set:function(a){if(this.isLocked())throw new g.TargetLockedError("set x");var b=this.coords_;this.modified_=this.modified_||b[r]!==a,b[r]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.coords_[s]},set:function(a){if(this.isLocked())throw new g.TargetLockedError("set y");var b=this.coords_;this.modified_=this.modified_||b[s]!==a,b[s]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"z",{get:function(){return this.coords_[t]},set:function(a){if(this.isLocked())throw new g.TargetLockedError("set z");var b=this.coords_;this.modified_=this.modified_||b[t]!==a,b[t]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maskG3",{get:function(){return this.isZero()?0:2},set:function(a){throw new Error(l["default"]("maskG3").message)},enumerable:!0,configurable:!0}),a.prototype.add=function(a,b){return void 0===b&&(b=1),this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this},a.prototype.applyMatrix=function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[3]*c+e[6]*d,this.y=e[1]*b+e[4]*c+e[7]*d,this.z=e[2]*b+e[5]*c+e[8]*d,this},a.prototype.applyMatrix4=function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[4]*c+e[8]*d+e[12],this.y=e[1]*b+e[5]*c+e[9]*d+e[13],this.z=e[2]*b+e[6]*c+e[10]*d+e[14],this},a.prototype.approx=function(a){return e["default"](this.coords_,a),this},a.prototype.reflect=function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z,h=2*(b*e+c*f+d*g);return this.x=b-h*e,this.y=c-h*f,this.z=d-h*g,this},a.prototype.rotate=function(a){var b=this.x,c=this.y,d=this.z,e=a.xy,f=a.yz,g=a.zx,h=a.a,i=h*b-g*d+e*c,j=h*c-e*b+f*d,k=h*d-f*c+g*b,l=f*b+g*c+e*d;return this.x=i*h+l*f+j*e-k*g,this.y=j*h+l*g+k*f-i*e,this.z=k*h+l*e+i*g-j*f,this},a.prototype.clone=function(){return new a([this.x,this.y,this.z],this.modified_)},a.prototype.copy=function(a){if(a)return this.x=a.x,this.y=a.y,this.z=a.z,this;throw new Error("source for copy must be a vector")},a.prototype.copyCoordinates=function(a){return this.x=a[r],this.y=a[s],this.z=a[t],this},a.prototype.cross=function(a){return this.cross2(this,a)},a.prototype.cross2=function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;return this.x=o["default"](c,d,e,f,g,h),this.y=p["default"](c,d,e,f,g,h),this.z=n["default"](c,d,e,f,g,h),this},a.prototype.distanceTo=function(a){return i["default"](a)?q(this.quadranceTo(a)):void 0},a.prototype.quadranceTo=function(a){if(i["default"](a)){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return b*b+c*c+d*d}},a.prototype.divByScalar=function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b,this.z*=b}else this.x=0,this.y=0,this.z=0;return this},a.prototype.dot=function(b){return a.dot(this,b)},a.prototype.dual=function(a,b){return b?(this.x=a.yz,this.y=a.zx,this.z=a.xy):(this.x=-a.yz,this.y=-a.zx,this.z=-a.xy),this},a.prototype.equals=function(b){return b instanceof a&&(this.x===b.x&&this.y===b.y&&this.z===b.z)},a.prototype.isZero=function(){return 0===this.x&&0===this.y&&0===this.z},a.prototype.magnitude=function(){return q(this.squaredNorm())},a.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},a.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this},a.prototype.lerp2=function(a,b,c){return this.copy(a).lerp(b,c),this},a.prototype.normalize=function(){var a=this.magnitude();return 0!==a?this.divByScalar(a):this.zero()},a.prototype.scale=function(a){return this.x*=a,this.y*=a,this.z*=a,this},a.prototype.stress=function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this},a.prototype.setXYZ=function(a,b,c){return this.x=a,this.y=b,this.z=c,this},a.prototype.squaredNorm=function(){return f["default"](this,this)},a.prototype.sub=function(a,b){return void 0===b&&(b=1),this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this},a.prototype.sub2=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this},a.prototype.toArray=function(){return c(this)},a.prototype.toExponential=function(a){var b=function(b){return b.toExponential(a)};return m["default"](c(this),b,u)},a.prototype.toFixed=function(a){var b=function(b){return b.toFixed(a)};return m["default"](c(this),b,u)},a.prototype.toPrecision=function(a){var b=function(b){return b.toPrecision(a)};return m["default"](c(this),b,u)},a.prototype.toString=function(a){var b=function(b){return b.toString(a)};return m["default"](c(this),b,u)},a.prototype.zero=function(){return this.x=0,this.y=0,this.z=0,this},a.prototype.__add__=function(b){return b instanceof a?g.lock(this.clone().add(b,1)):void 0},a.prototype.__radd__=function(b){return b instanceof a?g.lock(b.clone().add(this,1)):void 0},a.prototype.__sub__=function(b){return b instanceof a?g.lock(this.clone().sub(b)):void 0},a.prototype.__rsub__=function(b){return b instanceof a?g.lock(b.clone().sub(this,1)):void 0},a.prototype.__mul__=function(a){return j["default"](a)?g.lock(this.clone().scale(a)):void 0},a.prototype.__rmul__=function(a){return"number"==typeof a?g.lock(this.clone().scale(a)):a instanceof h["default"]?g.lock(this.clone().applyMatrix(a)):void 0},a.prototype.__div__=function(a){return j["default"](a)?g.lock(this.clone().divByScalar(a)):void 0},a.prototype.__rdiv__=function(a){},a.prototype.__pos__=function(){return g.lock(a.copy(this))},a.prototype.__neg__=function(){return g.lock(a.copy(this).neg())},a.copy=function(b){return new a([b.x,b.y,b.z])},a.dual=function(b,c){return void 0===c&&(c=!1),new a(c?[b.yz,b.zx,b.xy]:[-b.yz,-b.zx,-b.xy])},a.e1=function(){return new a([1,0,0])},a.e2=function(){return new a([0,1,0])},a.e3=function(){return new a([0,0,1])},a.isInstance=function(b){return b instanceof a},a.lerp=function(b,c,d){return a.copy(c).sub(b).scale(d).add(b)},a.random=function(){var b=k["default"](-1,1),c=k["default"](-1,1),d=k["default"](-1,1);return a.vector(b,c,d).normalize()},a.vector=function(b,c,d){return new a([b,c,d])},a.zero=function(){return new a([0,0,0])},a}(),a("default",v),d["default"](v,[g.LockableMixin])}}}),System.register("davinci-eight/visual/TrailConfig.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){c=function(){function a(){this.enabled=!0,this.interval=10,this.retain=10}return a}(),a("TrailConfig",c),a("default",c)}}}),System.register("davinci-eight/visual/Trail.js",["../math/Modulo","../math/Spinor3","../math/Vector3","../checks/mustBeNonNullObject","../checks/mustBeNumber","../core/ShareableBase","./TrailConfig"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function b(b){var d=a.call(this)||this;return d.Xs=[],d.Rs=[],d.Ns=[],d.config=new i["default"],d.counter=0,d.modulo=new c["default"],d.setLoggingName("Trail"),f["default"]("mesh",b),b.addRef(),d.mesh=b,d}return k(b,a),b.prototype.destructor=function(b){this.mesh.release(),this.mesh=void 0,a.prototype.destructor.call(this,b+1)},b.prototype.draw=function(a){console.warn("Trail.draw is deprecated. Please use the Trail.render method instead."),this.render(a)},b.prototype.erase=function(){this.Ns=[],this.Xs=[],this.Rs=[]},b.prototype.forEach=function(a){if(this.config.enabled)for(var b=this.Ns,c=this.Xs,d=this.Rs,e=this.modulo.size,f=0;f<e;f++)c[f]&&d[f]&&a(b[f],c[f],d[f])},b.prototype.render=function(a){if(this.config.enabled){var b=this.mesh,c=b.X,d=b.R,e=c.x,f=c.y,g=c.z,h=d.a,i=d.yz,j=d.zx,k=d.xy,l=b.geometry,m=b.material;m.use();for(var n=a.length,o=0;o<n;o++){var p=a[o];p.setUniforms(m)}l.bind(m);for(var q=this.Xs,r=this.Rs,s=this.modulo.size,o=0;o<s;o++)q[o]&&c.copyVector(q[o]),r[o]&&d.copySpinor(r[o]),b.setUniforms(),l.draw();l.unbind(m),l.release(),m.release(),c.x=e,c.y=f,c.z=g,d.a=h,d.yz=i,d.zx=j,d.xy=k}},b.prototype.snapshot=function(a){if(void 0===a&&(a=0),g["default"]("alpha",a),this.config.enabled){if(this.modulo.size!==this.config.retain&&(this.modulo.size=this.config.retain,this.modulo.value=0),this.counter%this.config.interval===0){var b=this.modulo.value;this.Ns[b]=a,this.Xs[b]?(this.Xs[b].copy(this.mesh.X),this.Rs[b].copy(this.mesh.R)):(this.Xs[b]=e["default"].copy(this.mesh.X),this.Rs[b]=d["default"].copy(this.mesh.R)),this.modulo.inc()}this.counter++}},b}(h["default"]),a("Trail",j),a("default",j)}}}),System.register("davinci-eight/core/BeginMode.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.LINE_LOOP=2]="LINE_LOOP",a[a.LINE_STRIP=3]="LINE_STRIP",a[a.TRIANGLES=4]="TRIANGLES",a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(c||(c={})),a("BeginMode",c),a("default",c)}}}),System.register("davinci-eight/visual/Defaults.js",["../core/tiltFromOptions"],function(a,b){"use strict";function c(a,b,c,d,e){return{axis:a,length:b,meridian:c,radius:d,sliceAngle:e}}var d,e,f,g,h,i,j;b&&b.id;return{setters:[function(a){d=a}],execute:function(){e=d.canonicalAxis,f=1,g=d.canonicalMeridian,h=.5,i=2*Math.PI,a("ds",j=c(e,f,g,h,i))}}}),System.register("davinci-eight/core/GeometryBase.js",["../checks/mustBeDefined","../i18n/notSupported","./ShareableContextConsumer"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(b,c){var d=a.call(this,b)||this;return d.setLoggingName("GeometryBase"),0===c&&d.synchUp(),d}return g(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("GeometryBase"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b.prototype.bind=function(a){throw c["default"]("material",a),new Error(d["default"]("bind(material: Material)").message)},b.prototype.unbind=function(a){throw c["default"]("material",a),new Error(d["default"]("unbind(material: Material)").message)},b.prototype.draw=function(){throw new Error(d["default"]("draw()").message)},b}(e["default"]),a("default",f)}}}),System.register("davinci-eight/core/Usage.js",[],function(a,b){"use strict";function c(a,b){switch(b){case d.STREAM_DRAW:case d.STATIC_DRAW:case d.DYNAMIC_DRAW:return;default:throw new Error(a+": Usage must be one of the enumerated values.")}}b&&b.id;a("checkUsage",c);var d;return{setters:[],execute:function(){!function(a){a[a.STREAM_DRAW=35040]="STREAM_DRAW",a[a.STATIC_DRAW=35044]="STATIC_DRAW",a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW"}(d||(d={})),a("Usage",d),a("default",d)}}}),System.register("davinci-eight/core/computeCount.js",["../checks/mustBeInteger"],function(a,b){"use strict";function c(a,b){for(var c=b.length,e=0;e<c;e++){var f=b[e],g=a[f],h=g.values.length,i=d["default"]("size",g.size);return h/i}return 0}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/core/computeAttributes.js",["./computeCount"],function(a,b){"use strict";function c(a,b){for(var c=b.length,e=[],f=d["default"](a,b),g=0;g<f;g++)for(var h=0;h<c;h++)for(var i=b[h],j=a[i],k=j.size,l=0;l<k;l++)e.push(j.values[g*k+l]);return e}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/core/computePointers.js",[],function(a,b){"use strict";function c(a,b){for(var c=b.length,d=[],e=0,f=0;f<c;f++){var g=b[f],h=a[g];d.push({name:g,size:h.size,type:h.type,normalized:!0,offset:e}),e+=4*h.size}return d}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/core/computeStride.js",[],function(a,b){"use strict";function c(a,b){for(var c=b.length,d=0,e=0;e<c;e++){var f=b[e],g=a[f];d+=4*g.size}return d}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/core/vertexArraysFromPrimitive.js",["./computeAttributes","./computePointers","./computeStride"],function(a,b){"use strict";function c(a,b){if(a){var c=b?b:Object.keys(a.attributes),g={mode:a.mode,indices:a.indices,attributes:d["default"](a.attributes,c),stride:f["default"](a.attributes,c),pointers:e["default"](a.attributes,c)};return g}}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/core/BufferObjects.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER",a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",a[a.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",a[a.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING"}(c||(c={})),a("BufferObjects",c),a("default",c)}}}),System.register("davinci-eight/core/VertexBuffer.js",["./BufferObjects","../checks/mustBeUndefined","./ShareableContextConsumer"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(b,c,d,e){void 0===e&&(e=0);var f=a.call(this,b)||this;return f.data=c,f.usage=d,f.setLoggingName("VertexBuffer"),0===e&&f.synchUp(),f}return g(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("VertexBuffer"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),d["default"](this.getLoggingName(),this.webGLBuffer),a.prototype.destructor.call(this,b+1)},b.prototype.upload=function(){var a=this.gl;a&&this.webGLBuffer&&this.data&&a.bufferData(c["default"].ARRAY_BUFFER,this.data,this.usage)},b.prototype.contextFree=function(){if(this.webGLBuffer){var b=this.gl;b?b.deleteBuffer(this.webGLBuffer):console.error(this.getLoggingName()+" must leak WebGLBuffer because WebGLRenderingContext is "+typeof b),this.webGLBuffer=void 0}a.prototype.contextFree.call(this)},b.prototype.contextGain=function(){a.prototype.contextGain.call(this);var b=this.gl;this.webGLBuffer||(this.webGLBuffer=b.createBuffer(),this.bind(),this.upload(),this.unbind())},b.prototype.contextLost=function(){this.webGLBuffer=void 0,a.prototype.contextLost.call(this)},b.prototype.bind=function(){var a=this.gl;a&&a.bindBuffer(c["default"].ARRAY_BUFFER,this.webGLBuffer)},b.prototype.unbind=function(){var a=this.gl;a&&a.bindBuffer(c["default"].ARRAY_BUFFER,null)},b}(e["default"]),a("VertexBuffer",f),a("default",f)}}}),System.register("davinci-eight/core/GeometryArrays.js",["./GeometryBase","../checks/mustBeNonNullObject","./Usage","./vertexArraysFromPrimitive","./VertexBuffer"],function(a,b){"use strict";var c,d,e,f,g,h,i=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(a){function b(b,c,h,i){void 0===h&&(h={}),void 0===i&&(i=0);var j=a.call(this,b,i+1)||this;j.first=0,d["default"]("primitive",c),j.setLoggingName("GeometryArrays");var k=f["default"](c,h.order);return j.mode=k.mode,j.vbo=new g["default"](b,new Float32Array(k.attributes),e["default"].STATIC_DRAW),j.count=k.attributes.length/(k.stride/4),j.stride=k.stride,j.pointers=k.pointers,0===i&&j.synchUp(),j}return i(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("GeometryArrays"),this.vbo.addRef(),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),this.vbo.release(),a.prototype.destructor.call(this,b+1)},b.prototype.bind=function(a){this.vbo.bind();var b=this.pointers;if(b)for(var c=b.length,d=0;d<c;d++){var e=b[d],f=a.getAttrib(e.name);f&&(f.config(e.size,e.type,e.normalized,this.stride,e.offset),f.enable())}return this},b.prototype.draw=function(){return this.gl&&this.gl.drawArrays(this.mode,this.first,this.count),this},b.prototype.unbind=function(a){var b=this.pointers;if(b)for(var c=b.length,d=0;d<c;d++){var e=b[d],f=a.getAttrib(e.name);f&&f.disable()}return this.vbo.unbind(),this},b}(c["default"]),a("default",h)}}}),System.register("davinci-eight/materials/LineMaterial.js",["../materials/GraphicsProgramBuilder","../core/GraphicsProgramSymbols","../checks/isDefined","../checks/isNull","../checks/isUndefined","./ShaderMaterial","../checks/mustBeObject"],function(a,b){"use strict";function c(a){i["default"](a)||j["default"](a)?(a={kind:"LineMaterial",attributes:{},uniforms:{}},a.attributes[g["default"].ATTRIBUTE_POSITION]=3,a.uniforms[g["default"].UNIFORM_COLOR]="vec3",a.uniforms[g["default"].UNIFORM_OPACITY]="float",a.uniforms[g["default"].UNIFORM_MODEL_MATRIX]="mat4",a.uniforms[g["default"].UNIFORM_PROJECTION_MATRIX]="mat4",a.uniforms[g["default"].UNIFORM_VIEW_MATRIX]="mat4"):l["default"]("options",a);for(var b=h["default"](a.attributes)?a.attributes:{},c=h["default"](a.uniforms)?a.uniforms:{},d=new f["default"],e=Object.keys(b),k=0;k<e.length;k++){var m=e[k],n=b[m];d.attribute(m,n)}for(var o=Object.keys(c),p=0;p<o.length;p++){var q=o[p],r=c[q];d.uniform(q,r)}return d}function d(a){return c(a).vertexShaderSrc()}function e(a){return c(a).fragmentShaderSrc()}var f,g,h,i,j,k,l,m,n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m=function(a){function b(b,c,f){void 0===f&&(f=0);var g=a.call(this,d(c),e(c),[],b,f+1)||this;return g.setLoggingName("LineMaterial"),0===f&&g.synchUp(),g}return n(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("LineMaterial"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(k.ShaderMaterial),a("LineMaterial",m),a("default",m)}}}),System.register("davinci-eight/materials/MeshMaterial.js",["../materials/GraphicsProgramBuilder","../core/GraphicsProgramSymbols","../checks/isDefined","../checks/isNull","../checks/isUndefined","./ShaderMaterial","../checks/mustBeObject"],function(a,b){"use strict";function c(a){j["default"](a)||i["default"](a)?(a={kind:"MeshMaterial",attributes:{},uniforms:{}},a.attributes[g["default"].ATTRIBUTE_POSITION]=3,a.attributes[g["default"].ATTRIBUTE_NORMAL]=3,a.attributes[g["default"].ATTRIBUTE_COORDS]=2,a.uniforms[g["default"].UNIFORM_COLOR]="vec3",a.uniforms[g["default"].UNIFORM_OPACITY]="float",a.uniforms[g["default"].UNIFORM_MODEL_MATRIX]="mat4",a.uniforms[g["default"].UNIFORM_NORMAL_MATRIX]="mat3",a.uniforms[g["default"].UNIFORM_PROJECTION_MATRIX]="mat4",a.uniforms[g["default"].UNIFORM_VIEW_MATRIX]="mat4",a.uniforms[g["default"].UNIFORM_AMBIENT_LIGHT]="vec3",a.uniforms[g["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]="vec3",a.uniforms[g["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION]="vec3"):l["default"]("options",a);for(var b=h["default"](a.attributes)?a.attributes:{},c=h["default"](a.uniforms)?a.uniforms:{},d=new f["default"],e=Object.keys(b),k=0;k<e.length;k++){var m=e[k],n=b[m];d.attribute(m,n)}for(var o=Object.keys(c),p=0;p<o.length;p++){var q=o[p],r=c[q];d.uniform(q,r)}return d}function d(a){return c(a).vertexShaderSrc()}function e(a){return c(a).fragmentShaderSrc()}var f,g,h,i,j,k,l,m,n,o=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m="MeshMaterial",n=function(a){function b(b,c,f){void 0===f&&(f=0);var g=a.call(this,d(c),e(c),[],b,f+1)||this;return g.setLoggingName(m),0===f&&g.synchUp(),g}return o(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName(m),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(k["default"]),a("MeshMaterial",n),a("default",n)}}}),System.register("davinci-eight/materials/glslAttribType.js",["../core/GraphicsProgramSymbols","../checks/mustBeInteger","../checks/mustBeString"],function(a,b){"use strict";function c(a){switch(f["default"]("size",a),a){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error("Can't compute the GLSL attribute type from size "+a)}}function d(a,b){switch(g["default"]("key",a),f["default"]("size",b),a){case e["default"].ATTRIBUTE_COLOR:return c(b);default:return c(b)}}b&&b.id;a("default",d);var e,f,g;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-eight/materials/vColorRequired.js",["../core/GraphicsProgramSymbols"],function(a,b){"use strict";function c(a,b){return!!a[d["default"].ATTRIBUTE_COLOR]||!!b[d["default"].UNIFORM_COLOR]}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/materials/vCoordsRequired.js",["../checks/mustBeDefined","../core/GraphicsProgramSymbols"],function(a,b){"use strict";function c(a,b){return d["default"]("attributes",a),d["default"]("uniforms",b),!!a[e["default"].ATTRIBUTE_COORDS]}b&&b.id;a("default",c);var d,e;return{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/materials/vLightRequired.js",["../checks/mustBeDefined","../core/GraphicsProgramSymbols"],function(a,b){"use strict";function c(a,b){return d["default"]("attributes",a),d["default"]("uniforms",b),!!b[e["default"].UNIFORM_AMBIENT_LIGHT]||!!b[e["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]&&!!b[e["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]}b&&b.id;a("default",c);var d,e;return{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/materials/fragmentShaderSrc.js",["../config","../core/getUniformVarName","../core/GraphicsProgramSymbols","../checks/mustBeBoolean","../checks/mustBeDefined"],function(a,b){
"use strict";function c(a,b){return f["default"](a[b],b)}function d(a,b,d,f,n){i["default"]("attributes",a),i["default"]("uniforms",b),h["default"](g["default"].VARYING_COLOR,d),h["default"](g["default"].VARYING_COORDS,f),h["default"](g["default"].VARYING_LIGHT,n);var o=[];o.push("// fragment shader generated by "+e["default"].NAMESPACE+" "+e["default"].VERSION),j&&(o.push("#ifdef GL_ES"),o.push("#  ifdef GL_FRAGMENT_PRECISION_HIGH"),o.push("precision highp float;"),o.push("#  else"),o.push("precision mediump float;"),o.push("#  endif"),o.push("#endif")),d&&o.push("varying highp vec4 "+g["default"].VARYING_COLOR+";"),f&&o.push("varying highp vec2 "+g["default"].VARYING_COORDS+";"),n&&o.push("varying highp vec3 "+g["default"].VARYING_LIGHT+";");for(var p in b)if(b.hasOwnProperty(p))switch(b[p].glslType){case"sampler2D":o.push(l+b[p].glslType+k+c(b,p)+m)}o.push("void main(void) {"),n?d?f&&b[g["default"].UNIFORM_IMAGE]?o.push("  gl_FragColor = texture2D("+g["default"].UNIFORM_IMAGE+", "+g["default"].VARYING_COORDS+") * vec4("+g["default"].VARYING_COLOR+".xyz * "+g["default"].VARYING_LIGHT+", "+g["default"].VARYING_COLOR+".a);"):o.push("  gl_FragColor = vec4("+g["default"].VARYING_COLOR+".xyz * "+g["default"].VARYING_LIGHT+", "+g["default"].VARYING_COLOR+".a);"):f&&b[g["default"].UNIFORM_IMAGE]?o.push("  gl_FragColor = texture2D("+g["default"].UNIFORM_IMAGE+", "+g["default"].VARYING_COORDS+") * vec4("+g["default"].VARYING_LIGHT+", 1.0);"):o.push("  gl_FragColor = vec4("+g["default"].VARYING_LIGHT+", 1.0);"):d?f&&b[g["default"].UNIFORM_IMAGE]?o.push("  gl_FragColor = texture2D("+g["default"].UNIFORM_IMAGE+", "+g["default"].VARYING_COORDS+") * "+g["default"].VARYING_COLOR+";"):o.push("  gl_FragColor = "+g["default"].VARYING_COLOR+";"):f&&b[g["default"].UNIFORM_IMAGE]?o.push("  gl_FragColor = texture2D("+g["default"].UNIFORM_IMAGE+", "+g["default"].VARYING_COORDS+");"):o.push("  gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);"),o.push("}"),o.push("");var q=o.join("\n");return q}b&&b.id;a("default",d);var e,f,g,h,i,j,k,l,m;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=!1,k=" ",l="uniform"+k,m=";"}}}),System.register("davinci-eight/core/getAttribVarName.js",["../checks/isDefined","../checks/mustBeObject","../checks/mustBeString"],function(a,b){"use strict";function c(a,b){return e["default"]("attribute",a),f["default"]("varName",b),d["default"](a.name)?f["default"]("attribute.name",a.name):b}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/core/getUniformVarName.js",["../checks/isDefined","../checks/expectArg"],function(a,b){"use strict";function c(a,b){return e["default"]("uniform",a).toBeObject(),e["default"]("varName",b).toBeString(),d["default"](a.name)?e["default"]("uniform.name",a.name).toBeString().value:b}b&&b.id;a("default",c);var d,e;return{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/materials/vertexShaderSrc.js",["../config","../core/getAttribVarName","../core/getUniformVarName","../checks/mustBeBoolean","../checks/mustBeDefined","../core/GraphicsProgramSymbols"],function(a,b){"use strict";function c(a,b){return g["default"](a[b],b)}function d(a,b,d,g,u){i["default"]("attributes",a),i["default"]("uniforms",b),h["default"](j["default"].VARYING_COLOR,d),h["default"](j["default"].VARYING_COORDS,g),h["default"](j["default"].VARYING_LIGHT,u);var v=[];v.push("// vertex shader generated by "+e["default"].NAMESPACE+" "+e["default"].VERSION);for(var w in a)a.hasOwnProperty(w)&&v.push(l+a[w].glslType+k+f["default"](a[w],w)+o);for(var x in b)if(b.hasOwnProperty(x))switch(b[x].glslType){case"sampler2D":break;default:v.push(m+b[x].glslType+k+c(b,x)+o)}d&&v.push("varying highp vec4 "+j["default"].VARYING_COLOR+";"),g&&v.push("varying highp vec2 "+j["default"].VARYING_COORDS+";"),u&&v.push("varying highp vec3 "+j["default"].VARYING_LIGHT+";"),v.push("void main(void) {");var y=[];if(y.unshift(o),a[j["default"].ATTRIBUTE_POSITION])switch(a[j["default"].ATTRIBUTE_POSITION].glslType){case"float":y.unshift(q),y.unshift("1.0"),y.unshift(n),y.unshift("0.0"),y.unshift(n),y.unshift("0.0"),y.unshift(n),y.unshift(f["default"](a[j["default"].ATTRIBUTE_POSITION],j["default"].ATTRIBUTE_POSITION)),y.unshift(p),y.unshift("vec4");break;case"vec2":y.unshift(q),y.unshift("1.0"),y.unshift(n),y.unshift("0.0"),y.unshift(n),y.unshift(f["default"](a[j["default"].ATTRIBUTE_POSITION],j["default"].ATTRIBUTE_POSITION)),y.unshift(p),y.unshift("vec4");break;case"vec3":y.unshift(q),y.unshift("1.0"),y.unshift(n),y.unshift(f["default"](a[j["default"].ATTRIBUTE_POSITION],j["default"].ATTRIBUTE_POSITION)),y.unshift(p),y.unshift("vec4");break;case"vec4":y.unshift(f["default"](a[j["default"].ATTRIBUTE_POSITION],j["default"].ATTRIBUTE_POSITION))}else y.unshift("vec4(0.0, 0.0, 0.0, 1.0)");if(b[j["default"].UNIFORM_REFLECTION_ONE_MATRIX]&&(y.unshift(r),y.unshift(c(b,j["default"].UNIFORM_REFLECTION_ONE_MATRIX))),b[j["default"].UNIFORM_REFLECTION_TWO_MATRIX]&&(y.unshift(r),y.unshift(c(b,j["default"].UNIFORM_REFLECTION_TWO_MATRIX))),b[j["default"].UNIFORM_MODEL_MATRIX]&&(y.unshift(r),y.unshift(c(b,j["default"].UNIFORM_MODEL_MATRIX))),b[j["default"].UNIFORM_VIEW_MATRIX]&&(y.unshift(r),y.unshift(c(b,j["default"].UNIFORM_VIEW_MATRIX))),b[j["default"].UNIFORM_PROJECTION_MATRIX]&&(y.unshift(r),y.unshift(c(b,j["default"].UNIFORM_PROJECTION_MATRIX))),y.unshift(s),y.unshift("gl_Position"),y.unshift("  "),v.push(y.join("")),b[j["default"].UNIFORM_POINT_SIZE]&&v.push("  gl_PointSize = "+c(b,j["default"].UNIFORM_POINT_SIZE)+";"),d)if(a[j["default"].ATTRIBUTE_COLOR]){var z=f["default"](a[j["default"].ATTRIBUTE_COLOR],j["default"].ATTRIBUTE_COLOR);switch(a[j["default"].ATTRIBUTE_COLOR].glslType){case"vec4":v.push("  "+j["default"].VARYING_COLOR+" = "+z+o);break;case"vec3":b[j["default"].UNIFORM_OPACITY]?v.push("  "+j["default"].VARYING_COLOR+" = vec4("+z+", "+c(b,j["default"].UNIFORM_OPACITY)+");"):v.push("  "+j["default"].VARYING_COLOR+" = vec4("+z+", 1.0);");break;default:throw new Error("Unexpected type for color attribute: "+a[j["default"].ATTRIBUTE_COLOR].glslType)}}else if(b[j["default"].UNIFORM_COLOR]){var A=c(b,j["default"].UNIFORM_COLOR);switch(b[j["default"].UNIFORM_COLOR].glslType){case"vec4":v.push("  vColor = "+A+o);break;case"vec3":b[j["default"].UNIFORM_OPACITY]?v.push("  "+j["default"].VARYING_COLOR+" = vec4("+A+", "+c(b,j["default"].UNIFORM_OPACITY)+");"):v.push("  "+j["default"].VARYING_COLOR+" = vec4("+A+", 1.0);");break;default:throw new Error("Unexpected type for color uniform: "+b[j["default"].UNIFORM_COLOR].glslType)}}else v.push("  "+j["default"].VARYING_COLOR+" = vec4(1.0, 1.0, 1.0, 1.0);");g&&v.push("  "+j["default"].VARYING_COORDS+" = "+j["default"].ATTRIBUTE_COORDS+";"),u&&(b[j["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]&&b[j["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION]&&b[j["default"].UNIFORM_NORMAL_MATRIX]&&a[j["default"].ATTRIBUTE_NORMAL]?(v.push("  vec3 L = normalize("+c(b,j["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION)+");"),v.push("  vec3 N = normalize("+c(b,j["default"].UNIFORM_NORMAL_MATRIX)+" * "+f["default"](a[j["default"].ATTRIBUTE_NORMAL],j["default"].ATTRIBUTE_NORMAL)+");"),v.push("  // The minus sign arises because L is the light direction, so we need dot(N, -L) = -dot(N, L)"),v.push("  float "+t+" = max(-dot(N, L), 0.0);"),b[j["default"].UNIFORM_AMBIENT_LIGHT]?v.push("  "+j["default"].VARYING_LIGHT+" = "+c(b,j["default"].UNIFORM_AMBIENT_LIGHT)+" + "+t+" * "+c(b,j["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR)+";"):v.push("  "+j["default"].VARYING_LIGHT+" = "+t+" * "+c(b,j["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR)+";")):b[j["default"].UNIFORM_AMBIENT_LIGHT]?v.push("  "+j["default"].VARYING_LIGHT+" = "+c(b,j["default"].UNIFORM_AMBIENT_LIGHT)+";"):v.push("  "+j["default"].VARYING_LIGHT+" = vec3(1.0, 1.0, 1.0);")),v.push("}"),v.push("");var B=v.join("\n");return B}b&&b.id;a("default",d);var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){k=" ",l="attribute"+k,m="uniform"+k,n=","+k,o=";",p="(",q=")",r=k+"*"+k,s=k+"="+k,t="directionalLightCosineFactor"}}}),System.register("davinci-eight/materials/GraphicsProgramBuilder.js",["../core/getAttribVarName","./glslAttribType","../checks/mustBeInteger","../checks/mustBeString","./vColorRequired","./vCoordsRequired","./vLightRequired","./fragmentShaderSrc","./vertexShaderSrc"],function(a,b){"use strict";function c(a){for(var b={},c=Object.keys(a),g=c.length,h=0;h<g;h++){var i=c[h],j=a[i];f["default"]("size",j.size);var k=d["default"](j,i);b[k]={glslType:e["default"](i,j.size)}}return b}var d,e,f,g,h,i,j,k,l,m;b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m=function(){function a(a){if(this.aMeta={},this.uParams={},a)for(var b=a.attributes,c=Object.keys(b),d=0,e=c.length;d<e;d++){var f=c[d],g=b[f];this.attribute(f,g.size)}}return a.prototype.attribute=function(a,b){return g["default"]("name",a),f["default"]("size",b),this.aMeta[a]={size:b},this},a.prototype.uniform=function(a,b){return g["default"]("name",a),g["default"]("glslType",b),this.uParams[a]={glslType:b},this},a.prototype.vertexShaderSrc=function(){var a=c(this.aMeta),b=h["default"](a,this.uParams),d=i["default"](a,this.uParams),e=j["default"](a,this.uParams);return l["default"](a,this.uParams,b,d,e)},a.prototype.fragmentShaderSrc=function(){var a=c(this.aMeta),b=h["default"](a,this.uParams),d=i["default"](a,this.uParams),e=j["default"](a,this.uParams);return k["default"](a,this.uParams,b,d,e)},a}(),a("default",m)}}}),System.register("davinci-eight/core/Attrib.js",["../i18n/readOnly"],function(a,b){"use strict";var c,d;b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(){function a(a,b){this.suppressWarnings=!0,this._name=b.name}return Object.defineProperty(a.prototype,"index",{get:function(){return this._index},set:function(a){throw new Error(c["default"]("index").message)},enumerable:!0,configurable:!0}),a.prototype.contextFree=function(){this._index=void 0,this._gl=void 0},a.prototype.contextGain=function(a,b){this._index=a.getAttribLocation(b,this._name),this._gl=a},a.prototype.contextLost=function(){this._index=void 0,this._gl=void 0},a.prototype.config=function(a,b,c,d,e){void 0===c&&(c=!1),void 0===d&&(d=0),void 0===e&&(e=0),this._gl?this._gl.vertexAttribPointer(this._index,a,b,c,d,e):this.suppressWarnings||console.warn("vertexAttribPointer(index = "+this._index+", size = "+a+", type = "+b+", normalized = "+c+", stride = "+d+", offset = "+e+")")},a.prototype.enable=function(){this._gl?this._gl.enableVertexAttribArray(this._index):this.suppressWarnings||console.warn("enableVertexAttribArray(index = "+this._index+")")},a.prototype.disable=function(){this._gl?this._gl.disableVertexAttribArray(this._index):this.suppressWarnings||console.warn("disableVertexAttribArray(index = "+this._index+")")},a.prototype.getOffset=function(){return this._gl?this._gl.getVertexAttribOffset(this._index,this._gl.VERTEX_ATTRIB_ARRAY_POINTER):void(this.suppressWarnings||console.warn("getVertexAttribOffset(index = "+this._index+", VERTEX_ATTRIB_ARRAY_POINTER)"))},a.prototype.toString=function(){return["attribute",this._name].join(" ")},a}(),a("default",d)}}}),System.register("davinci-eight/core/makeWebGLShader.js",[],function(a,b){"use strict";function c(a,b){return b===a.VERTEX_SHADER?"VERTEX_SHADER":b===a.FRAGMENT_SHADER?"FRAGMENT_SHADER":"type => "+b+" shader"}function d(a,b,d){var e=a.createShader(d);a.shaderSource(e,b),a.compileShader(e);var f=a.getShaderParameter(e,a.COMPILE_STATUS);if(f)return e;if(a.isContextLost())throw new Error("Context lost while compiling "+c(a,d)+".");var g=a.getShaderInfoLog(e);throw a.deleteShader(e),new Error(g)}b&&b.id;return a("default",d),{setters:[],execute:function(){}}}),System.register("davinci-eight/core/makeWebGLProgram.js",["./makeWebGLShader"],function(a,b){"use strict";function c(a,b,c,e){var f=d["default"](a,b,a.VERTEX_SHADER),g=d["default"](a,c,a.FRAGMENT_SHADER),h=a.createProgram();a.attachShader(h,f),a.attachShader(h,g);for(var i=0;i<e.length;++i)a.bindAttribLocation(h,i,e[i]);a.linkProgram(h);var j=a.getProgramParameter(h,a.LINK_STATUS);if(j||a.isContextLost())return h;var k=a.getProgramInfoLog(h);throw a.detachShader(h,f),a.deleteShader(f),a.detachShader(h,g),a.deleteShader(g),a.deleteProgram(h),new Error("Error linking program: "+k)}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/core/Uniform.js",["../checks/isNull","../checks/mustBeObject"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a){c["default"](a)||(d["default"]("info",a),this.name=a.name)}return a.prototype.contextFree=function(){this.contextLost()},a.prototype.contextGain=function(a,b){this.contextLost(),this.gl=a,c["default"](this.name)?this.location=null:this.location=a.getUniformLocation(b,this.name)},a.prototype.contextLost=function(){this.gl=void 0,this.location=void 0},a.prototype.uniform1f=function(a){var b=this.gl;b&&b.uniform1f(this.location,a)},a.prototype.uniform1i=function(a){var b=this.gl;b&&b.uniform1i(this.location,a)},a.prototype.uniform2f=function(a,b){var c=this.gl;c&&c.uniform2f(this.location,a,b)},a.prototype.uniform2i=function(a,b){var c=this.gl;c&&c.uniform2i(this.location,a,b)},a.prototype.uniform3f=function(a,b,c){var d=this.gl;d&&d.uniform3f(this.location,a,b,c)},a.prototype.uniform3i=function(a,b,c){var d=this.gl;d&&d.uniform3i(this.location,a,b,c)},a.prototype.uniform4f=function(a,b,c,d){var e=this.gl;e&&e.uniform4f(this.location,a,b,c,d)},a.prototype.uniform4i=function(a,b,c,d){var e=this.gl;e&&e.uniform4i(this.location,a,b,c,d)},a.prototype.matrix2fv=function(a,b){var c=this.gl;c&&c.uniformMatrix2fv(this.location,a,b)},a.prototype.matrix3fv=function(a,b){var c=this.gl;c&&c.uniformMatrix3fv(this.location,a,b)},a.prototype.matrix4fv=function(a,b){var c=this.gl;c&&c.uniformMatrix4fv(this.location,a,b)},a.prototype.uniform1fv=function(a){var b=this.gl;b&&b.uniform1fv(this.location,a)},a.prototype.uniform2fv=function(a){var b=this.gl;b&&b.uniform2fv(this.location,a)},a.prototype.uniform3fv=function(a){var b=this.gl;b&&b.uniform3fv(this.location,a)},a.prototype.uniform4fv=function(a){var b=this.gl;b&&b.uniform4fv(this.location,a)},a.prototype.toString=function(){return["uniform",this.name].join(" ")},a}(),a("default",e)}}}),System.register("davinci-eight/materials/ShaderMaterial.js",["../core/Attrib","../core/DataType","../checks/isDefined","../checks/isString","../checks/isNull","../core/makeWebGLProgram","../checks/mustBeArray","../checks/mustBeString","../checks/mustBeUndefined","../i18n/readOnly","../core/ShareableContextConsumer","../core/Uniform"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a}],execute:function(){o=function(a){function b(b,c,d,f,h){void 0===h&&(h=0);var k=a.call(this,f)||this;return k._attributesByName={},k._attributesByIndex=[],k._uniforms={},k.setLoggingName("ShaderMaterial"),e["default"](b)&&!g["default"](b)&&(k._vertexShaderSrc=j["default"]("vertexShaderSrc",b)),e["default"](c)&&!g["default"](c)&&(k._fragmentShaderSrc=j["default"]("fragmentShaderSrc",c)),k._attribs=i["default"]("attribs",d),0===h&&k.synchUp(),k}return p(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("ShaderMaterial"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),k["default"](this.getLoggingName(),this._program),a.prototype.destructor.call(this,b+1)},b.prototype.contextGain=function(){var b=this.contextManager.gl;if(!this._program&&f["default"](this._vertexShaderSrc)&&f["default"](this._fragmentShaderSrc)){this._program=h["default"](b,this._vertexShaderSrc,this._fragmentShaderSrc,this._attribs),this._attributesByName={},this._attributesByIndex=[],this._uniforms={};for(var d=b.getProgramParameter(this._program,b.ACTIVE_ATTRIBUTES),e=0;e<d;e++){var g=b.getActiveAttrib(this._program,e),i=new c["default"](this.contextManager,g);this._attributesByName[g.name]=i,this._attributesByIndex.push(i)}for(var j=b.getProgramParameter(this._program,b.ACTIVE_UNIFORMS),k=0;k<j;k++){var l=b.getActiveUniform(this._program,k);this._uniforms[l.name]=new n["default"](l)}for(var m in this._attributesByName)this._attributesByName.hasOwnProperty(m)&&this._attributesByName[m].contextGain(b,this._program);for(var o in this._uniforms)this._uniforms.hasOwnProperty(o)&&this._uniforms[o].contextGain(b,this._program)}a.prototype.contextGain.call(this)},b.prototype.contextLost=function(){this._program=void 0;for(var b in this._attributesByName)this._attributesByName.hasOwnProperty(b)&&this._attributesByName[b].contextLost();for(var c in this._uniforms)this._uniforms.hasOwnProperty(c)&&this._uniforms[c].contextLost();a.prototype.contextLost.call(this)},b.prototype.contextFree=function(){if(this._program){var b=this.contextManager.gl;b?b.isContextLost()||b.deleteProgram(this._program):console.warn("memory leak: WebGLProgram has not been deleted because WebGLRenderingContext is not available anymore."),this._program=void 0}for(var c in this._attributesByName)this._attributesByName.hasOwnProperty(c)&&this._attributesByName[c].contextFree();for(var d in this._uniforms)this._uniforms.hasOwnProperty(d)&&this._uniforms[d].contextFree();a.prototype.contextFree.call(this)},Object.defineProperty(b.prototype,"vertexShaderSrc",{get:function(){return this._vertexShaderSrc},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"fragmentShaderSrc",{get:function(){return this._fragmentShaderSrc},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"attributeNames",{get:function(){var a=this._attributesByName;return a?Object.keys(a):void 0},set:function(a){throw new Error(l["default"]("attributeNames").message)},enumerable:!0,configurable:!0}),b.prototype.enableAttrib=function(a){if("number"==typeof a)this.gl&&this.gl.enableVertexAttribArray(a);else{if("string"!=typeof a)throw new TypeError("indexOrName must have type number or string.");var b=this._attributesByName[a];b&&b.enable()}},b.prototype.enableAttribs=function(){var a=this._attributesByName;if(a)for(var b=Object.keys(a),c=0,d=b.length;c<d;c++)a[b[c]].enable()},b.prototype.disableAttrib=function(a){if("number"==typeof a)this.gl&&this.gl.disableVertexAttribArray(a);else{if("string"!=typeof a)throw new TypeError("indexOrName must have type number or string.");var b=this._attributesByName[a];b&&b.disable()}},b.prototype.disableAttribs=function(){var a=this._attributesByName;if(a)for(var b=Object.keys(a),c=0,d=b.length;c<d;c++)a[b[c]].disable()},b.prototype.attrib=function(a,b,c,e,f,g){void 0===e&&(e=!1),void 0===f&&(f=0),void 0===g&&(g=0);var h=this.getAttrib(a);return h&&(b.bind(),h.enable(),h.config(c,d["default"].FLOAT,e,f,g)),this},b.prototype.getAttrib=function(a){if("number"==typeof a)return this._attributesByIndex[a];if("string"==typeof a)return this._attributesByName[a];throw new TypeError("indexOrName must be a number or a string")},b.prototype.getAttribLocation=function(a){var b=this._attributesByName[a];return b?b.index:-1},b.prototype.getUniform=function(a){var b=this._uniforms;return b[a]?b[a]:void 0},b.prototype.hasUniform=function(a){return j["default"]("name",a),e["default"](this._uniforms[a])},b.prototype.activeTexture=function(a){this.gl&&this.gl.activeTexture(a)},b.prototype.uniform1i=function(a,b){var c=this.getUniform(a);c&&c.uniform1i(b)},b.prototype.uniform1f=function(a,b){var c=this.getUniform(a);c&&c.uniform1f(b)},b.prototype.uniform2f=function(a,b,c){var d=this._uniforms[a];d&&d.uniform2f(b,c)},b.prototype.uniform3f=function(a,b,c,d){var e=this._uniforms[a];e&&e.uniform3f(b,c,d)},b.prototype.uniform4f=function(a,b,c,d,e){var f=this._uniforms[a];f&&f.uniform4f(b,c,d,e)},b.prototype.uniform=function(a,b){var c=this._uniforms[a];if(c)if("number"==typeof b)c.uniform1f(b);else if(b)switch(b.length){case 1:c.uniform1f(b[0]);break;case 2:c.uniform2f(b[0],b[1]);break;case 3:c.uniform3f(b[0],b[1],b[2]);break;case 4:c.uniform4f(b[0],b[1],b[2],b[3])}return this},b.prototype.use=function(){var a=this.gl;return a?a.useProgram(this._program):console.warn(this.getLoggingName()+".use() missing WebGL rendering context."),this},b.prototype.matrix2fv=function(a,b,c){void 0===c&&(c=!1);var d=this._uniforms[a];return d&&d.matrix2fv(c,b),this},b.prototype.matrix3fv=function(a,b,c){void 0===c&&(c=!1);var d=this._uniforms[a];return d&&d.matrix3fv(c,b),this},b.prototype.matrix4fv=function(a,b,c){void 0===c&&(c=!1);var d=this._uniforms[a];return d&&d.matrix4fv(c,b),this},b.prototype.vector2fv=function(a,b){var c=this._uniforms[a];c&&c.uniform2fv(b)},b.prototype.vector3fv=function(a,b){var c=this._uniforms[a];c&&c.uniform3fv(b)},b.prototype.vector4fv=function(a,b){var c=this._uniforms[a];c&&c.uniform4fv(b)},b.prototype.drawArrays=function(a,b,c){var d=this.gl;return d&&d.drawArrays(a,b,c),this},b.prototype.drawElements=function(a,b,c,d){var e=this.gl;return e&&e.drawElements(a,b,c,d),this},b}(m["default"]),a("ShaderMaterial",o),a("default",o)}}}),System.register("davinci-eight/materials/PointMaterial.js",["../materials/GraphicsProgramBuilder","../core/GraphicsProgramSymbols","../checks/isDefined","../checks/isNull","../checks/isUndefined","./ShaderMaterial","../checks/mustBeObject"],function(a,b){"use strict";function c(a){i["default"](a)||j["default"](a)?(a={kind:"PointMaterial",attributes:{},uniforms:{}},a.attributes[g["default"].ATTRIBUTE_POSITION]=3,a.uniforms[g["default"].UNIFORM_COLOR]="vec3",a.uniforms[g["default"].UNIFORM_OPACITY]="float",a.uniforms[g["default"].UNIFORM_MODEL_MATRIX]="mat4",a.uniforms[g["default"].UNIFORM_PROJECTION_MATRIX]="mat4",a.uniforms[g["default"].UNIFORM_VIEW_MATRIX]="mat4",a.uniforms[g["default"].UNIFORM_POINT_SIZE]="float"):l["default"]("options",a);for(var b=h["default"](a.attributes)?a.attributes:{},c=h["default"](a.uniforms)?a.uniforms:{},d=new f["default"],e=Object.keys(b),k=0;k<e.length;k++){var m=e[k],n=b[m];d.attribute(m,n)}for(var o=Object.keys(c),p=0;p<o.length;p++){var q=o[p],r=c[q];d.uniform(q,r)}return d}function d(a){return c(a).vertexShaderSrc()}function e(a){return c(a).fragmentShaderSrc()}var f,g,h,i,j,k,l,m,n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){m=function(a){function b(b,c,f){void 0===f&&(f=0);var g=a.call(this,d(c),e(c),[],b,f+1)||this;return g.setLoggingName("PointMaterial"),0===f&&g.synchUp(),g}return n(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("PointMaterial"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(k.ShaderMaterial),a("PointMaterial",m),a("default",m)}}}),System.register("davinci-eight/visual/materialFromOptions.js",["../core/GraphicsProgramSymbols","../checks/isDefined","../materials/LineMaterial","../materials/MeshMaterial","../materials/PointMaterial","../geometries/SimplexMode"],function(a,b){"use strict";function c(){var a={kind:"LineMaterial",attributes:{},uniforms:{}};return a.attributes[g["default"].ATTRIBUTE_POSITION]=3,a.uniforms[g["default"].UNIFORM_COLOR]="vec3",a.uniforms[g["default"].UNIFORM_OPACITY]="float",a.uniforms[g["default"].UNIFORM_MODEL_MATRIX]="mat4",a.uniforms[g["default"].UNIFORM_PROJECTION_MATRIX]="mat4",a.uniforms[g["default"].UNIFORM_VIEW_MATRIX]="mat4",a.uniforms[g["default"].UNIFORM_POINT_SIZE]="float",a}function d(){var a={kind:"LineMaterial",attributes:{},uniforms:{}};return a.attributes[g["default"].ATTRIBUTE_POSITION]=3,a.uniforms[g["default"].UNIFORM_COLOR]="vec3",a.uniforms[g["default"].UNIFORM_OPACITY]="float",a.uniforms[g["default"].UNIFORM_MODEL_MATRIX]="mat4",a.uniforms[g["default"].UNIFORM_PROJECTION_MATRIX]="mat4",a.uniforms[g["default"].UNIFORM_VIEW_MATRIX]="mat4",a}function e(a){var b={kind:"MeshMaterial",attributes:{},uniforms:{}};return a.colored=!h["default"](a.colored)||a.colored,a.reflective=!h["default"](a.reflective)||a.reflective,a.textured=!!h["default"](a.textured)&&a.textured,a.transparent=!h["default"](a.transparent)||a.transparent,b.attributes[g["default"].ATTRIBUTE_POSITION]=3,b.attributes[g["default"].ATTRIBUTE_NORMAL]=3,a.textured&&(b.attributes[g["default"].ATTRIBUTE_COORDS]=2),a.colored&&(b.uniforms[g["default"].UNIFORM_COLOR]="vec3"),a.transparent&&(b.uniforms[g["default"].UNIFORM_OPACITY]="float"),b.uniforms[g["default"].UNIFORM_MODEL_MATRIX]="mat4",b.uniforms[g["default"].UNIFORM_NORMAL_MATRIX]="mat3",b.uniforms[g["default"].UNIFORM_PROJECTION_MATRIX]="mat4",b.uniforms[g["default"].UNIFORM_VIEW_MATRIX]="mat4",b.uniforms[g["default"].UNIFORM_AMBIENT_LIGHT]="vec3",b.uniforms[g["default"].UNIFORM_DIRECTIONAL_LIGHT_COLOR]="vec3",b.uniforms[g["default"].UNIFORM_DIRECTIONAL_LIGHT_DIRECTION]="vec3",a.textured&&(b.uniforms[g["default"].UNIFORM_IMAGE]="sampler2D"),b}function f(a,b,f){switch(b){case l["default"].POINT:var g=c(),h=a.getCacheMaterial(g);if(h&&h instanceof k["default"])return h;var m=new k["default"](a,g);return a.putCacheMaterial(g,m),m;case l["default"].LINE:var g=d(),h=a.getCacheMaterial(g);if(h&&h instanceof i["default"])return h;var m=new i["default"](a,g);return a.putCacheMaterial(g,m),m;case l["default"].TRIANGLE:var g=e(f),h=a.getCacheMaterial(g);if(h&&h instanceof j["default"])return h;var m=new j["default"](a,g);return a.putCacheMaterial(g,m),m;default:throw new Error("simplexMode not specified for materialFromOptions")}}b&&b.id;a("default",f);var g,h,i,j,k,l;return{setters:[function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){}}}),System.register("davinci-eight/math/clamp.js",["../checks/mustBeNumber"],function(a,b){"use strict";function c(a,b,c){return d["default"]("x",a),d["default"]("min",b),d["default"]("max",c),a<b?b:a>c?c:a}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/math/VectorN.js",["../checks/isDefined","../checks/isUndefined","../core/Lockable","../checks/mustSatisfy"],function(a,b){"use strict";function c(a){return"push(value: "+a+"): number"}function d(a){return"pop(): "+a}function e(a){return a+" is not allowed for a fixed size vector"}function f(){return e(c("T"))}function g(){return e(d("T"))}var h,i,j,k,l;b&&b.id;return{setters:[function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=function(){function a(a,b,c){void 0===b&&(b=!1),this.lock_=j.lockable(),this.modified_=b,h["default"](c)?(this.size_=c,this.data_=a,k["default"]("data.length",a.length===c,function(){return""+c})):(this.size_=void 0,this.data_=a)}return a.prototype.isLocked=function(){return this.lock_.isLocked()},a.prototype.lock=function(){return this.lock_.lock()},a.prototype.unlock=function(a){return this.lock_.unlock(a)},Object.defineProperty(a.prototype,"coords",{get:function(){return this.data_},set:function(a){if(this.isLocked())throw new j.TargetLockedError("coords");this.data_=a,this.modified_=!0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"modified",{get:function(){return this.modified_},set:function(a){this.modified_=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this.coords.length},enumerable:!0,configurable:!0}),a.prototype.clone=function(){return new a(this.data_,this.modified_,this.size_)},a.prototype.getComponent=function(a){return this.coords[a]},a.prototype.pop=function(){if(this.isLocked())throw new j.TargetLockedError("pop");if(i["default"](this.size_))return this.coords.pop();throw new Error(g())},a.prototype.push=function(a){if(this.isLocked())throw new j.TargetLockedError("push");if(i["default"](this.size_)){var b=this.coords,c=b.push(a);return this.coords=b,c}throw new Error(f())},a.prototype.setComponent=function(a,b){if(this.isLocked())throw new j.TargetLockedError("setComponent");var c=this.coords,d=c[a];b!==d&&(c[a]=b,this.coords=c,this.modified_=!0)},a.prototype.toArray=function(a,b){void 0===a&&(a=[]),void 0===b&&(b=0);for(var c=this.coords,d=c.length,e=0;e<d;e++)a[b+e]=c[e];return a},a.prototype.toLocaleString=function(){return this.coords.toLocaleString()},a.prototype.toString=function(){return this.coords.toString()},a}(),a("VectorN",l),a("default",l)}}}),System.register("davinci-eight/math/Coords.js",["./VectorN"],function(a,b){"use strict";var c,d,e=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}return e(b,a),b.prototype.approx=function(a){for(var b=0,c=this.coords,d=c.length,e=0;e<d;e++)b=Math.max(b,Math.abs(c[e]));for(var f=b*Math.pow(10,-a),e=0;e<d;e++)Math.abs(c[e])<f&&(c[e]=0)},b.prototype.equals=function(a){if(a instanceof b){for(var c=this.coords.length,d=0;d<c;d++)if(this.coords[d]!==a.coords[d])return!1;return!0}return!1},b}(c.VectorN),a("Coords",d),a("default",d)}}}),System.register("davinci-eight/core/principalAngle.js",[],function(a,b){"use strict";function c(a){return a>2*Math.PI?c(a-2*Math.PI):a<0?c(a+2*Math.PI):a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/core/Color.js",["../math/clamp","../math/Coords","../checks/isDefined","../core/Lockable","../checks/mustBeGE","../checks/mustBeLE","../checks/mustBeNumber","./principalAngle"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){k=0,l=1,m=2,n=function(a,b,c){var d=255;return new o(a/d,b/d,c/d)},o=function(a){function b(b,c,d){var e=a.call(this,[b,c,d],!1,3)||this;return g["default"]("r",b,0),h["default"]("r",b,1),g["default"]("g",c,0),h["default"]("g",c,1),g["default"]("b",d,0),h["default"]("b",d,1),e}return p(b,a),Object.defineProperty(b.prototype,"r",{get:function(){return this.coords[k]},set:function(a){if(this.isLocked())throw new f.TargetLockedError("set r");this.coords[k]=c["default"](a,0,1);
},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"red",{get:function(){return this.coords[k]},set:function(a){if(this.isLocked())throw new f.TargetLockedError("set red");this.coords[k]=c["default"](a,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"g",{get:function(){return this.coords[l]},set:function(a){if(this.isLocked())throw new f.TargetLockedError("set g");this.coords[l]=c["default"](a,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"green",{get:function(){return this.coords[l]},set:function(a){if(this.isLocked())throw new f.TargetLockedError("set green");this.coords[l]=c["default"](a,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"b",{get:function(){return this.coords[m]},set:function(a){if(this.isLocked())throw new f.TargetLockedError("set b");this.coords[m]=c["default"](a,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"blue",{get:function(){return this.coords[m]},set:function(a){if(this.isLocked())throw new f.TargetLockedError("set blue");this.coords[m]=c["default"](a,0,1)},enumerable:!0,configurable:!0}),b.prototype.approx=function(b){return this.isLocked()?f.lock(this.clone().approx(b)):(a.prototype.approx.call(this,b),this)},b.prototype.clone=function(){return new b(this.r,this.g,this.b)},b.prototype.copy=function(a){if(this.isLocked())throw new f.TargetLockedError("copy");return e["default"](a)?(this.r=a.r,this.g=a.g,this.b=a.b):(this.r=Math.random(),this.g=Math.random(),this.b=Math.random()),this},b.prototype.lerp=function(a,b){return this.isLocked()?f.lock(this.clone().lerp(a,b)):(this.r+=(a.r-this.r)*b,this.g+=(a.g-this.g)*b,this.b+=(a.b-this.b)*b,this)},Object.defineProperty(b.prototype,"luminance",{get:function(){return b.luminance(this.r,this.g,this.b)},enumerable:!0,configurable:!0}),b.prototype.scale=function(a){return this.isLocked()?f.lock(this.clone().scale(a)):(this.r=this.r*a,this.g=this.g*a,this.b=this.b*a,this)},b.prototype.toExponential=function(a){return this.toString()},b.prototype.toFixed=function(a){return this.toString()},b.prototype.toPrecision=function(a){return this.toString()},b.prototype.toString=function(a){return"Color("+this.r.toString(a)+", "+this.g.toString(a)+", "+this.b.toString(a)+")"},b.copy=function(a){return new b(a.r,a.g,a.b)},b.luminance=function(a,b,c){i["default"]("r",a),i["default"]("g",b),i["default"]("b",c);var d=Math.pow,e=2.2;return.2126*d(a,e)+.7152*d(c,e)+.0722*d(c,e)},b.fromHSL=function(a,c,d){function e(a,c,e){var g=d-.5*f;return new b(a+g,c+g,e+g)}i["default"]("H",a),i["default"]("S",c),i["default"]("L",d);var f=(1-Math.abs(2*d-1))*c,g=j["default"](a)/Math.PI*3%6,h=f*(1-Math.abs(g%2-1));return g>=0&&g<1?e(f,h,0):g>=1&&g<2?e(h,f,0):g>=2&&g<3?e(0,f,f*(g-2)):g>=3&&g<4?e(0,f*(4-g),f):g>=4&&g<5?e(h,0,f):g>=5&&g<6?e(f,0,h):e(0,0,0)},b.fromRGB=function(a,d,e){return i["default"]("r",a),i["default"]("g",d),i["default"]("b",e),new b(c["default"](a,0,1),c["default"](d,0,1),c["default"](e,0,1))},b.isInstance=function(a){return a instanceof b},b.lerp=function(a,d,e){return b.copy(a).lerp(d,c["default"](e,0,1))},b.mustBe=function(a,c){if(b.isInstance(c))return c;throw new Error(a+" must be a Color.")},b.random=function(){return b.fromRGB(Math.random(),Math.random(),Math.random())},b}(d.Coords),o.black=f.lock(new o(0,0,0)),o.blue=f.lock(new o(0,0,1)),o.green=f.lock(new o(0,1,0)),o.cyan=f.lock(new o(0,1,1)),o.red=f.lock(new o(1,0,0)),o.magenta=f.lock(new o(1,0,1)),o.yellow=f.lock(new o(1,1,0)),o.white=f.lock(new o(1,1,1)),o.gray=f.lock(new o(.5,.5,.5)),o.blueviolet=f.lock(n(138,43,226)),o.chartreuse=f.lock(n(127,255,0)),o.cobalt=f.lock(n(61,89,171)),o.hotpink=f.lock(n(255,105,180)),o.lime=f.lock(n(0,255,0)),o.slateblue=f.lock(n(113,113,198)),o.springgreen=f.lock(n(0,255,127)),o.teal=f.lock(n(56,142,142)),a("Color",o),a("default",o)}}}),System.register("davinci-eight/facets/ColorFacet.js",["../core/Color","../checks/mustBeNumber","../core/GraphicsProgramSymbols"],function(a,b){"use strict";var c,d,e,f;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(a){void 0===a&&(a=e["default"].UNIFORM_COLOR),this.uColorName=a,this.color=c["default"].fromRGB(1,1,1)}return Object.defineProperty(a.prototype,"r",{get:function(){return this.color.r},set:function(a){d["default"]("r",a),this.color.r=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"g",{get:function(){return this.color.g},set:function(a){d["default"]("g",a),this.color.g=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"b",{get:function(){return this.color.b},set:function(a){d["default"]("b",a),this.color.b=a},enumerable:!0,configurable:!0}),a.prototype.scaleRGB=function(a){return this.r*=a,this.g*=a,this.b*=a,this},a.prototype.setRGB=function(a,b,c){return this.r=a,this.g=b,this.b=c,this},a.prototype.setUniforms=function(a){var b=this.uColorName;if(b){var c=this.color;a.uniform3f(b,c.r,c.g,c.b)}},a}(),f.PROP_RGB="rgb",f.PROP_RED="r",f.PROP_GREEN="g",f.PROP_BLUE="b",a("ColorFacet",f),a("default",f)}}}),System.register("davinci-eight/checks/isGE.js",[],function(a,b){"use strict";function c(a,b){return a>=b}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeGE.js",["../checks/mustSatisfy","../checks/isGE"],function(a,b){"use strict";function c(a,b,c,f){return d["default"](a,e["default"](b,c),function(){return"be greater than or equal to "+c},f),b}b&&b.id;a("default",c);var d,e;return{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/checks/isLE.js",[],function(a,b){"use strict";function c(a,b){return a<=b}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeLE.js",["../checks/mustSatisfy","../checks/isLE"],function(a,b){"use strict";function c(a,b,c,f){return d["default"](a,e["default"](b,c),function(){return"be less than or equal to "+c},f),b}b&&b.id;a("default",c);var d,e;return{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/facets/OpacityFacet.js",["../checks/mustBeGE","../checks/mustBeLE","../checks/mustBeNumber","../core/GraphicsProgramSymbols"],function(a,b){"use strict";var c,d,e,f,g;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(){function a(a){void 0===a&&(a=1),e["default"]("opacity",a),c["default"]("opacity",a,0),d["default"]("opacity",a,1),this.opacity=a}return a.prototype.setUniforms=function(a){a.uniform1f(f["default"].UNIFORM_OPACITY,this.opacity)},a}(),a("OpacityFacet",g),a("default",g)}}}),System.register("davinci-eight/facets/PointSizeFacet.js",["../checks/mustBeInteger","../core/GraphicsProgramSymbols"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a){void 0===a&&(a=2),this.pointSize=c["default"]("pointSize",a)}return a.prototype.setUniforms=function(a){a.uniform1f(d["default"].UNIFORM_POINT_SIZE,this.pointSize)},a}(),a("PointSizeFacet",e),a("default",e)}}}),System.register("davinci-eight/collections/StringShareableMap.js",["../core/ShareableBase"],function(a,b){"use strict";var c,d,e=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(a){function b(){var b=a.call(this)||this;return b.elements={},b.setLoggingName("StringShareableMap"),b}return e(b,a),b.prototype.destructor=function(b){var c=this;this.forEach(function(a){c.putWeakRef(a,void 0)}),a.prototype.destructor.call(this,b+1)},b.prototype.exists=function(a){var b=this.elements[a];return!!b},b.prototype.get=function(a){var b=this.elements[a];return b?(b.addRef&&b.addRef(),b):void 0},b.prototype.getWeakRef=function(a){return this.elements[a]},b.prototype.put=function(a,b){b&&b.addRef&&b.addRef(),this.putWeakRef(a,b)},b.prototype.putWeakRef=function(a,b){var c=this.elements,d=c[a];d&&d.release&&d.release(),c[a]=b},b.prototype.forEach=function(a){for(var b=this.keys,c=0,d=b.length;c<d;c++){var e=b[c];a(e,this.elements[e])}},Object.defineProperty(b.prototype,"keys",{get:function(){return Object.keys(this.elements)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"values",{get:function(){for(var a=[],b=this.keys,c=0,d=b.length;c<d;c++){var e=b[c];a.push(this.elements[e])}return a},enumerable:!0,configurable:!0}),b.prototype.remove=function(a){var b=this.elements[a];return delete this.elements[a],b},b}(c.ShareableBase),a("default",d)}}}),System.register("davinci-eight/core/Drawable.js",["../base/exchange","./GraphicsProgramSymbols","../checks/isObject","../checks/isNull","../checks/isNumber","../checks/isUndefined","../checks/mustBeBoolean","../checks/mustBeNonNullObject","../facets/OpacityFacet","../facets/PointSizeFacet","../core/ShareableContextConsumer","../collections/StringShareableMap"],function(a,b){"use strict";function c(a,b){a&&(a.hasUniform(e["default"].UNIFORM_OPACITY)?h["default"](b.opacity)||(b.opacity=1):b.removeFacet(p),a.hasUniform(e["default"].UNIFORM_POINT_SIZE)?h["default"](b.pointSize)||(b.pointSize=2):b.removeFacet(q))}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a}],execute:function(){p="opacity",q="pointSize",r="Drawable",s=function(a){function b(b,c,d,e){void 0===e&&(e=0);var g=a.call(this,k["default"]("contextManager",d))||this;return g._visible=!0,g._transparent=!1,g.facetMap=new o["default"],g.setLoggingName(r),f["default"](b)&&(g.geometry=b),f["default"](c)&&(g.material=c),0===e&&g.synchUp(),g}return t(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName(r),0===b&&this.synchUp()},b.prototype.destructor=function(b){this.facetMap.release(),0===b&&this.cleanUp(),this._geometry=d["default"](this._geometry,void 0),this._material=d["default"](this._material,void 0),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"opacity",{get:function(){var a=this.getFacet(p);return a?a.opacity:void 0},set:function(a){if(h["default"](a)){var b=this.getFacet(p);b?b.opacity=a:this.setFacet(p,new l["default"](a))}else{if(!i["default"](a)&&!g["default"](a))throw new TypeError("opacity must be a number, undefined, or null.");this.removeFacet(p)}},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"pointSize",{get:function(){var a=this.getFacet(q);return a?a.pointSize:void 0},set:function(a){if(h["default"](a)){var b=this.getFacet(q);b?b.pointSize=a:this.setFacet(q,new m["default"](a))}else{if(!i["default"](a)&&!g["default"](a))throw new TypeError("pointSize must be a number, undefined, or null.");this.removeFacet(q)}},enumerable:!0,configurable:!0}),b.prototype.bind=function(){return this._geometry.bind(this._material),this},b.prototype.setUniforms=function(){for(var a=this._material,b=this.facetMap.keys,c=b.length,d=0;d<c;d++){var e=b[d],f=this.facetMap.getWeakRef(e);f.setUniforms(a)}return this},b.prototype.draw=function(){return this._visible&&this._geometry&&this._geometry.draw(),this},b.prototype.contextFree=function(){this._geometry&&this._geometry.contextFree&&this._geometry.contextFree(),this._material&&this._material.contextFree&&this._material.contextFree(),a.prototype.contextFree&&a.prototype.contextFree.call(this)},b.prototype.contextGain=function(){this._geometry&&this._geometry.contextGain&&this._geometry.contextGain(),this._material&&this._material.contextGain&&this._material.contextGain(),c(this._material,this),a.prototype.contextGain&&a.prototype.contextGain.call(this)},b.prototype.contextLost=function(){this._geometry&&this._geometry.contextLost&&this._geometry.contextLost(),this._material&&this._material.contextLost&&this._material.contextLost(),a.prototype.contextLost&&a.prototype.contextLost.call(this)},b.prototype.getFacet=function(a){return this.facetMap.get(a)},b.prototype.render=function(a){return this._visible&&this.use().bind().setAmbients(a).setUniforms().draw().unbind(),this},b.prototype.setAmbients=function(a){for(var b=a.length,c=0;c<b;c++){var d=a[c];d.setUniforms(this._material)}return this},b.prototype.removeFacet=function(a){return this.facetMap.remove(a)},b.prototype.setFacet=function(a,b){this.facetMap.put(a,b)},b.prototype.unbind=function(){return this._geometry.unbind(this._material),this},b.prototype.use=function(){return this._material.use(),this},Object.defineProperty(b.prototype,"geometry",{get:function(){return d["default"](void 0,this._geometry)},set:function(a){this._geometry=d["default"](this._geometry,a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"material",{get:function(){return d["default"](void 0,this._material)},set:function(a){this._material=d["default"](this._material,a),c(this._material,this)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"visible",{get:function(){return this._visible},set:function(a){var b=this;j["default"]("visible",a,function(){return b.getLoggingName()}),this._visible=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"transparent",{get:function(){return this._transparent},set:function(a){var b=this;j["default"]("transparent",a,function(){return b.getLoggingName()}),this._transparent=a},enumerable:!0,configurable:!0}),b}(n["default"]),a("Drawable",s),a("default",s)}}}),System.register("davinci-eight/math/det3x3.js",[],function(a,b){"use strict";function c(a){var b=a[0],c=a[3],d=a[6],e=a[1],f=a[4],g=a[7],h=a[2],i=a[5],j=a[8];return b*f*j+c*g*h+d*e*i-b*g*i-c*e*j-d*f*h}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/inv3x3.js",["../math/det3x3"],function(a,b){"use strict";function c(a,b){var c=d["default"](a),e=a[0],f=a[3],g=a[6],h=a[1],i=a[4],j=a[7],k=a[2],l=a[5],m=a[8],n=i*m-j*l,o=g*l-f*m,p=f*j-g*i,q=j*k-h*m,r=e*m-g*k,s=g*h-e*j,t=h*l-i*k,u=f*k-e*l,v=e*i-f*h,w=1/c;b[0]=n*w,b[3]=o*w,b[6]=p*w,b[1]=q*w,b[4]=r*w,b[7]=s*w,b[2]=t*w,b[5]=u*w,b[8]=v*w}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/math/mul3x3.js",[],function(a,b){"use strict";function c(a,b,c){var d=a[0],e=a[3],f=a[6],g=a[1],h=a[4],i=a[7],j=a[2],k=a[5],l=a[8],m=b[0],n=b[3],o=b[6],p=b[1],q=b[4],r=b[7],s=b[2],t=b[5],u=b[8];return c[0]=d*m+e*p+f*s,c[3]=d*n+e*q+f*t,c[6]=d*o+e*r+f*u,c[1]=g*m+h*p+i*s,c[4]=g*n+h*q+i*t,c[7]=g*o+h*r+i*u,c[2]=j*m+k*p+l*s,c[5]=j*n+k*q+l*t,c[8]=j*o+k*r+l*u,c}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/Matrix3.js",["../math/AbstractMatrix","../math/det3x3","../math/inv3x3","../core/Lockable","../math/mul3x3","../checks/mustBeNumber"],function(a,b){"use strict";function c(a,b,c){var d=a[0],e=a[3],f=a[6],g=a[1],h=a[4],i=a[7],j=a[2],k=a[5],l=a[8],m=b[0],n=b[3],o=b[6],p=b[1],q=b[4],r=b[7],s=b[2],t=b[5],u=b[8];c[0]=d+m,c[3]=e+n,c[6]=f+o,c[1]=g+p,c[4]=h+q,c[7]=i+r,c[2]=j+s,c[5]=k+t,c[8]=l+u}var d,e,f,g,h,i,j,k=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function b(b){return a.call(this,b,3)||this}return k(b,a),b.prototype.add=function(a){if(this.isLocked())throw new g.TargetLockedError("add");return this.add2(this,a)},b.prototype.add2=function(a,b){return c(a.elements,b.elements,this.elements),this},b.prototype.clone=function(){return new b(new Float32Array([0,0,0,0,0,0,0,0,0])).copy(this)},b.prototype.det=function(){return e["default"](this.elements)},b.prototype.invertUpperLeft=function(a,b){void 0===b&&(b=!1);var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9],d[1]=-c[10]*c[1]+c[2]*c[9],d[2]=c[6]*c[1]-c[2]*c[5],d[3]=-c[10]*c[4]+c[6]*c[8],d[4]=c[10]*c[0]-c[2]*c[8],d[5]=-c[6]*c[0]+c[2]*c[4],d[6]=c[9]*c[4]-c[5]*c[8],d[7]=-c[9]*c[0]+c[1]*c[8],d[8]=c[5]*c[0]-c[1]*c[4];var e=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===e){var f="Matrix3.invertUpperLeft(): can't invert matrix, determinant is 0";if(b)throw new Error(f);return console.warn(f),this.one(),this}return this.scale(1/e),this},b.prototype.inv=function(){return f["default"](this.elements,this.elements),this},b.prototype.isOne=function(){var a=this.elements,b=a[0],c=a[3],d=a[6],e=a[1],f=a[4],g=a[7],h=a[2],i=a[5],j=a[8];return 1===b&&0===c&&0===d&&0===e&&1===f&&0===g&&0===h&&0===i&&1===j},b.prototype.isZero=function(){var a=this.elements,b=a[0],c=a[3],d=a[6],e=a[1],f=a[4],g=a[7],h=a[2],i=a[5],j=a[8];return 0===b&&0===c&&0===d&&0===e&&0===f&&0===g&&0===h&&0===i&&0===j},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.rmul=function(a){return h["default"](a.elements,this.elements,this.elements),this},b.prototype.mul2=function(a,b){return h["default"](a.elements,b.elements,this.elements),this},b.prototype.neg=function(){return this.scale(-1)},b.prototype.normalFromMatrix4=function(a){return this.invertUpperLeft(a).transpose()},b.prototype.one=function(){return this.set(1,0,0,0,1,0,0,0,1)},b.prototype.reflection=function(a){var b=i["default"]("n.x",a.x),c=i["default"]("n.y",a.y),d=-2*b*c,e=1-2*b*b,f=1-2*c*c;return this.set(e,d,0,d,f,0,0,0,1),this},b.prototype.row=function(a){var b=this.elements;return[b[0+a],b[3+a],b[6+a]]},b.prototype.rotate=function(a){return this.rmul(b.rotation(a))},b.prototype.rotation=function(a){var b=a.a,c=a.b,d=b*b-c*c,e=2*b*c;return this.set(d,e,0,-e,d,0,0,0,1),this},b.prototype.scale=function(a){var b=this.elements;return b[0]*=a,b[3]*=a,b[6]*=a,b[1]*=a,b[4]*=a,b[7]*=a,b[2]*=a,b[5]*=a,b[8]*=a,this},b.prototype.set=function(a,b,c,d,e,f,g,h,i){var j=this.elements;return j[0]=a,j[3]=b,j[6]=c,j[1]=d,j[4]=e,j[7]=f,j[2]=g,j[5]=h,j[8]=i,this},b.prototype.sub=function(a){var b=this.elements,c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[5],l=a.elements,m=l[0],n=l[1],o=l[2],p=l[3],q=l[4],r=l[5],s=l[6],t=l[7],u=l[8],v=c-m,w=d-n,x=e-o,y=f-p,z=g-q,A=h-r,B=i-s,C=j-t,D=k-u;return this.set(v,y,B,w,z,C,x,A,D)},b.prototype.toExponential=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toExponential(a)}).join(" "));return b.join("\n")},b.prototype.toFixed=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toFixed(a)}).join(" "));return b.join("\n")},b.prototype.toPrecision=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toPrecision(a)}).join(" "));return b.join("\n")},b.prototype.toString=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toString(a)}).join(" "));return b.join("\n")},b.prototype.translation=function(a){var b=a.x,c=a.y;return this.set(1,0,b,0,1,c,0,0,1)},b.prototype.transpose=function(){var a,b=this.elements;return a=b[1],b[1]=b[3],b[3]=a,a=b[2],b[2]=b[6],b[6]=a,a=b[5],b[5]=b[7],b[7]=a,this},b.prototype.zero=function(){return this.set(0,0,0,0,0,0,0,0,0)},b.prototype.__add__=function(a){return a instanceof b?this.clone().add(a):void 0},b.prototype.__radd__=function(a){return a instanceof b?a.clone().add(this):void 0},b.prototype.__mul__=function(a){return a instanceof b?this.clone().mul(a):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__rmul__=function(a){return a instanceof b?a.clone().mul(this):"number"==typeof a?this.clone().scale(a):void 0},b.prototype.__pos__=function(){return this.clone()},b.prototype.__neg__=function(){return this.clone().scale(-1)},b.prototype.__sub__=function(a){return a instanceof b?this.clone().sub(a):void 0},b.prototype.__rsub__=function(a){return a instanceof b?a.clone().sub(this):void 0},b.reflection=function(a){return b.zero.clone().reflection(a)},b.rotation=function(a){return b.zero.clone().rotation(a)},b.translation=function(a){return b.zero.clone().translation(a)},b}(d["default"]),j.one=g.lock(new j(new Float32Array([1,0,0,0,1,0,0,0,1]))),j.zero=g.lock(new j(new Float32Array([0,0,0,0,0,0,0,0,0]))),a("Matrix3",j),a("default",j)}}}),System.register("davinci-eight/checks/mustBeDefined.js",["../checks/mustSatisfy","../checks/isDefined"],function(a,b){"use strict";function c(){return"not be 'undefined'"}function d(a,b,d){return e["default"](a,f["default"](b),c,d),b}b&&b.id;a("default",d);var e,f;return{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/checks/expectArg.js",["../checks/isUndefined","../checks/mustBeNumber"],function(a,b){"use strict";function c(a,b){return e["default"](b)?a:b()}function d(a,b){var d={toSatisfy:function(a,b){if(e["default"](a))throw new Error("condition must be specified");if(e["default"](b))throw new Error("message must be specified");if(!a)throw new Error(b);return d},toBeBoolean:function(e){var f=typeof b;if("boolean"!==f)throw new Error(c("Expecting argument "+a+": "+f+" to be a boolean.",e));return d},toBeDefined:function(){var c=typeof b;if("undefined"===c){var e="Expecting argument "+a+": "+c+" to be defined.";throw new Error(e)}return d},toBeInClosedInterval:function(c,e){var g=b,h=g;if(f["default"]("x",h),h>=c&&h<=e)return d;var i="Expecting argument "+a+" => "+b+" to be in the range ["+c+", "+e+"].";throw new Error(i)},toBeFunction:function(){var c=typeof b;if("function"!==c){var e="Expecting argument "+a+": "+c+" to be a function.";throw new Error(e)}return d},toBeNumber:function(e){var f=typeof b;if("number"!==f)throw new Error(c("Expecting argument "+a+": "+f+" to be a number.",e));return d},toBeObject:function(e){var f=typeof b;if("object"!==f)throw new Error(c("Expecting argument "+a+": "+f+" to be an object.",e));return d},toBeString:function(){var c=typeof b;if("string"!==c){var e="Expecting argument "+a+": "+c+" to be a string.";throw new Error(e)}return d},toBeUndefined:function(){var c=typeof b;if("undefined"!==c){var e="Expecting argument "+a+": "+c+" to be undefined.";throw new Error(e)}return d},toNotBeNull:function(){if(null===b){var c="Expecting argument "+a+" to not be null.";throw new Error(c)}return d},get value(){return b}};return d}b&&b.id;a("default",d);var e,f;return{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/math/AbstractMatrix.js",["../core/Lockable","../checks/mustBeDefined","../checks/mustBeInteger","../checks/expectArg","../i18n/readOnly"],function(a,b){"use strict";var c,d,e,f,g,h;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(){function a(a,b){this.lock_=c.lockable(),this.elements_=d["default"]("elements",a),this.dimensions_=e["default"]("dimensions",b),this.length_=b*b,f["default"]("elements",a).toSatisfy(a.length===this.length_,"elements must have length "+this.length_),this.modified=!1}return a.prototype.isLocked=function(){return this.lock_.isLocked()},a.prototype.lock=function(){return this.lock_.lock()},a.prototype.unlock=function(a){return this.lock_.unlock(a)},Object.defineProperty(a.prototype,"dimensions",{get:function(){return this.dimensions_},set:function(a){throw new Error(g["default"]("dimensions").message)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"elements",{get:function(){return this.elements_},set:function(a){if(this.isLocked())throw new c.TargetLockedError("elements");f["default"]("elements",a).toSatisfy(a.length===this.length_,"elements length must be "+this.length_),this.elements_=a},enumerable:!0,configurable:!0}),a.prototype.copy=function(a){if(this.isLocked())throw new c.TargetLockedError("copy");return this.elements.set(a.elements),this},a.prototype.getElement=function(a,b){return this.elements[a+b*this.dimensions_]},a.prototype.isOne=function(){for(var a=0;a<this.dimensions_;a++)for(var b=0;b<this.dimensions_;b++){var c=this.getElement(a,b);if(a===b){if(1!==c)return!1}else if(0!==c)return!1}return!0},a.prototype.setElement=function(a,b,d){if(this.isLocked())throw new c.TargetLockedError("setElement");this.elements[a+b*this.dimensions_]=d},a}(),a("AbstractMatrix",h),a("default",h)}}}),System.register("davinci-eight/math/det4x4.js",[],function(a,b){"use strict";function c(a){var b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],i=a[13],j=a[2],k=a[6],l=a[10],m=a[14],n=a[3],o=a[7],p=a[11],q=a[15],r=b*g,s=b*h,t=b*i,u=c*f,v=c*h,w=c*i,x=d*f,y=d*g,z=d*i,A=e*f,B=e*g,C=e*h;return n*((C-z)*k+(w-B)*l+(y-v)*m)+o*((z-C)*j+(A-t)*l+(s-x)*m)+p*((B-w)*j+(t-A)*k+(u-r)*m)+q*((v-y)*j+(x-s)*k+(r-u)*l)}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/inv4x4.js",[],function(a,b){"use strict";function c(a,b){var c=a[0],d=a[4],e=a[8],f=a[12],g=a[1],h=a[5],i=a[9],j=a[13],k=a[2],l=a[6],m=a[10],n=a[14],o=a[3],p=a[7],q=a[11],r=a[15],s=i*n*p-j*m*p+j*l*q-h*n*q-i*l*r+h*m*r,t=f*m*p-e*n*p-f*l*q+d*n*q+e*l*r-d*m*r,u=e*j*p-f*i*p+f*h*q-d*j*q-e*h*r+d*i*r,v=f*i*l-e*j*l-f*h*m+d*j*m+e*h*n-d*i*n,w=j*m*o-i*n*o-j*k*q+g*n*q+i*k*r-g*m*r,x=e*n*o-f*m*o+f*k*q-c*n*q-e*k*r+c*m*r,y=f*i*o-e*j*o-f*g*q+c*j*q+e*g*r-c*i*r,z=e*j*k-f*i*k+f*g*m-c*j*m-e*g*n+c*i*n,A=h*n*o-j*l*o+j*k*p-g*n*p-h*k*r+g*l*r,B=f*l*o-d*n*o-f*k*p+c*n*p+d*k*r-c*l*r,C=d*j*o-f*h*o+f*g*p-c*j*p-d*g*r+c*h*r,D=f*h*k-d*j*k-f*g*l+c*j*l+d*g*n-c*h*n,E=i*l*o-h*m*o-i*k*p+g*m*p+h*k*q-g*l*q,F=d*m*o-e*l*o+e*k*p-c*m*p-d*k*q+c*l*q,G=e*h*o-d*i*o-e*g*p+c*i*p+d*g*q-c*h*q,H=d*i*k-e*h*k+e*g*l-c*i*l-d*g*m+c*h*m,I=c*s+g*t+k*u+o*v,J=1/I;b[0]=s*J,b[4]=t*J,b[8]=u*J,b[12]=v*J,b[1]=w*J,b[5]=x*J,b[9]=y*J,b[13]=z*J,b[2]=A*J,b[6]=B*J,b[10]=C*J,b[14]=D*J,b[3]=E*J,b[7]=F*J,b[11]=G*J,b[15]=H*J}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/mul4x4.js",[],function(a,b){"use strict";function c(a,b,c){var d=a[0],e=a[4],f=a[8],g=a[12],h=a[1],i=a[5],j=a[9],k=a[13],l=a[2],m=a[6],n=a[10],o=a[14],p=a[3],q=a[7],r=a[11],s=a[15],t=b[0],u=b[4],v=b[8],w=b[12],x=b[1],y=b[5],z=b[9],A=b[13],B=b[2],C=b[6],D=b[10],E=b[14],F=b[3],G=b[7],H=b[11],I=b[15];return c[0]=d*t+e*x+f*B+g*F,c[4]=d*u+e*y+f*C+g*G,c[8]=d*v+e*z+f*D+g*H,c[12]=d*w+e*A+f*E+g*I,c[1]=h*t+i*x+j*B+k*F,c[5]=h*u+i*y+j*C+k*G,c[9]=h*v+i*z+j*D+k*H,c[13]=h*w+i*A+j*E+k*I,c[2]=l*t+m*x+n*B+o*F,c[6]=l*u+m*y+n*C+o*G,c[10]=l*v+m*z+n*D+o*H,c[14]=l*w+m*A+n*E+o*I,c[3]=p*t+q*x+r*B+s*F,c[7]=p*u+q*y+r*C+s*G,c[11]=p*v+q*z+r*D+s*H,c[15]=p*w+q*A+r*E+s*I,c}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/facets/frustumMatrix.js",["../checks/mustBeNumber","../checks/isDefined"],function(a,b){"use strict";function c(a,b,c,f,g,h,i){d["default"]("left",a),d["default"]("right",b),d["default"]("bottom",c),d["default"]("top",f),d["default"]("near",g),d["default"]("far",h);var j=e["default"](i)?i:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),k=2*g/(b-a),l=2*g/(f-c),m=(b+a)/(b-a),n=(f+c)/(f-c),o=-(h+g)/(h-g),p=-2*h*g/(h-g);return j[0]=k,j[4]=0,j[8]=m,j[12]=0,j[1]=0,j[5]=l,j[9]=n,j[13]=0,j[2]=0,j[6]=0,j[10]=o,j[14]=p,j[3]=0,j[7]=0,j[11]=-1,j[15]=0,j}b&&b.id;a("default",c);var d,e;return{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/facets/perspectiveArray.js",["./frustumMatrix","../checks/mustBeNumber"],function(a,b){"use strict";function c(a,b,c,f,g){e["default"]("fov",a),e["default"]("aspect",b),e["default"]("near",c),e["default"]("far",f);var h=c*Math.tan(.5*a),i=-h,j=i*b,k=h*b;return d["default"](j,k,i,h,c,f,g)}b&&b.id;a("default",c);var d,e;return{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/Matrix4.js",["../math/AbstractMatrix","./det4x4","../math/inv4x4","../core/Lockable","../math/mul4x4","../facets/perspectiveArray"],function(a,b){"use strict";function c(a,b,c){var d=a[0],e=a[4],f=a[8],g=a[12],h=a[1],i=a[5],j=a[9],k=a[13],l=a[2],m=a[6],n=a[10],o=a[14],p=a[3],q=a[7],r=a[11],s=a[15],t=b[0],u=b[4],v=b[8],w=b[12],x=b[1],y=b[5],z=b[9],A=b[13],B=b[2],C=b[6],D=b[10],E=b[14],F=b[3],G=b[7],H=b[11],I=b[15];c[0]=d+t,c[4]=e+u,c[8]=f+v,c[12]=g+w,c[1]=h+x,c[5]=i+y,c[9]=j+z,c[13]=k+A,c[2]=l+B,c[6]=m+C,c[10]=n+D,c[14]=o+E,c[3]=p+F,c[7]=q+G,c[11]=r+H,c[15]=s+I}var d,e,f,g,h,i,j,k=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(a){function b(b){return a.call(this,b,4)||this}return k(b,a),b.scaling=function(a){return b.one.clone().scaling(a)},b.translation=function(a){return b.one.clone().translation(a)},b.rotation=function(a){return b.one.clone().rotation(a)},b.prototype.add=function(a){if(this.isLocked())throw new g.TargetLockedError("add");return this.add2(this,a)},b.prototype.add2=function(a,b){return c(a.elements,b.elements,this.elements),this},b.prototype.clone=function(){return new b(new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])).copy(this)},b.prototype.compose=function(a,b,c){return this.scaling(a),this.rotate(b),this.translate(c),this},b.prototype.copy=function(a){return this.elements.set(a.elements),this},b.prototype.det=function(){return e["default"](this.elements)},b.prototype.inv=function(){return f["default"](this.elements,this.elements),this},b.prototype.one=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},b.prototype.scale=function(a){var b=this.elements;return b[0]*=a,b[4]*=a,b[8]*=a,b[12]*=a,b[1]*=a,b[5]*=a,b[9]*=a,b[13]*=a,b[2]*=a,b[6]*=a,b[10]*=a,b[14]*=a,b[3]*=a,b[7]*=a,b[11]*=a,b[15]*=a,this},b.prototype.transpose=function(){var a,b=this.elements;return a=b[1],b[1]=b[4],b[4]=a,a=b[2],b[2]=b[8],b[8]=a,a=b[6],b[6]=b[9],b[9]=a,a=b[3],b[3]=b[12],b[12]=a,a=b[7],b[7]=b[13],b[13]=a,a=b[11],b[11]=b[14],b[14]=a,this},b.prototype.frustum=function(a,b,c,d,e,f){var g=this.elements,h=2*e/(b-a),i=2*e/(d-c),j=(b+a)/(b-a),k=(d+c)/(d-c),l=-(f+e)/(f-e),m=-2*f*e/(f-e);return g[0]=h,g[4]=0,g[8]=j,g[12]=0,g[1]=0,g[5]=i,g[9]=k,g[13]=0,g[2]=0,g[6]=0,g[10]=l,g[14]=m,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this},b.prototype.perspective=function(a,b,c,d){return i["default"](a,b,c,d,this.elements),this},b.prototype.rotationAxis=function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,i=e*f,j=e*g;return this.set(i*f+c,i*g-d*h,i*h+d*g,0,i*g+d*h,j*g+c,j*h-d*f,0,i*h-d*g,j*h+d*f,e*h*h+c,0,0,0,0,1)},b.prototype.mul=function(a){return this.mul2(this,a)},b.prototype.mul2=function(a,b){return h["default"](a.elements,b.elements,this.elements),this},b.prototype.rmul=function(a){return this.mul2(a,this)},b.prototype.reflection=function(a){var b=a.x,c=a.y,d=a.z,e=-2*b*c,f=-2*c*d,g=-2*d*b,h=1-2*b*b,i=1-2*c*c,j=1-2*d*d;return this.set(h,e,g,0,e,i,f,0,g,f,j,0,0,0,0,1),this},b.prototype.rotate=function(a){return this.rmul(b.rotation(a));
},b.prototype.rotation=function(a){var b=-a.yz,c=-a.zx,d=-a.xy,e=a.a,f=b+b,g=c+c,h=d+d,i=b*f,j=b*g,k=b*h,l=c*g,m=c*h,n=d*h,o=e*f,p=e*g,q=e*h;return this.set(1-l-n,j-q,k+p,0,j+q,1-i-n,m-o,0,k-p,m+o,1-i-l,0,0,0,0,1),this},b.prototype.row=function(a){var b=this.elements;return[b[0+a],b[4+a],b[8+a],b[12+a]]},b.prototype.scaleXYZ=function(a){return this.rmul(b.scaling(a))},b.prototype.scaling=function(a){return this.set(a.x,0,0,0,0,a.y,0,0,0,0,a.z,0,0,0,0,1)},b.prototype.set=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.elements;return q[0]=a,q[4]=b,q[8]=c,q[12]=d,q[1]=e,q[5]=f,q[9]=g,q[13]=h,q[2]=i,q[6]=j,q[10]=k,q[14]=l,q[3]=m,q[7]=n,q[11]=o,q[15]=p,this},b.prototype.toExponential=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toExponential(a)}).join(" "));return b.join("\n")},b.prototype.toFixed=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toFixed(a)}).join(" "));return b.join("\n")},b.prototype.toPrecision=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toPrecision(a)}).join(" "));return b.join("\n")},b.prototype.toString=function(a){for(var b=[],c=0;c<this.dimensions;c++)b.push(this.row(c).map(function(b,c){return b.toString(a)}).join(" "));return b.join("\n")},b.prototype.translate=function(a){return this.rmul(b.translation(a))},b.prototype.translation=function(a){var b=a.x,c=a.y,d=a.z;return this.set(1,0,0,b,0,1,0,c,0,0,1,d,0,0,0,1)},b.prototype.zero=function(){return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},b.prototype.__mul__=function(a){return a instanceof b?g.lock(b.one.clone().mul2(this,a)):"number"==typeof a?g.lock(this.clone().scale(a)):void 0},b.prototype.__rmul__=function(a){return a instanceof b?g.lock(b.one.clone().mul2(a,this)):"number"==typeof a?g.lock(this.clone().scale(a)):void 0},b}(d["default"]),j.one=g.lock(new j(new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]))),j.zero=g.lock(new j(new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),a("Matrix4",j),a("default",j)}}}),System.register("davinci-eight/facets/ModelE3.js",["../math/Geometric3"],function(a,b){"use strict";var c,d;b&&b.id;return{setters:[function(a){c=a}],execute:function(){d=function(){function a(){this._position=c["default"].zero(!1),this._attitude=c["default"].one(!1),this._position.modified=!0,this._attitude.modified=!0}return Object.defineProperty(a.prototype,"R",{get:function(){return this._attitude},set:function(a){this._attitude.copySpinor(a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"X",{get:function(){return this._position},set:function(a){this._position.copyVector(a)},enumerable:!0,configurable:!0}),a}(),d.PROP_ATTITUDE="R",d.PROP_POSITION="X",a("default",d)}}}),System.register("davinci-eight/facets/ModelFacet.js",["../math/Matrix3","../math/Matrix4","./ModelE3","../checks/mustBeObject","../i18n/readOnly","../core/GraphicsProgramSymbols"],function(a,b){"use strict";var c,d,e,f,g,h,i,j=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(a){function b(){var b=a.call(this)||this;return b.matS=d["default"].one.clone(),b._matM=d["default"].one.clone(),b._matN=c["default"].one.clone(),b.matR=d["default"].one.clone(),b.matT=d["default"].one.clone(),b.X.modified=!0,b.R.modified=!0,b.matS.modified=!0,b}return j(b,a),Object.defineProperty(b.prototype,"stress",{get:function(){return this.matS},set:function(a){f["default"]("stress",a),this.matS.copy(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"matrix",{get:function(){return this._matM},set:function(a){throw new Error(g["default"]("matrix").message)},enumerable:!0,configurable:!0}),b.prototype.setUniforms=function(a){this.updateMatrices(),a.matrix4fv(h["default"].UNIFORM_MODEL_MATRIX,this._matM.elements,!1),a.matrix3fv(h["default"].UNIFORM_NORMAL_MATRIX,this._matN.elements,!1)},b.prototype.updateMatrices=function(){var a=!1;this.X.modified&&(this.matT.translation(this.X),this.X.modified=!1,a=!0),this.R.modified&&(this.matR.rotation(this.R),this.R.modified=!1,a=!0),this.matS.modified&&(a=!0),a&&(this._matM.copy(this.matT).mul(this.matR).mul(this.matS),0!==this._matM.det()?this._matN.normalFromMatrix4(this._matM):this._matN.one())},b}(e["default"]),a("ModelFacet",i),a("default",i)}}}),System.register("davinci-eight/i18n/notSupported.js",["../checks/mustBeString"],function(a,b){"use strict";function c(a){d["default"]("name",a);var b={get message(){return"Method `"+a+"` is not supported."}};return b}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/core/referenceAxis.js",["../math/Geometric3","../math/R3","../core/tiltFromOptions"],function(a,b){"use strict";function c(a,b){if(a.tilt){var c=d["default"].fromVector(f.canonicalAxis).rotate(a.tilt);return e["default"](c.x,c.y,c.z)}if(a.axis){var c=a.axis;return e["default"](c.x,c.y,c.z).direction()}if("object"==typeof a.height){console.warn("height is deprecated. Please use axis instead.");var c=a.height;return e["default"](c.x,c.y,c.z).direction()}if(a.meridian){var g=d["default"].dualOfVector(f.canonicalAxis),h=d["default"].rotorFromVectorToVector(f.canonicalMeridian,a.meridian,g),c=d["default"].fromVector(f.canonicalAxis).rotate(h);return e["default"](c.x,c.y,c.z).direction()}if(a.cutLine){console.warn("cutLine is deprecated. Please use meridian instead.");var g=d["default"].dualOfVector(f.canonicalAxis),h=d["default"].rotorFromVectorToVector(f.canonicalMeridian,a.cutLine,g),c=d["default"].fromVector(f.canonicalAxis).rotate(h);return e["default"](c.x,c.y,c.z).direction()}return e["default"](b.x,b.y,b.z)}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/core/tiltFromOptions.js",["../math/Geometric3","../checks/isDefined","../math/R3"],function(a,b){"use strict";function c(a){if(e["default"](a.tilt))return a.tilt;if(e["default"](a.axis)){if(e["default"](a.meridian)){var b=f["default"](a.axis.x,a.axis.y,a.axis.z),c=a.meridian;return d["default"].rotorFromFrameToFrame([g,h,g.cross(h)],[b,c,b.cross(c)])}return d["default"].rotorFromDirections(g,a.axis)}return e["default"](a.meridian)?d["default"].rotorFromDirections(h,a.meridian):{a:1,xy:0,yz:0,zx:0}}b&&b.id;a("default",c);var d,e,f,g,h;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){a("canonicalAxis",g=f["default"](0,1,0)),a("canonicalMeridian",h=f["default"](0,0,1))}}}),System.register("davinci-eight/core/referenceMeridian.js",["../core/tiltFromOptions","../math/Geometric3","../math/R3"],function(a,b){"use strict";function c(a,b){if(a.tilt){var c=e["default"].fromVector(d.canonicalMeridian).rotate(a.tilt);return f["default"](c.x,c.y,c.z)}if(a.meridian){var c=a.meridian;return f["default"](c.x,c.y,c.z).direction()}if(a.cutLine){console.warn("cutLine is deprecated. Please use meridian instead.");var c=a.cutLine;return f["default"](c.x,c.y,c.z).direction()}if(a.axis){var g=e["default"].dualOfVector(d.canonicalMeridian),h=e["default"].rotorFromVectorToVector(d.canonicalAxis,a.axis,g),c=e["default"].fromVector(d.canonicalMeridian).rotate(h);return f["default"](c.x,c.y,c.z).direction()}if("object"==typeof a.height){console.warn("height is deprecated. Please use axis instead.");var i=a.height,g=e["default"].dualOfVector(d.canonicalMeridian),h=e["default"].rotorFromVectorToVector(d.canonicalAxis,i,g),c=e["default"].fromVector(d.canonicalMeridian).rotate(h);return f["default"](c.x,c.y,c.z).direction()}return f["default"](b.x,b.y,b.z)}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/math/dotVectorCartesianE3.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f){return a*d+b*e+c*f}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/mulSpinorE3YZ.js",[],function(a,b){"use strict";function c(a,b){return a.yz*b.a-a.zx*b.xy+a.xy*b.zx+a.a*b.yz}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/mulSpinorE3ZX.js",[],function(a,b){"use strict";function c(a,b){return a.yz*b.xy+a.zx*b.a-a.xy*b.yz+a.a*b.zx}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/mulSpinorE3XY.js",[],function(a,b){"use strict";function c(a,b){return-a.yz*b.zx+a.zx*b.yz+a.xy*b.a+a.a*b.xy}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/mulSpinorE3alpha.js",[],function(a,b){"use strict";function c(a,b){return-a.yz*b.yz-a.zx*b.zx-a.xy*b.xy+a.a*b.a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeObject.js",["../checks/mustSatisfy","../checks/isObject"],function(a,b){"use strict";function c(){return"be an `object`"}function d(a,b,d){return e["default"](a,f["default"](b),c,d),b}b&&b.id;a("default",d);var e,f;return{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/math/quadSpinorE3.js",["../checks/isDefined","../checks/isNumber"],function(a,b){"use strict";function c(a){if(d["default"](a)){var b=a.a,c=a.yz,f=a.zx,g=a.xy;return e["default"](b)&&e["default"](c)&&e["default"](f)&&e["default"](g)?b*b+c*c+f*f+g*g:void 0}}b&&b.id;a("default",c);var d,e;return{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/math/toStringCustom.js",["../math/stringFromCoordinates"],function(a,b){"use strict";function c(a,b,c){var e=d["default"](a,b,c);return e}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/math/Spinor3.js",["../utils/applyMixins","./approx","./dotVectorCartesianE3","../core/Lockable","./mulSpinorE3YZ","./mulSpinorE3ZX","./mulSpinorE3XY","./mulSpinorE3alpha","../checks/mustBeInteger","../checks/mustBeNumber","../checks/mustBeObject","./quadSpinorE3","./randomRange","../i18n/readOnly","./rotorFromDirectionsE3","./toStringCustom","./wedgeXY","./wedgeYZ","./wedgeZX"],function(a,b){"use strict";function c(a){return[a.yz,a.zx,a.xy,a.a]}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;b&&b.id;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a}],execute:function(){w=0,x=1,y=2,z=3,A=["e23","e31","e12","1"],B=Math.exp,C=Math.cos,D=Math.sin,E=Math.sqrt,F=Math.random(),G=function(){function a(a,b){if(b!==F)throw new Error("Use the static creation methods instead of the constructor");this.coords_=a,this.modified_=!1}return Object.defineProperty(a.prototype,"modified",{get:function(){return this.modified_},set:function(a){if(this.isLocked())throw new g.TargetLockedError("set modified");this.modified_=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"yz",{get:function(){return this.coords_[w]},set:function(a){if(this.isLocked())throw new g.TargetLockedError("set yz");m["default"]("yz",a);var b=this.coords_;this.modified_=this.modified_||b[w]!==a,b[w]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"zx",{get:function(){return this.coords_[x]},set:function(a){if(this.isLocked())throw new g.TargetLockedError("zx");m["default"]("zx",a);var b=this.coords_;this.modified_=this.modified_||b[x]!==a,b[x]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"xy",{get:function(){return this.coords_[y]},set:function(a){if(this.isLocked())throw new g.TargetLockedError("xy");m["default"]("xy",a);var b=this.coords_;this.modified_=this.modified_||b[y]!==a,b[y]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"a",{get:function(){return this.coords_[z]},set:function(a){if(this.isLocked())throw new g.TargetLockedError("a");m["default"]("",a);var b=this.coords_;this.modified_=this.modified_||b[z]!==a,b[z]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return 4},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maskG3",{get:function(){var a=this.coords_,b=a[z],c=a[w],d=a[x],e=a[y],f=0;return 0!==b&&(f+=1),0===c&&0===d&&0===e||(f+=4),f},set:function(a){throw new Error(q["default"]("maskG3").message)},enumerable:!0,configurable:!0}),a.prototype.add=function(a,b){return void 0===b&&(b=1),n["default"]("spinor",a),m["default"]("",b),this.yz+=a.yz*b,this.zx+=a.zx*b,this.xy+=a.xy*b,this.a+=a.a*b,this},a.prototype.add2=function(a,b){return this.a=a.a+b.a,this.yz=a.yz+b.yz,this.zx=a.zx+b.zx,this.xy=a.xy+b.xy,this},a.prototype.addPseudo=function(a){return m["default"]("",a),this},a.prototype.addScalar=function(a){return m["default"]("",a),this.a+=a,this},a.prototype.arg=function(){return this.isLocked()?g.lock(this.clone().arg()):this.log().grade(2)},a.prototype.approx=function(a){return e["default"](this.coords_,a),this},a.prototype.clone=function(){return a.spinor(this.yz,this.zx,this.xy,this.a)},a.prototype.conj=function(){return this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this},a.prototype.copy=function(a){if(a)return this.yz=a.yz,this.zx=a.zx,this.xy=a.xy,this.a=a.a,this;throw new Error("source for copy must be a spinor")},a.prototype.copyCoordinates=function(a){return this.yz=a[w],this.zx=a[x],this.xy=a[y],this.a=a[z],this},a.prototype.copyScalar=function(a){return this.zero().addScalar(a)},a.prototype.copySpinor=function(a){return this.copy(a)},a.prototype.copyVector=function(a){return this.zero()},a.prototype.div=function(a){return this.div2(this,a)},a.prototype.div2=function(a,b){var c=a.a,d=a.yz,e=a.zx,f=a.xy,g=b.a,h=b.yz,i=b.zx,j=b.xy;return this.a=c*g-d*h-e*i-f*j,this.yz=c*h+d*g-e*j+f*i,this.zx=c*i+d*j+e*g-f*h,this.xy=c*j-d*i+e*h+f*g,this},a.prototype.divByScalar=function(a){return this.yz/=a,this.zx/=a,this.xy/=a,this.a/=a,this},a.prototype.dual=function(a,b){return this.a=0,this.yz=a.x,this.zx=a.y,this.xy=a.z,b&&this.neg(),this},a.prototype.equals=function(b){if(b instanceof a){var c=b;return this.yz===c.yz&&this.zx===c.zx&&this.xy===c.xy&&this.a===c.a}return!1},a.prototype.exp=function(){var a=this.a,b=this.yz,c=this.zx,d=this.xy,e=B(a),f=E(b*b+c*c+d*d),g=e*(0!==f?D(f)/f:1);return this.a=e*C(f),this.yz=b*g,this.zx=c*g,this.xy=d*g,this},a.prototype.getComponent=function(a){return this.coords_[a]},a.prototype.inv=function(){return this.conj(),this.divByScalar(this.squaredNormSansUnits()),this},a.prototype.isOne=function(){return 1===this.a&&0===this.xy&&0===this.yz&&0===this.zx},a.prototype.isZero=function(){return 0===this.a&&0===this.xy&&0===this.yz&&0===this.zx},a.prototype.lco=function(a){return this.lco2(this,a)},a.prototype.lco2=function(a,b){return this},a.prototype.lerp=function(b,c){var d=a.copy(b),e=this.clone(),f=d.mul(e.inv());return f.log(),f.scale(c),f.exp(),this.copy(f),this},a.prototype.lerp2=function(a,b,c){return this.sub2(b,a).scale(c).add(a),this},a.prototype.log=function(){var a=this.a,b=this.yz,c=this.zx,d=this.xy,e=b*b+c*c+d*d,f=E(e),g=Math.abs(a),h=E(a*a+e);this.a=Math.log(h);var i=Math.atan2(f,g)/f;return this.yz=b*i,this.zx=c*i,this.xy=d*i,this},a.prototype.magnitude=function(){return E(this.squaredNormSansUnits())},a.prototype.magnitudeSansUnits=function(){return E(this.squaredNormSansUnits())},a.prototype.mul=function(a){var b=k["default"](this,a),c=h["default"](this,a),d=i["default"](this,a),e=j["default"](this,a);return this.a=b,this.yz=c,this.zx=d,this.xy=e,this},a.prototype.mul2=function(a,b){var c=k["default"](a,b),d=h["default"](a,b),e=i["default"](a,b),f=j["default"](a,b);return this.a=c,this.yz=d,this.zx=e,this.xy=f,this},a.prototype.neg=function(){return this.a=-this.a,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this},a.prototype.norm=function(){var a=this.magnitudeSansUnits();return this.zero().addScalar(a)},a.prototype.normalize=function(){var a=this.magnitude();return this.yz=this.yz/a,this.zx=this.zx/a,this.xy=this.xy/a,this.a=this.a/a,this},a.prototype.one=function(){return this.a=1,this.yz=0,this.zx=0,this.xy=0,this},a.prototype.quad=function(){var a=this.squaredNormSansUnits();return this.zero().addScalar(a)},a.prototype.squaredNorm=function(){return o["default"](this)},a.prototype.squaredNormSansUnits=function(){return o["default"](this)},a.prototype.stress=function(a){return this.yz=this.yz*a.y*a.z,this.zx=this.zx*a.z*a.x,this.xy=this.xy*a.x*a.y,this},a.prototype.rco=function(a){return this.rco2(this,a)},a.prototype.rco2=function(a,b){return this},a.prototype.rev=function(){return this.yz*=-1,this.zx*=-1,this.xy*=-1,this},a.prototype.reflect=function(a){var b=this.a,c=this.yz,d=this.zx,e=this.xy,f=a.x,g=a.y,h=a.z,i=f*f+g*g+h*h,j=f*c+g*d+h*e;return this.a=i*b,this.xy=2*h*j-i*e,this.yz=2*f*j-i*c,this.zx=2*g*j-i*d,this},a.prototype.rotate=function(a){return this.rev(),this.mul2(a,this),this.rev(),this.mul2(a,this),this},a.prototype.rotorFromDirections=function(a,b){return this.rotorFromVectorToVector(a,b,void 0)},a.prototype.rotorFromGeneratorAngle=function(a,b){var c=b/2,d=D(c);return this.yz=-a.yz*d,this.zx=-a.zx*d,this.xy=-a.xy*d,this.a=C(c),this},a.prototype.rotorFromVectorToVector=function(a,b,c){return r["default"](a,b,c,this),this},a.prototype.scp=function(a){return this.scp2(this,a)},a.prototype.scp2=function(a,b){return this},a.prototype.scale=function(a){return m["default"]("",a),this.yz*=a,this.zx*=a,this.xy*=a,this.a*=a,this},a.prototype.sub=function(a,b){return void 0===b&&(b=1),n["default"]("s",a),m["default"]("",b),this.yz-=a.yz*b,this.zx-=a.zx*b,this.xy-=a.xy*b,this.a-=a.a*b,this},a.prototype.sub2=function(a,b){return this.yz=a.yz-b.yz,this.zx=a.zx-b.zx,this.xy=a.xy-b.xy,this.a=a.a-b.a,this},a.prototype.versor=function(a,b){var c=a.x,d=a.y,e=a.z,g=b.x,h=b.y,i=b.z;return this.a=f["default"](c,d,e,g,h,i),this.yz=u["default"](c,d,e,g,h,i),this.zx=v["default"](c,d,e,g,h,i),this.xy=t["default"](c,d,e,g,h,i),this},a.prototype.wedge=function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;return this.a=0,this.yz=u["default"](c,d,e,f,g,h),this.zx=v["default"](c,d,e,f,g,h),this.xy=t["default"](c,d,e,f,g,h),this},a.prototype.grade=function(a){switch(l["default"]("grade",a),a){case 0:this.yz=0,this.zx=0,this.xy=0;break;case 2:this.a=0;break;default:this.a=0,this.yz=0,this.zx=0,this.xy=0}return this},a.prototype.toArray=function(){return c(this)},a.prototype.toExponential=function(a){var b=function(b){return b.toExponential(a)};return s["default"](c(this),b,A)},a.prototype.toFixed=function(a){var b=function(b){return b.toFixed(a)};return s["default"](c(this),b,A)},a.prototype.toPrecision=function(a){var b=function(b){return b.toPrecision(a)};return s["default"](c(this),b,A)},a.prototype.toString=function(a){var b=function(b){return b.toString(a)};return s["default"](c(this),b,A)},a.prototype.ext=function(a){return this.ext2(this,a)},a.prototype.ext2=function(a,b){return this},a.prototype.zero=function(){return this.a=0,this.yz=0,this.zx=0,this.xy=0,this},a.copy=function(b){var c=a.zero.clone().copy(b);return c.modified_=!1,c},a.dual=function(b,c){return a.zero.clone().dual(b,c)},a.fromBivector=function(b){return new a([b.yz,b.zx,b.xy,0],F)},a.isOne=function(a){return 1===a.a&&0===a.yz&&0===a.zx&&0===a.xy},a.lerp=function(b,c,d){return a.copy(b).lerp(c,d)},a.random=function(){var b=p["default"](-1,1),c=p["default"](-1,1),d=p["default"](-1,1),e=p["default"](-1,1);return a.spinor(b,c,d,e).normalize()},a.rotorFromDirections=function(b,c){return a.zero.clone().rotorFromDirections(b,c)},a.spinor=function(b,c,d,e){return new a([b,c,d,e],F)},a.wedge=function(b,c){var d=b.x,e=b.y,f=b.z,g=c.x,h=c.y,i=c.z,j=u["default"](d,e,f,g,h,i),k=v["default"](d,e,f,g,h,i),l=t["default"](d,e,f,g,h,i);return a.spinor(j,k,l,0)},a}(),G.one=G.spinor(0,0,0,1),G.zero=G.spinor(0,0,0,0),a("Spinor3",G),d["default"](G,[g.LockableMixin]),G.one.lock(),G.zero.lock(),a("default",G)}}}),System.register("davinci-eight/base/exchange.js",[],function(a,b){"use strict";function c(a,b){return a!==b?(b&&b.addRef&&b.addRef(),a&&a.release&&a.release(),b):a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/core/GraphicsProgramSymbols.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){c=function(){function a(){}return a}(),c.ATTRIBUTE_COLOR="aColor",c.ATTRIBUTE_GEOMETRY_INDEX="aGeometryIndex",c.ATTRIBUTE_NORMAL="aNormal",c.ATTRIBUTE_OPACITY="aOpacity",c.ATTRIBUTE_POSITION="aPosition",c.ATTRIBUTE_TANGENT="aTangent",c.ATTRIBUTE_COORDS="aCoords",c.UNIFORM_ALPHA="uAlpha",c.UNIFORM_AMBIENT_LIGHT="uAmbientLight",c.UNIFORM_COLOR="uColor",c.UNIFORM_DIRECTIONAL_LIGHT_COLOR="uDirectionalLightColor",c.UNIFORM_DIRECTIONAL_LIGHT_DIRECTION="uDirectionalLightDirection",c.UNIFORM_IMAGE="uImage",c.UNIFORM_OPACITY="uOpacity",c.UNIFORM_POINT_LIGHT_COLOR="uPointLightColor",c.UNIFORM_POINT_LIGHT_POSITION="uPointLightPosition",c.UNIFORM_POINT_SIZE="uPointSize",c.UNIFORM_PROJECTION_MATRIX="uProjection",c.UNIFORM_REFLECTION_ONE_MATRIX="uReflectionOne",c.UNIFORM_REFLECTION_TWO_MATRIX="uReflectionTwo",c.UNIFORM_MODEL_MATRIX="uModel",c.UNIFORM_NORMAL_MATRIX="uNormal",c.UNIFORM_VIEW_MATRIX="uView",c.VARYING_COLOR="vColor",c.VARYING_COORDS="vCoords",c.VARYING_LIGHT="vLight",a("default",c)}}}),System.register("davinci-eight/core/TextureUnit.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.TEXTURE0=33984]="TEXTURE0",a[a.TEXTURE1=33985]="TEXTURE1",a[a.TEXTURE2=33986]="TEXTURE2",a[a.TEXTURE3=33987]="TEXTURE3",a[a.TEXTURE4=33988]="TEXTURE4",a[a.TEXTURE5=33989]="TEXTURE5",a[a.TEXTURE6=33990]="TEXTURE6",a[a.TEXTURE7=33991]="TEXTURE7",a[a.TEXTURE8=33992]="TEXTURE8",a[a.TEXTURE9=33993]="TEXTURE9",a[a.TEXTURE10=33994]="TEXTURE10",a[a.TEXTURE11=33995]="TEXTURE11",a[a.TEXTURE12=33996]="TEXTURE12",a[a.TEXTURE13=33997]="TEXTURE13",a[a.TEXTURE14=33998]="TEXTURE14",a[a.TEXTURE15=33999]="TEXTURE15",a[a.TEXTURE16=34e3]="TEXTURE16",a[a.TEXTURE17=34001]="TEXTURE17",a[a.TEXTURE18=34002]="TEXTURE18",a[a.TEXTURE19=34003]="TEXTURE19",a[a.TEXTURE20=34004]="TEXTURE20",a[a.TEXTURE21=34005]="TEXTURE21",a[a.TEXTURE22=34006]="TEXTURE22",a[a.TEXTURE23=34007]="TEXTURE23",a[a.TEXTURE24=34008]="TEXTURE24",a[a.TEXTURE25=34009]="TEXTURE25",a[a.TEXTURE26=34010]="TEXTURE26",a[a.TEXTURE27=34011]="TEXTURE27",a[a.TEXTURE28=34012]="TEXTURE28",a[a.TEXTURE29=34013]="TEXTURE29",a[a.TEXTURE30=34014]="TEXTURE30",a[a.TEXTURE31=34015]="TEXTURE31",a[a.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE"}(c||(c={})),a("TextureUnit",c),a("default",c)}}}),System.register("davinci-eight/facets/TextureFacet.js",["../base/exchange","../core/GraphicsProgramSymbols","../core/ShareableBase","../core/TextureUnit"],function(a,b){"use strict";var c,d,e,f,g,h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(a){function b(){var b=a.call(this)||this;return b.unit=f["default"].TEXTURE0,b.setLoggingName("TextureFacet"),b}return h(b,a),b.prototype.destructor=function(b){this._texture=c["default"](this._texture,void 0),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"texture",{get:function(){return this._texture},set:function(a){this._texture=c["default"](this._texture,a)},enumerable:!0,configurable:!0}),b.prototype.setUniforms=function(a){this._texture&&(a.activeTexture(this.unit),this._texture.bind(),a.uniform1i(d["default"].UNIFORM_IMAGE,0))},b}(e["default"]),a("default",g)}}}),System.register("davinci-eight/core/Mesh.js",["../core/tiltFromOptions","../facets/ColorFacet","./Drawable","../math/Geometric3","../math/Matrix4","../facets/ModelFacet","../i18n/notSupported","../math/quadVectorE3","../math/R3","./referenceAxis","./referenceMeridian","../math/Spinor3","../facets/TextureFacet"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a}],execute:function(){p="color",q="image",r="model",s=function(a){function b(b,e,i,j,k){void 0===j&&(j={}),void 0===k&&(k=0);var s=a.call(this,b,e,i,k+1)||this;s.canonicalScale=g["default"].one.clone(),s.setLoggingName("Mesh"),s.setFacet(p,new d["default"]);var t=new o["default"];s.setFacet(q,t),t.release(),s.setFacet(r,new h["default"]),s.referenceAxis=l["default"](j,c.canonicalAxis).direction(),s.referenceMeridian=m["default"](j,c.canonicalMeridian).rejectionFrom(s.referenceAxis).direction();var u=f["default"].rotorFromFrameToFrame([c.canonicalAxis,c.canonicalMeridian,c.canonicalAxis.cross(c.canonicalMeridian)],[s.referenceAxis,s.referenceMeridian,s.referenceAxis.cross(s.referenceMeridian)]);return u&&!n["default"].isOne(u)?(s.Kidentity=!1,s.K=g["default"].one.clone(),s.K.rotation(u),s.Kinv=g["default"].one.clone(),s.Kinv.copy(s.K).inv()):s.Kidentity=!0,0===k&&s.synchUp(),s}return t(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"attitude",{get:function(){var a=this.getFacet(r);if(a)return a.R;throw new Error(i["default"](r).message)},set:function(a){var b=this.getFacet(r);if(!b)throw new Error(i["default"](r).message);b.R.copySpinor(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"R",{get:function(){var a=this.getFacet(r);if(a)return a.R;throw new Error(i["default"](r).message)},set:function(a){var b=this.getFacet(r);if(!b)throw new Error(i["default"](r).message);b.R.copySpinor(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"color",{get:function(){var a=this.getFacet(p);if(a)return a.color;throw new Error(i["default"](p).message)},set:function(a){var b=this.getFacet(p);if(!b)throw new Error(i["default"](p).message);b.color.copy(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"texture",{get:function(){var a=this.getFacet(q);if(a){var b=a.texture;return a.release(),b}throw new Error(i["default"](q).message)},set:function(a){var b=this.getFacet(q);if(!b)throw new Error(i["default"](q).message);b.texture=a,b.release()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"X",{get:function(){var a=this.getFacet(r);if(a)return a.X;throw new Error(i["default"](r).message)},set:function(a){var b=this.getFacet(r);if(!b)throw new Error(i["default"](r).message);b.X.copyVector(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"position",{get:function(){var a=this.getFacet(r);if(a)return a.X;throw new Error(i["default"](r).message)},set:function(a){var b=this.getFacet(r);if(!b)throw new Error(i["default"](r).message);b.X.copyVector(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"stress",{get:function(){var a=this.getFacet(r);if(a)return a.stress;throw new Error(i["default"]("stress").message)},set:function(a){var b=this.getFacet(r);if(!b)throw new Error(i["default"]("stress").message);b.stress.copy(a)},enumerable:!0,configurable:!0}),b.prototype.getScale=function(a,b){if(this.Kidentity){var c=this.stress;return c.getElement(a,b)}var c=this.stress,d=this.canonicalScale;return d.copy(this.Kinv).mul(c).mul(this.K),d.getElement(a,b)},b.prototype.getScaleX=function(){return this.getScale(0,0)},b.prototype.getScaleY=function(){return this.getScale(1,1)},b.prototype.getScaleZ=function(){return this.getScale(2,2)},b.prototype.setScale=function(a,b,c){if(this.Kidentity){var d=this.stress,e=d.getElement(0,0),f=d.getElement(1,1),g=d.getElement(2,2);a!==e&&d.setElement(0,0,a),b!==f&&d.setElement(1,1,b),c!==g&&d.setElement(2,2,c)}else{var d=this.stress,h=this.canonicalScale;h.copy(this.Kinv).mul(d).mul(this.K);var e=h.getElement(0,0),f=h.getElement(1,1),g=h.getElement(2,2),i=!1;a!==e&&(h.setElement(0,0,a),i=!0),b!==f&&(h.setElement(1,1,b),i=!0),c!==g&&(h.setElement(2,2,c),i=!0),i&&d.copy(this.K).mul(h).mul(this.Kinv)}},b.prototype.getAxis=function(){return this.referenceAxis.rotate(this.attitude)},b.prototype.setAxis=function(a){var b=j["default"](a);b>0?this.attitude.rotorFromDirections(this.referenceAxis,a):this.attitude.one()},Object.defineProperty(b.prototype,"axis",{get:function(){return this.getAxis()},set:function(a){this.setAxis(a)},enumerable:!0,configurable:!0}),b.prototype.getMeridian=function(){return this.referenceMeridian.rotate(this.attitude)},Object.defineProperty(b.prototype,"meridian",{get:function(){return this.getMeridian()},set:function(a){var b=k.vectorCopy(a).rejectionFrom(this.axis).direction(),c=f["default"].dualOfVector(this.axis),d=f["default"].rotorFromVectorToVector(this.meridian,b,c);this.attitude.mul2(d,this.attitude)},enumerable:!0,configurable:!0}),b}(e["default"]),a("Mesh",s),a("default",s)}}}),System.register("davinci-eight/visual/offsetFromOptions.js",["../math/Geometric3"],function(a,b){"use strict";function c(a){return 0!==a.x||0!==a.y||0!==a.z?{x:a.x,y:a.y,z:a.z}:void 0}function d(a){return c(a.offset?a.offset:e.Geometric3.ZERO)}b&&b.id;a("default",d);var e;return{setters:[function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/visual/setAxisAndMeridian.js",["../checks/isDefined"],function(a,b){"use strict";function c(a,b){d["default"](b.axis)&&(a.axis=b.axis),d["default"](b.meridian)&&(a.meridian=b.meridian)}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/visual/setColorOption.js",["../checks/isDefined"],function(a,b){"use strict";function c(a,b,c){d["default"](b.color)?a.color.copy(b.color):d["default"](c)&&a.color.copy(c)}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/checks/isBoolean.js",[],function(a,b){"use strict";function c(a){return"boolean"==typeof a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeBoolean.js",["../checks/mustSatisfy","../checks/isBoolean"],function(a,b){"use strict";function c(){return"be `boolean`"}function d(a,b,d){return e["default"](a,f["default"](b),c,d),b}b&&b.id;a("default",d);var e,f;return{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/geometries/GeometryMode.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.POINT=0]="POINT",a[a.WIRE=1]="WIRE",a[a.MESH=2]="MESH"}(c||(c={})),a("GeometryMode",c),a("default",c)}}}),System.register("davinci-eight/geometries/SimplexMode.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.EMPTY=-1]="EMPTY",a[a.POINT=0]="POINT",a[a.LINE=1]="LINE",
a[a.TRIANGLE=2]="TRIANGLE",a[a.TETRAHEDRON=3]="TETRAHEDRON",a[a.FIVE_CELL=4]="FIVE_CELL"}(c||(c={})),a("SimplexMode",c),a("default",c)}}}),System.register("davinci-eight/visual/simplexModeFromOptions.js",["../checks/isDefined","../checks/mustBeBoolean","../checks/mustBeInteger","../geometries/GeometryMode","../geometries/SimplexMode"],function(a,b){"use strict";function c(a,b){if(void 0===a&&(a={}),!d["default"](a))return b;if(d["default"](a.mode))switch(a.mode){case g["default"].MESH:return h["default"].TRIANGLE;case g["default"].WIRE:return h["default"].LINE;case g["default"].POINT:return h["default"].POINT;case"mesh":return h["default"].TRIANGLE;case"wire":return h["default"].LINE;case"point":return h["default"].POINT;default:throw new Error("Unknown mode: "+a.mode)}else{if(d["default"](a.wireFrame))return e["default"]("wireFrame",a.wireFrame)?h["default"].LINE:b;if(!d["default"](a.k))return b;var c=f["default"]("k",a.k);switch(c){case h["default"].EMPTY:return h["default"].EMPTY;case h["default"].POINT:return h["default"].POINT;case h["default"].LINE:return h["default"].LINE;case h["default"].TRIANGLE:return h["default"].TRIANGLE;default:throw new Error("k: SimplexMode must be -1, 0, 1, or 2")}}}b&&b.id;a("default",c);var d,e,f,g,h;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){}}}),System.register("davinci-eight/utils/applyMixins.js",[],function(a,b){"use strict";function c(a,b){b.forEach(function(b){Object.getOwnPropertyNames(b.prototype).forEach(function(c){a.prototype[c]=b.prototype[c]})})}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/approx.js",[],function(a,b){"use strict";function c(a,b){for(var c=0,d=a.length,e=0;e<d;e++)c=Math.max(c,Math.abs(a[e]));for(var f=c*Math.pow(10,-b),e=0;e<d;e++)Math.abs(a[e])<f&&(a[e]=0)}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/arraysEQ.js",["../checks/isDefined","../checks/isNull","../checks/isUndefined"],function(a,b){"use strict";function c(a,b){if(d["default"](a)){if(d["default"](b)){if(e["default"](a))return e["default"](b);if(e["default"](b))return!1;var c=a.length,g=b.length;if(c===g){for(var h=0;h<c;h++)if(a[h]!==b[h])return!1;return!0}return!1}return!1}return f["default"](b)}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/math/extE3.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i);break;case 1:r=+(a*j+b*i);break;case 2:r=+(a*k+c*i);break;case 3:r=+(a*l+d*i);break;case 4:r=+(a*m+b*k-c*j+e*i);break;case 5:r=+(a*n+c*l-d*k+f*i);break;case 6:r=+(a*o-b*l+d*j+g*i);break;case 7:r=+(a*p+b*n+c*o+d*m+e*l+f*j+g*k+h*i);break;default:throw new Error("index must be in the range [0..7]")}return+r}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/extG3.js",["../math/compG3Get","../math/extE3","../math/compG3Set"],function(a,b){"use strict";function c(a,b,c){for(var g=d["default"](a,0),h=d["default"](a,1),i=d["default"](a,2),j=d["default"](a,3),k=d["default"](a,4),l=d["default"](a,5),m=d["default"](a,6),n=d["default"](a,7),o=d["default"](b,0),p=d["default"](b,1),q=d["default"](b,2),r=d["default"](b,3),s=d["default"](b,4),t=d["default"](b,5),u=d["default"](b,6),v=d["default"](b,7),w=0;w<8;w++)f["default"](c,w,e["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w));return c}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/math/gauss.js",[],function(a,b){"use strict";function c(a,b){for(var c=[],d=0;d<a;d++)c.push(b);return c}function d(a,b,c){for(var d=i(a[b][b]),e=b,f=b+1;f<c;f++)i(a[f][b])>d&&(d=i(a[f][b]),e=f);return e}function e(a,b,c,d){for(var e=d+1,f=b;f<e;f++){var g=a[c][f];a[c][f]=a[b][f],a[b][f]=g}}function f(a,b,c){for(var d=b+1;d<c;d++)for(var e=-a[d][b]/a[b][b],f=b;f<c+1;f++)b===f?a[d][f]=0:a[d][f]+=e*a[b][f]}function g(a,b){for(var d=c(b,0),e=b-1;e>-1;e--){d[e]=a[e][b]/a[e][e];for(var f=e-1;f>-1;f--)a[f][b]-=a[f][e]*d[e]}return d}function h(a,b){for(var c=a.length,h=0;h<c;h++){var i=a[h],j=b[h];i.push(j)}for(var k=0;k<c;k++)e(a,k,d(a,k,c),c),f(a,k,c);return g(a,c)}b&&b.id;a("default",h);var i;return{setters:[],execute:function(){i=Math.abs}}}),System.register("davinci-eight/math/isScalarG3.js",[],function(a,b){"use strict";function c(a){return 0===a.x&&0===a.y&&0===a.z&&0===a.xy&&0===a.yz&&0===a.zx&&0===a.b}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/isVectorE3.js",["../checks/isNull","../checks/isNumber","../checks/isObject"],function(a,b){"use strict";function c(a){return!(!f["default"](a)||d["default"](a))&&(e["default"](a.x)&&e["default"](a.y)&&e["default"](a.z))}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/math/isVectorG3.js",[],function(a,b){"use strict";function c(a){return 0===a.a&&0===a.xy&&0===a.yz&&0===a.zx&&0===a.b}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/lcoE3.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i+b*j+c*k+d*l-e*m-f*n-g*o-h*p);break;case 1:r=+(a*j-c*m+d*o-f*p);break;case 2:r=+(a*k+b*m-d*n-g*p);break;case 3:r=+(a*l-b*o+c*n-e*p);break;case 4:r=+(a*m+d*p);break;case 5:r=+(a*n+b*p);break;case 6:r=+(a*o+c*p);break;case 7:r=+(a*p);break;default:throw new Error("index must be in the range [0..7]")}return+r}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/lcoG3.js",["../math/compG3Get","../math/lcoE3","../math/compG3Set"],function(a,b){"use strict";function c(a,b,c){for(var g=d["default"](a,0),h=d["default"](a,1),i=d["default"](a,2),j=d["default"](a,3),k=d["default"](a,4),l=d["default"](a,5),m=d["default"](a,6),n=d["default"](a,7),o=d["default"](b,0),p=d["default"](b,1),q=d["default"](b,2),r=d["default"](b,3),s=d["default"](b,4),t=d["default"](b,5),u=d["default"](b,6),v=d["default"](b,7),w=0;w<8;w++)f["default"](c,w,e["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w));return c}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/core/Lockable.js",[],function(a,b){"use strict";function c(a){return a.lock(),a}function d(){var a=void 0,b={isLocked:function(){return"number"==typeof a},lock:function(){if(b.isLocked())throw new Error("already locked");return a=Math.random()},unlock:function(c){if("number"!=typeof c)throw new Error("token must be a number.");if(!b.isLocked())throw new Error("not locked");if(a!==c)throw new Error("unlock denied");a=void 0}};return b}var e=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;a("lock",c),a("lockable",d);var f,g,h;return{setters:[],execute:function(){f=function(a){function b(b){return a.call(this,"target of operation '"+b+"' must be mutable.")||this}return e(b,a),b}(Error),a("TargetLockedError",f),g=function(a){function b(b){return a.call(this,"target of operation '"+b+"' must be immutable.")||this}return e(b,a),b}(Error),a("TargetUnlockedError",g),h=function(){function a(){}return a.prototype.isLocked=function(){return"number"==typeof this.lock_},a.prototype.lock=function(){if(this.isLocked())throw new Error("already locked");return this.lock_=Math.random(),this.lock_},a.prototype.unlock=function(a){if("number"!=typeof a)throw new Error("token must be a number.");if(!this.isLocked())throw new Error("not locked");if(this.lock_!==a)throw new Error("unlock denied");this.lock_=void 0},a}(),a("LockableMixin",h)}}}),System.register("davinci-eight/math/maskG3.js",["../checks/isNumber","../checks/isObject"],function(a,b){"use strict";function c(a){if(e["default"](a)&&"maskG3"in a){var b=a,c=a;return 1&b.maskG3?f.a=c.a:f.a=0,2&b.maskG3?(f.x=c.x,f.y=c.y,f.z=c.z):(f.x=0,f.y=0,f.z=0),4&b.maskG3?(f.yz=c.yz,f.zx=c.zx,f.xy=c.xy):(f.yz=0,f.zx=0,f.xy=0),8&b.maskG3?f.b=c.b:f.b=0,f}return d["default"](a)?(f.a=a,f.x=0,f.y=0,f.z=0,f.yz=0,f.zx=0,f.xy=0,f.b=0,f):void 0}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a}],execute:function(){f={a:0,x:0,y:0,z:0,yz:0,zx:0,xy:0,b:0}}}}),System.register("davinci-eight/math/randomRange.js",[],function(a,b){"use strict";function c(a,b){return(b-a)*Math.random()+a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/rcoE3.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a=+a,b=+b,c=+c,d=+d,e=+e,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=0|q;var r=0;switch(~~q){case 0:r=+(a*i+b*j+c*k+d*l-e*m-f*n-g*o-h*p);break;case 1:r=+(+b*i+e*k-g*l-h*n);break;case 2:r=+(+c*i-e*j+f*l-h*o);break;case 3:r=+(+d*i-f*k+g*j-h*m);break;case 4:r=+(+e*i+h*l);break;case 5:r=+(+f*i+h*j);break;case 6:r=+(+g*i+h*k);break;case 7:r=+(+h*i);break;default:throw new Error("index must be in the range [0..7]")}return+r}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/rcoG3.js",["../math/compG3Get","../math/rcoE3","../math/compG3Set"],function(a,b){"use strict";function c(a,b,c){for(var g=d["default"](a,0),h=d["default"](a,1),i=d["default"](a,2),j=d["default"](a,3),k=d["default"](a,4),l=d["default"](a,5),m=d["default"](a,6),n=d["default"](a,7),o=d["default"](b,0),p=d["default"](b,1),q=d["default"](b,2),r=d["default"](b,3),s=d["default"](b,4),t=d["default"](b,5),u=d["default"](b,6),v=d["default"](b,7),w=0;w<8;w++)f["default"](c,w,e["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w));return c}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/math/quadVectorE3.js",[],function(a,b){"use strict";function c(a){var b=a.x,c=a.y,d=a.z;return b*b+c*c+d*d}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/rotorFromDirectionsE3.js",["./dotVectorE3","./quadVectorE3","./wedgeXY","./wedgeYZ","./wedgeZX"],function(a,b){"use strict";function c(a,b,c,l){if(a.x===b.x&&a.y===b.y&&a.z===b.z)return void l.one();if(1===a.x&&0===a.y&&0===a.z&&0===b.x&&1===b.y&&0===b.z)return l.zero(),l.a=j,void(l.xy=-k);if(1===a.x&&0===a.y&&0===a.z&&0===b.x&&0===b.y&&1===b.z)return l.zero(),l.a=j,void(l.zx=k);if(0===a.x&&1===a.y&&0===a.z&&1===b.x&&0===b.y&&0===b.z)return l.zero(),l.a=j,void(l.xy=k);if(0===a.x&&1===a.y&&0===a.z&&0===b.x&&0===b.y&&1===b.z)return l.zero(),l.a=j,void(l.yz=-k);if(0===a.x&&0===a.y&&1===a.z&&1===b.x&&0===b.y&&0===b.z)return l.zero(),l.a=j,void(l.zx=-k);if(0===a.x&&0===a.y&&1===a.z&&0===b.x&&1===b.y&&0===b.z)return l.zero(),l.a=j,void(l.yz=k);if(1===a.x&&0===a.y&&0===a.z&&0===b.x&&b.y===-1&&0===b.z)return l.zero(),l.a=j,void(l.xy=k);if(1===a.x&&0===a.y&&0===a.z&&0===b.x&&0===b.y&&b.z===-1)return l.zero(),l.a=j,void(l.zx=-k);if(0===a.x&&1===a.y&&0===a.z&&b.x===-1&&0===b.y&&0===b.z)return l.zero(),l.a=j,void(l.xy=-k);if(0===a.x&&1===a.y&&0===a.z&&0===b.x&&0===b.y&&b.z===-1)return l.zero(),l.a=j,void(l.yz=k);if(0===a.x&&0===a.y&&1===a.z&&b.x===-1&&0===b.y&&0===b.z)return l.zero(),l.a=j,void(l.zx=k);if(0===a.x&&0===a.y&&1===a.z&&0===b.x&&b.y===-1&&0===b.z)return l.zero(),l.a=j,void(l.yz=-k);if(a.x===-1&&0===a.y&&0===a.z&&0===b.x&&1===b.y&&0===b.z)return l.zero(),l.a=j,void(l.xy=k);if(a.x===-1&&0===a.y&&0===a.z&&0===b.x&&0===b.y&&1===b.z)return l.zero(),l.a=j,void(l.zx=-k);if("undefined"==typeof c){if(1===a.x&&0===a.y&&0===a.z&&b.x===-1&&0===b.y&&0===b.z)return l.zero(),void(l.xy=-1);if(a.x===-1&&0===a.y&&0===a.z&&1===b.x&&0===b.y&&0===b.z)return l.zero(),void(l.xy=-1);if(0===a.x&&1===a.y&&0===a.z&&0===b.x&&b.y===-1&&0===b.z)return l.zero(),void(l.xy=-1);if(0===a.x&&a.y===-1&&0===a.z&&0===b.x&&1===b.y&&0===b.z)return l.zero(),void(l.xy=-1);if(0===a.x&&0===a.y&&1===a.z&&0===b.x&&0===b.y&&b.z===-1)return l.zero(),void(l.zx=-1);if(0===a.x&&0===a.y&&a.z===-1&&0===b.x&&0===b.y&&1===b.z)return l.zero(),void(l.zx=-1)}var m=e["default"](a),n=i(m),o=e["default"](b),p=i(o),q=p*n,r=d["default"](b,a),s=i(2*(o*m+q*r));if(0!==s)l=l.versor(b,a),l=l.addScalar(q),l=l.divByScalar(s);else if(c)l.rotorFromGeneratorAngle(c,Math.PI);else{var t=Math.random(),u=Math.random(),v=Math.random();l.zero(),l.yz=g["default"](t,u,v,a.x,a.y,a.z),l.zx=h["default"](t,u,v,a.x,a.y,a.z),l.xy=f["default"](t,u,v,a.x,a.y,a.z),l.normalize(),l.rotorFromGeneratorAngle(l,Math.PI)}}b&&b.id;a("default",c);var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=Math.sqrt,j=Math.cos(Math.PI/4),k=Math.sin(Math.PI/4)}}}),System.register("davinci-eight/math/compG3Get.js",[],function(a,b){"use strict";function c(a,b){switch(b){case d:return a.a;case e:return a.x;case f:return a.y;case g:return a.z;case h:return a.xy;case i:return a.yz;case j:return a.zx;case k:return a.b;default:throw new Error("index => "+b)}}b&&b.id;a("default",c);var d,e,f,g,h,i,j,k;return{setters:[],execute:function(){d=0,e=1,f=2,g=3,h=4,i=5,j=6,k=7}}}),System.register("davinci-eight/math/mulE3.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){switch(q){case 0:return a*i+b*j+c*k+d*l-e*m-f*n-g*o-h*p;case 1:return a*j+b*i-c*m+d*o+e*k-f*p-g*l-h*n;case 2:return a*k+b*m+c*i-d*n-e*j+f*l-g*p-h*o;case 3:return a*l-b*o+c*n+d*i-e*p-f*k+g*j-h*m;case 4:return a*m+b*k-c*j+d*p+e*i-f*o+g*n+h*l;case 5:return a*n+b*p+c*l-d*k+e*o+f*i-g*m+h*j;case 6:return a*o-b*l+c*p+d*j-e*n+f*m+g*i+h*k;case 7:return a*p+b*n+c*o+d*m+e*l+f*j+g*k+h*i;default:throw new Error("index must be in the range [0..7]")}}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/compG3Set.js",[],function(a,b){"use strict";function c(a,b,c){switch(b){case d:a.a=c;break;case e:a.x=c;break;case f:a.y=c;break;case g:a.z=c;break;case h:a.xy=c;break;case i:a.yz=c;break;case j:a.zx=c;break;case k:a.b=c;break;default:throw new Error("index => "+b)}}b&&b.id;a("default",c);var d,e,f,g,h,i,j,k;return{setters:[],execute:function(){d=0,e=1,f=2,g=3,h=4,i=5,j=6,k=7}}}),System.register("davinci-eight/math/scpG3.js",["../math/compG3Get","../math/mulE3","../math/compG3Set"],function(a,b){"use strict";function c(a,b,c){var g=d["default"](a,0),h=d["default"](a,1),i=d["default"](a,2),j=d["default"](a,3),k=d["default"](a,4),l=d["default"](a,5),m=d["default"](a,6),n=d["default"](a,7),o=d["default"](b,0),p=d["default"](b,1),q=d["default"](b,2),r=d["default"](b,3),s=d["default"](b,4),t=d["default"](b,5),u=d["default"](b,6),v=d["default"](b,7);return f["default"](c,0,e["default"](g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,0)),f["default"](c,1,0),f["default"](c,2,0),f["default"](c,3,0),f["default"](c,4,0),f["default"](c,5,0),f["default"](c,6,0),f["default"](c,7,0),c}b&&b.id;a("default",c);var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/math/squaredNormG3.js",[],function(a,b){"use strict";function c(a){var b=a.a,c=a.x,d=a.y,e=a.z,f=a.yz,g=a.zx,h=a.xy,i=a.b;return b*b+c*c+d*d+e*e+f*f+g*g+h*h+i*i}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/isArray.js",[],function(a,b){"use strict";function c(a){return"[object Array]"===Object.prototype.toString.call(a)}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeArray.js",["../checks/mustSatisfy","../checks/isArray"],function(a,b){"use strict";function c(){return"be an array"}function d(a,b,d){return e["default"](a,f["default"](b),c,d),b}b&&b.id;a("default",d);var e,f;return{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/math/stringFromCoordinates.js",["../checks/isDefined","../checks/mustBeArray"],function(a,b){"use strict";function c(a){if("string"==typeof a)return"1"===a;var b=h["default"]("label",a);return 2===b.length?c(b[0])&&c(b[1]):1===b.length&&c(b[0])}function d(a,b,c){if("string"==typeof b)c.push(b);else{var d=h["default"]("label",b);if(2===d.length)c.push(a>0?d[1]:d[0]);else if(1===d.length)c.push(d[0]);else if(0!==d.length)throw new Error("Unexpected basis label array length: "+d.length)}}function e(a,b,e,f){if(0!==a){if(a>=0)f.length>0&&f.push("+");else if("string"==typeof e)f.push("-");else{var g=h["default"]("label",e);2===g.length?g[0]!==g[1]?f.length>0&&f.push("+"):f.push("-"):1===g.length?f.push("-"):f.push("-")}var i=Math.abs(a);1===i?d(a,e,f):(f.push(b(i)),c(e)||(f.push("*"),d(a,e,f)))}}function f(a,b,c){for(var d=[],f=0,h=a.length;f<h;f++){var i=a[f];if(!g["default"](i))return;e(i,b,c[f],d)}return d.length>0?d.join(""):"0"}b&&b.id;a("default",f);var g,h;return{setters:[function(a){g=a},function(a){h=a}],execute:function(){}}}),System.register("davinci-eight/math/Geometric3.js",["../utils/applyMixins","./approx","./arraysEQ","./dotVectorE3","./extG3","./gauss","./isScalarG3","./isVectorE3","./isVectorG3","./lcoG3","../core/Lockable","./maskG3","./mulE3","../checks/mustBeEQ","../checks/mustBeInteger","./randomRange","./rcoG3","./rotorFromDirectionsE3","./scpG3","./squaredNormG3","./stringFromCoordinates","./wedgeXY","./wedgeYZ","./wedgeZX"],function(a,b){"use strict";function c(a){var b=L();return b[C]=a.a,b[D]=a.x,b[E]=a.y,b[F]=a.z,b[H]=a.yz,b[I]=a.zx,b[G]=a.xy,b[J]=a.b,b}function d(a,b){function c(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}function d(a){return Math.sqrt(c(a,a))}return c(a,b)/(d(a)*d(b))}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T;b&&b.id;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a},function(a){x=a},function(a){y=a},function(a){z=a},function(a){A=a},function(a){B=a}],execute:function(){C=0,D=1,E=2,F=3,G=4,H=5,I=6,J=7,K=["1","e1","e2","e3","e12","e23","e31","e123"],L=function(){return[0,0,0,0,0,0,0,0]},M=function(a){var b=L();return b[C]=a,b},N=function(a,b,c){var d=L();return d[D]=a,d[E]=b,d[F]=c,d},O=function(a,b,c){var d=L();return d[H]=a,d[I]=b,d[G]=c,d},P=function(a,b,c,d){var e=L();return e[C]=a,e[H]=b,e[I]=c,e[G]=d,e},Q=function(a,b,c,d,e,f,g,h){var i=L();return i[C]=a,i[D]=b,i[E]=c,i[F]=d,i[H]=e,i[I]=f,i[G]=g,i[J]=h,i},R=function(a){var b=L();return b[J]=a,b},S=[],T=function(){function a(a){void 0===a&&(a=[0,0,0,0,0,0,0,0]),r["default"]("coords.length",a.length,8),this.coords_=a,this.modified_=!1}return Object.defineProperty(a.prototype,"length",{get:function(){return 8},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"modified",{get:function(){return this.modified_},set:function(a){if(this.isLocked())throw new o.TargetLockedError("set modified");this.modified_=a},enumerable:!0,configurable:!0}),a.prototype.getComponent=function(a){return this.coords_[a]},a.prototype.setCoordinate=function(a,b,c){if(this.isLocked())throw new o.TargetLockedError("set "+c);var d=this.coords_,e=d[a];b!==e&&(d[a]=b,this.modified_=!0)},Object.defineProperty(a.prototype,"a",{get:function(){return this.coords_[C]},set:function(a){this.setCoordinate(C,a,"a")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"x",{get:function(){return this.coords_[D]},set:function(a){this.setCoordinate(D,a,"x")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.coords_[E]},set:function(a){this.setCoordinate(E,a,"y")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"z",{get:function(){return this.coords_[F]},set:function(a){this.setCoordinate(F,a,"z")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"yz",{get:function(){return this.coords_[H]},set:function(a){this.setCoordinate(H,a,"yz")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"zx",{get:function(){return this.coords_[I]},set:function(a){this.setCoordinate(I,a,"zx")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"xy",{get:function(){return this.coords_[G]},set:function(a){this.setCoordinate(G,a,"xy")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"b",{get:function(){return this.coords_[J]},set:function(a){this.setCoordinate(J,a,"b")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maskG3",{get:function(){var a=this.coords_,b=a[C],c=a[D],d=a[E],e=a[F],f=a[H],g=a[I],h=a[G],i=a[J],j=0;return 0!==b&&(j+=1),0===c&&0===d&&0===e||(j+=2),0===f&&0===g&&0===h||(j+=4),0!==i&&(j+=8),j},enumerable:!0,configurable:!0}),a.prototype.add=function(a,b){return void 0===b&&(b=1),this.isLocked()?o.lock(this.clone().add(a,b)):(this.a+=a.a*b,this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this.yz+=a.yz*b,this.zx+=a.zx*b,this.xy+=a.xy*b,this.b+=a.b*b,this)},a.prototype.addBivector=function(a){return this.isLocked()?o.lock(this.clone().addBivector(a)):(this.yz+=a.yz,this.zx+=a.zx,this.xy+=a.xy,this)},a.prototype.addPseudo=function(a){return this.isLocked()?o.lock(this.clone().addPseudo(a)):(this.b+=a,this)},a.prototype.addScalar=function(a){return this.isLocked()?o.lock(this.clone().addScalar(a)):(this.a+=a,this)},a.prototype.addVector=function(a,b){return void 0===b&&(b=1),this.isLocked()?this.clone().addVector(a,b):(this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this)},a.prototype.add2=function(a,b){if(this.isLocked())throw new o.TargetLockedError("add2");return this.a=a.a+b.a,this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.yz=a.yz+b.yz,this.zx=a.zx+b.zx,this.xy=a.xy+b.xy,this.b=a.b+b.b,this},a.prototype.arg=function(){return this.isLocked()?o.lock(this.clone().arg()):this.log().grade(2)},a.prototype.approx=function(a){return this.isLocked()?o.lock(this.clone().approx(a)):(f["default"](this.coords_,a),this)},a.prototype.clone=function(){return a.copy(this)},a.prototype.conj=function(){return this.isLocked()?o.lock(this.clone().conj()):(this.x=-this.x,this.y=-this.y,this.z=-this.z,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this)},a.prototype.copyCoordinates=function(a){if(this.isLocked())throw new o.TargetLockedError("copyCoordinates");return this.a=a[C],this.x=a[D],this.y=a[E],this.z=a[F],this.yz=a[H],this.zx=a[I],this.xy=a[G],this.b=a[J],this},a.prototype.distanceTo=function(a){if(a)return Math.sqrt(this.quadranceTo(a));throw new Error("point must be a VectorE3")},a.prototype.quadranceTo=function(a){if(a){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return b*b+c*c+d*d}throw new Error("point must be a VectorE3")},a.prototype.lco=function(a){return this.isLocked()?o.lock(this.clone().lco(a)):this.lco2(this,a)},a.prototype.lco2=function(a,b){if(this.isLocked())throw new o.TargetLockedError("lco2");return n["default"](a,b,this)},a.prototype.rco=function(a){return this.rco2(this,a)},a.prototype.rco2=function(a,b){if(this.isLocked())throw new o.TargetLockedError("rco2");return u["default"](a,b,this)},a.prototype.copy=function(a){if(this.isLocked())throw new o.TargetLockedError("copy");return this.a=a.a,this.x=a.x,this.y=a.y,this.z=a.z,this.yz=a.yz,this.zx=a.zx,this.xy=a.xy,this.b=a.b,this},a.prototype.copyScalar=function(a){if(this.isLocked())throw new o.TargetLockedError("copyScalar");return this.setCoordinate(C,a,"a"),this.setCoordinate(D,0,"x"),this.setCoordinate(E,0,"y"),this.setCoordinate(F,0,"z"),this.setCoordinate(H,0,"yz"),this.setCoordinate(I,0,"zx"),this.setCoordinate(G,0,"xy"),this.setCoordinate(J,0,"b"),this},a.prototype.copySpinor=function(a){if(this.isLocked())throw new o.TargetLockedError("copySpinor");return this.setCoordinate(C,a.a,"a"),this.setCoordinate(D,0,"x"),this.setCoordinate(E,0,"y"),this.setCoordinate(F,0,"z"),this.setCoordinate(H,a.yz,"yz"),this.setCoordinate(I,a.zx,"zx"),this.setCoordinate(G,a.xy,"xy"),this.setCoordinate(J,0,"b"),this},a.prototype.copyVector=function(a){if(this.isLocked())throw new o.TargetLockedError("copyVector");return this.setCoordinate(C,0,"a"),this.setCoordinate(D,a.x,"x"),this.setCoordinate(E,a.y,"y"),this.setCoordinate(F,a.z,"z"),this.setCoordinate(H,0,"yz"),this.setCoordinate(I,0,"zx"),this.setCoordinate(G,0,"xy"),this.setCoordinate(J,0,"b"),this},a.prototype.cross=function(a){return this.isLocked()?o.lock(this.clone().cross(a)):(this.ext(a),this.dual(this).neg(),this)},a.prototype.div=function(a){if(k["default"](a))return this.divByScalar(a.a);if(m["default"](a))return this.divByVector(a);if(this.isLocked())return o.lock(this.clone().div(a));var b=a.a,c=a.x,d=a.y,e=a.z,f=a.xy,g=a.yz,h=a.zx,i=a.b,l=[[b,c,d,e,-f,-g,-h,-i],[c,b,f,-h,-d,-i,e,-g],[d,-f,b,g,c,-e,-i,-h],[e,h,-g,b,-i,d,-c,-f],[f,-d,c,i,b,h,-g,e],[g,i,-e,d,-h,b,f,c],[h,e,i,-c,g,-f,b,d],[i,g,h,f,e,c,d,b]],n=[1,0,0,0,0,0,0,0],p=j["default"](l,n),r=this.a,s=this.x,t=this.y,u=this.z,v=this.xy,w=this.yz,x=this.zx,y=this.b,z=p[0],A=p[1],B=p[2],C=p[3],D=p[4],E=p[5],F=p[6],G=p[7],H=q["default"](r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,0),I=q["default"](r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,1),J=q["default"](r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,2),K=q["default"](r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,3),L=q["default"](r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,4),M=q["default"](r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,5),N=q["default"](r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,6),O=q["default"](r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,7);return this.a=H,this.x=I,this.y=J,this.z=K,this.xy=L,this.yz=M,this.zx=N,this.b=O,this},a.prototype.divByScalar=function(a){return this.isLocked()?o.lock(this.clone().divByScalar(a)):(this.a/=a,this.x/=a,this.y/=a,this.z/=a,this.yz/=a,this.zx/=a,this.xy/=a,this.b/=a,this)},a.prototype.divByVector=function(a){if(this.isLocked())return this.clone().divByVector(a);var b=a.x,c=a.y,d=a.z,e=b*b+c*c+d*d;return this.mulByVector(a).divByScalar(e)},a.prototype.div2=function(a,b){if(this.isLocked())throw new o.TargetLockedError("div2");var c=a.a,d=a.yz,e=a.zx,f=a.xy,g=b.a,h=b.yz,i=b.zx,j=b.xy;return this.a=c*g-d*h-e*i-f*j,this.yz=c*h+d*g-e*j+f*i,this.zx=c*i+d*j+e*g-f*h,this.xy=c*j-d*i+e*h+f*g,this},a.prototype.dual=function(a){if(this.isLocked())return this.clone().dual(a);if(a){var b=-a.b,c=-a.yz,d=-a.zx,e=-a.xy,f=a.x,g=a.y,h=a.z,i=a.a;return this.a=b,this.x=c,this.y=d,this.z=e,this.yz=f,this.zx=g,this.xy=h,this.b=i,this}return this.dual(this)},a.prototype.equals=function(b){if(b instanceof a){var c=b;return g["default"](this.coords_,c.coords_)}return!1},a.prototype.exp=function(){if(this.isLocked())return o.lock(this.clone().exp());var a=Math.exp(this.a),b=this.yz,c=this.zx,d=this.xy,e=Math.sqrt(b*b+c*c+d*d),f=0!==e?Math.sin(e)/e:1,g=Math.cos(e);return this.a=g,this.yz=b*f,this.zx=c*f,this.xy=d*f,this.scale(a)},a.prototype.inv=function(){if(this.isLocked())return o.lock(this.clone().inv());var a=this.a,b=this.x,c=this.y,d=this.z,e=this.xy,f=this.yz,g=this.zx,h=this.b,i=[[a,b,c,d,-e,-f,-g,-h],[b,a,e,-g,-c,-h,d,-f],[c,-e,a,f,b,-d,-h,-g],[d,g,-f,a,-h,c,-b,-e],[e,-c,b,h,a,g,-f,d],[f,h,-d,c,-g,a,e,b],[g,d,h,-b,f,-e,a,c],[h,f,g,e,d,b,c,a]],k=[1,0,0,0,0,0,0,0],l=j["default"](i,k);return this.a=l[0],this.x=l[1],this.y=l[2],this.z=l[3],this.xy=l[4],this.yz=l[5],this.zx=l[6],this.b=l[7],this},a.prototype.isOne=function(){return 1===this.a&&0===this.x&&0===this.y&&0===this.z&&0===this.yz&&0===this.zx&&0===this.xy&&0===this.b},a.prototype.isZero=function(){return 0===this.a&&0===this.x&&0===this.y&&0===this.z&&0===this.yz&&0===this.zx&&0===this.xy&&0===this.b},a.prototype.lerp=function(a,b){return this.isLocked()?o.lock(this.clone().lerp(a,b)):(this.a+=(a.a-this.a)*b,this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this.yz+=(a.yz-this.yz)*b,this.zx+=(a.zx-this.zx)*b,this.xy+=(a.xy-this.xy)*b,this.b+=(a.b-this.b)*b,this)},a.prototype.lerp2=function(a,b,c){if(this.isLocked())throw new o.TargetLockedError("lerp2");return this.copy(a).lerp(b,c),this},a.prototype.log=function(){if(this.isLocked())return o.lock(this.clone().log());var a=this.a,b=this.yz,c=this.zx,d=this.xy,e=b*b+c*c+d*d,f=Math.sqrt(e),g=Math.atan2(f,a)/f;return this.a=Math.log(Math.sqrt(a*a+e)),this.yz=b*g,this.zx=c*g,this.xy=d*g,this},a.prototype.magnitude=function(){return Math.sqrt(this.quaditude())},a.prototype.mul=function(a){return this.isLocked()?o.lock(this.clone().mul(a)):this.mul2(this,a)},a.prototype.mulByVector=function(a){var b=this.a,c=this.x,d=this.y,e=this.z,f=this.xy,g=this.yz,h=this.zx,i=this.b,j=0,k=a.x,l=a.y,m=a.z,n=0,o=0,p=0,r=0;return this.a=q["default"](b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,r,0),this.x=q["default"](b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,r,1),this.y=q["default"](b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,r,2),this.z=q["default"](b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,r,3),this.xy=q["default"](b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,r,4),this.yz=q["default"](b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,r,5),this.zx=q["default"](b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,r,6),this.b=q["default"](b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,r,7),this},a.prototype.mul2=function(a,b){if(this.isLocked())throw new o.TargetLockedError("mul2");var c=a.a,d=a.x,e=a.y,f=a.z,g=a.xy,h=a.yz,i=a.zx,j=a.b,k=b.a,l=b.x,m=b.y,n=b.z,p=b.xy,r=b.yz,s=b.zx,t=b.b;return this.a=q["default"](c,d,e,f,g,h,i,j,k,l,m,n,p,r,s,t,0),this.x=q["default"](c,d,e,f,g,h,i,j,k,l,m,n,p,r,s,t,1),this.y=q["default"](c,d,e,f,g,h,i,j,k,l,m,n,p,r,s,t,2),this.z=q["default"](c,d,e,f,g,h,i,j,k,l,m,n,p,r,s,t,3),this.xy=q["default"](c,d,e,f,g,h,i,j,k,l,m,n,p,r,s,t,4),this.yz=q["default"](c,d,e,f,g,h,i,j,k,l,m,n,p,r,s,t,5),this.zx=q["default"](c,d,e,f,g,h,i,j,k,l,m,n,p,r,s,t,6),this.b=q["default"](c,d,e,f,g,h,i,j,k,l,m,n,p,r,s,t,7),this},a.prototype.neg=function(){return this.isLocked()?o.lock(this.clone().neg()):(this.a=-this.a,this.x=-this.x,this.y=-this.y,this.z=-this.z,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this.b=-this.b,this)},a.prototype.norm=function(){return this.isLocked()?o.lock(this.clone().norm()):(this.a=this.magnitude(),this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0,this)},a.prototype.direction=function(){return this.normalize()},a.prototype.normalize=function(){if(this.isLocked())return o.lock(this.clone().normalize());var a=this.magnitude();return 0!==a&&(this.a=this.a/a,this.x=this.x/a,this.y=this.y/a,this.z=this.z/a,this.yz=this.yz/a,this.zx=this.zx/a,this.xy=this.xy/a,this.b=this.b/a),this},a.prototype.one=function(){if(this.isLocked())throw new o.TargetLockedError("one");return this.a=1,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0,this},a.prototype.squaredNorm=function(){return this.isLocked()?o.lock(this.clone().squaredNorm()):(this.a=x["default"](this),this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0,this)},a.prototype.quaditude=function(){return x["default"](this)},a.prototype.reflect=function(a){if(this.isLocked())return o.lock(this.clone().reflect(a));var b=a.x,c=a.y,d=a.z,e=b*b,f=c*c,g=d*d,h=e+f+g,i=2*c*d,j=2*d*b,k=2*b*c,l=f+g-e,m=g+e-f,n=e+f-g,p=this.coords_,q=p[C],r=p[D],s=p[E],t=p[F],u=p[G],v=p[H],w=p[I],x=p[J];return this.setCoordinate(C,-h*q,"a"),this.setCoordinate(D,r*l-s*k-t*j,"x"),this.setCoordinate(E,s*m-t*i-r*k,"y"),this.setCoordinate(F,t*n-r*j-s*i,"z"),this.setCoordinate(G,u*n-v*j-w*i,"xy"),this.setCoordinate(H,v*l-w*k-u*j,"yz"),this.setCoordinate(I,w*m-u*i-v*k,"zx"),this.setCoordinate(J,-h*x,"b"),this},a.prototype.rev=function(){return this.isLocked()?o.lock(this.clone().rev()):(this.a=+this.a,
this.x=+this.x,this.y=+this.y,this.z=+this.z,this.yz=-this.yz,this.zx=-this.zx,this.xy=-this.xy,this.b=-this.b,this)},a.prototype.rotate=function(a){if(this.isLocked())return o.lock(this.clone().rotate(a));var b=this.x,c=this.y,d=this.z,e=a.xy,f=a.yz,g=a.zx,h=a.a,i=h*b-g*d+e*c,j=h*c-e*b+f*d,k=h*d-f*c+g*b,l=f*b+g*c+e*d;return this.x=i*h+l*f+j*e-k*g,this.y=j*h+l*g+k*f-i*e,this.z=k*h+l*e+i*g-j*f,this},a.prototype.rotorFromAxisAngle=function(a,b){if(this.isLocked())throw new o.TargetLockedError("rotorFromAxisAngle");var c=a.x,d=a.y,e=a.z,f=c*c+d*d+e*e;if(1===f)return this.rotorFromGeneratorAngle({yz:c,zx:d,xy:e},b);var g=Math.sqrt(f),h=c/g,i=d/g,j=e/g;return this.rotorFromGeneratorAngle({yz:h,zx:i,xy:j},b)},a.prototype.rotorFromDirections=function(a,b){if(this.isLocked())throw new o.TargetLockedError("rotorFromDirections");var c=void 0;return this.rotorFromVectorToVector(a,b,c)},a.prototype.rotorFromTwoVectors=function(b,c,d,e){var f=a.rotorFromDirections(b,c),g=a.fromVector(d).rotate(f),h=a.dualOfVector(c),i=a.rotorFromVectorToVector(g,e,h);return this.mul2(i,f)},a.prototype.rotorFromFrameToFrame=function(a,b){if(this.isLocked())throw new o.TargetLockedError("rotorFromFrameToFrame");for(var c=-1,e=void 0,f=0;f<3;f++)S[f]=d(a[f],b[f]),S[f]>c&&(e=f,c=S[f]);if("number"==typeof e){var g=(e+1)%3;return this.rotorFromTwoVectors(a[e],b[e],a[g],b[g])}throw new Error("Unable to compute rotor.")},a.prototype.rotorFromGeneratorAngle=function(a,b){if(this.isLocked())throw new o.TargetLockedError("rotorFromGeneratorAngle");var c=b/2,d=a.yz,e=a.zx,f=a.xy,g=Math.sqrt(d*d+e*e+f*f),h=g*c,i=Math.sin(h)/g;return this.a=Math.cos(h),this.x=0,this.y=0,this.z=0,this.yz=-d*i,this.zx=-e*i,this.xy=-f*i,this.b=0,this},a.prototype.rotorFromVectorToVector=function(a,b,c){if(this.isLocked())throw new o.TargetLockedError("rotorFromVectorToVector");return v["default"](a,b,c,this),this},a.prototype.scp=function(a){return this.isLocked()?o.lock(this.clone().scp(a)):this.scp2(this,a)},a.prototype.scp2=function(a,b){if(this.isLocked())throw new o.TargetLockedError("scp2");return w["default"](a,b,this)},a.prototype.scale=function(a){return this.isLocked()?o.lock(this.clone().scale(a)):(this.a*=a,this.x*=a,this.y*=a,this.z*=a,this.yz*=a,this.zx*=a,this.xy*=a,this.b*=a,this)},a.prototype.stress=function(a){return this.isLocked()?o.lock(this.clone().stress(a)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)},a.prototype.versor=function(a,b){if(this.isLocked())throw new o.TargetLockedError("versor");var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,i=b.z;return this.zero(),this.a=h["default"](a,b),this.yz=A["default"](c,d,e,f,g,i),this.zx=B["default"](c,d,e,f,g,i),this.xy=z["default"](c,d,e,f,g,i),this},a.prototype.sub=function(a,b){return void 0===b&&(b=1),this.isLocked()?o.lock(this.clone().sub(a,b)):(this.a-=a.a*b,this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this.yz-=a.yz*b,this.zx-=a.zx*b,this.xy-=a.xy*b,this.b-=a.b*b,this)},a.prototype.subVector=function(a,b){return void 0===b&&(b=1),this.isLocked()?o.lock(this.clone().subVector(a,b)):(this.x-=a.x*b,this.y-=a.y*b,this.z-=a.z*b,this)},a.prototype.sub2=function(a,b){if(this.isLocked())throw new o.TargetLockedError("sub2");return this.a=a.a-b.a,this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.yz=a.yz-b.yz,this.zx=a.zx-b.zx,this.xy=a.xy-b.xy,this.b=a.b-b.b,this},a.prototype.toArray=function(){return c(this)},a.prototype.toExponential=function(a){var b=function(b){return b.toExponential(a)};return y["default"](c(this),b,K)},a.prototype.toFixed=function(a){var b=function(b){return b.toFixed(a)};return y["default"](c(this),b,K)},a.prototype.toPrecision=function(a){var b=function(b){return b.toPrecision(a)};return y["default"](c(this),b,K)},a.prototype.toString=function(a){var b=function(b){return b.toString(a)};return y["default"](c(this),b,K)},a.prototype.grade=function(a){if(this.isLocked())return o.lock(this.clone().grade(a));switch(s["default"]("i",a),a){case 0:this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0;break;case 1:this.a=0,this.yz=0,this.zx=0,this.xy=0,this.b=0;break;case 2:this.a=0,this.x=0,this.y=0,this.z=0,this.b=0;break;case 3:this.a=0,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0;break;default:this.a=0,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0}return this},a.prototype.ext=function(a){return this.isLocked()?o.lock(this.clone().ext(a)):this.ext2(this,a)},a.prototype.ext2=function(a,b){if(this.isLocked())throw new o.TargetLockedError("ext2");return i["default"](a,b,this)},a.prototype.zero=function(){if(this.isLocked())throw new o.TargetLockedError("zero");return this.a=0,this.x=0,this.y=0,this.z=0,this.yz=0,this.zx=0,this.xy=0,this.b=0,this},a.prototype.__add__=function(a){var b=p["default"](a);return b?o.lock(this.clone().add(b)):l["default"](a)?o.lock(this.clone().addVector(a)):void 0},a.prototype.__radd__=function(b){return b instanceof a?o.lock(a.copy(b).add(this)):"number"==typeof b?o.lock(a.scalar(b).add(this)):l["default"](b)?o.lock(a.fromVector(b).add(this)):void 0},a.prototype.__div__=function(a){var b=p["default"](a);return b?o.lock(this.clone().div(b)):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?o.lock(a.copy(b).div(this)):"number"==typeof b?o.lock(a.scalar(b).div(this)):void 0},a.prototype.__mul__=function(a){var b=p["default"](a);return b?o.lock(this.clone().mul(b)):void 0},a.prototype.__rmul__=function(b){return b instanceof a?o.lock(a.copy(b).mul(this)):"number"==typeof b?o.lock(a.copy(this).scale(b)):void 0},a.prototype.__sub__=function(a){var b=p["default"](a);return b?o.lock(this.clone().sub(b)):void 0},a.prototype.__rsub__=function(b){return b instanceof a?o.lock(a.copy(b).sub(this)):"number"==typeof b?o.lock(a.scalar(b).sub(this)):void 0},a.prototype.__wedge__=function(b){return b instanceof a?o.lock(a.copy(this).ext(b)):"number"==typeof b?o.lock(a.copy(this).scale(b)):void 0},a.prototype.__rwedge__=function(b){return b instanceof a?o.lock(a.copy(b).ext(this)):"number"==typeof b?o.lock(a.copy(this).scale(b)):void 0},a.prototype.__lshift__=function(b){return b instanceof a?o.lock(a.copy(this).lco(b)):"number"==typeof b?o.lock(a.copy(this).lco(a.scalar(b))):void 0},a.prototype.__rlshift__=function(b){return b instanceof a?o.lock(a.copy(b).lco(this)):"number"==typeof b?o.lock(a.scalar(b).lco(this)):void 0},a.prototype.__rshift__=function(b){return b instanceof a?o.lock(a.copy(this).rco(b)):"number"==typeof b?o.lock(a.copy(this).rco(a.scalar(b))):void 0},a.prototype.__rrshift__=function(b){return b instanceof a?o.lock(a.copy(b).rco(this)):"number"==typeof b?o.lock(a.scalar(b).rco(this)):void 0},a.prototype.__vbar__=function(b){return b instanceof a?o.lock(a.copy(this).scp(b)):"number"==typeof b?o.lock(a.copy(this).scp(a.scalar(b))):void 0},a.prototype.__rvbar__=function(b){return b instanceof a?o.lock(a.copy(b).scp(this)):"number"==typeof b?o.lock(a.scalar(b).scp(this)):void 0},a.prototype.__bang__=function(){return o.lock(a.copy(this).inv())},a.prototype.__pos__=function(){return o.lock(a.copy(this))},a.prototype.__neg__=function(){return o.lock(a.copy(this).neg())},a.prototype.__tilde__=function(){return o.lock(a.copy(this).rev())},a.one=function(b){return void 0===b&&(b=!1),b?a.ONE:a.scalar(1)},a.e1=function(b){return void 0===b&&(b=!1),b?a.E1:a.vector(1,0,0)},a.e2=function(b){return void 0===b&&(b=!1),b?a.E2:a.vector(0,1,0)},a.e3=function(b){return void 0===b&&(b=!1),b?a.E3:a.vector(0,0,1)},a.I=function(b){return void 0===b&&(b=!1),b?a.PSEUDO:a.pseudo(1)},a.bivector=function(b,c,d){return new a(O(b,c,d))},a.copy=function(b){return new a(c(b))},a.dualOfBivector=function(b){return new a(N(-b.yz,-b.zx,-b.xy))},a.dualOfVector=function(b){return new a(O(b.x,b.y,b.z))},a.fromBivector=function(b){return a.bivector(b.yz,b.zx,b.xy)},a.fromScalar=function(b){return a.scalar(b.a)},a.fromSpinor=function(b){return a.spinor(b.yz,b.zx,b.xy,b.a)},a.fromVector=function(b){return a.vector(b.x,b.y,b.z)},a.lerp=function(b,c,d){return a.copy(b).lerp(c,d)},a.pseudo=function(b){return new a(R(b))},a.random=function(b,c){void 0===b&&(b=-1),void 0===c&&(c=1);var d=t["default"](b,c),e=t["default"](b,c),f=t["default"](b,c),g=t["default"](b,c),h=t["default"](b,c),i=t["default"](b,c),j=t["default"](b,c),k=t["default"](b,c);return new a(Q(d,e,f,g,h,i,j,k))},a.rotorFromDirections=function(b,c){return new a(L()).rotorFromDirections(b,c)},a.rotorFromFrameToFrame=function(b,c){return new a(L()).rotorFromFrameToFrame(b,c)},a.rotorFromVectorToVector=function(b,c,d){return new a(L()).rotorFromVectorToVector(b,c,d)},a.scalar=function(b){return new a(M(b))},a.spinor=function(b,c,d,e){return new a(P(e,b,c,d))},a.vector=function(b,c,d){return new a(N(b,c,d))},a.wedge=function(b,c){var d=b.x,e=b.y,f=b.z,g=c.x,h=c.y,i=c.z,j=A["default"](d,e,f,g,h,i),k=B["default"](d,e,f,g,h,i),l=z["default"](d,e,f,g,h,i);return a.bivector(j,k,l)},a.zero=function(b){return void 0===b&&(b=!1),b?a.ZERO:new a(L())},a}(),T.ZERO=new T(M(0)),T.ONE=new T(M(1)),T.E1=new T(N(1,0,0)),T.E2=new T(N(0,1,0)),T.E3=new T(N(0,0,1)),T.PSEUDO=new T(R(1)),a("Geometric3",T),e["default"](T,[o.LockableMixin]),T.E1.lock(),T.E2.lock(),T.E3.lock(),T.PSEUDO.lock(),T.ONE.lock(),T.ZERO.lock(),a("default",T)}}}),System.register("davinci-eight/visual/tiltFromOptions.js",["../math/Geometric3"],function(a,b){"use strict";function c(a){return 1!==a.a||0!==a.xy||0!==a.yz||0!==a.zx?{a:a.a,xy:a.xy,yz:a.yz,zx:a.zx}:void 0}function d(a,b){if(a.tilt)return c(a.tilt);if(a.axis){var d=a.axis;return c(e.Geometric3.rotorFromDirections(b,d))}return c(e.Geometric3.ONE)}b&&b.id;a("default",d);var e;return{setters:[function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/visual/Turtle.js",["../core/BeginMode","../core/Color","../core/DataType","./Defaults","../math/Geometric3","../core/GeometryArrays","../core/GraphicsProgramSymbols","./materialFromOptions","../core/Mesh","./offsetFromOptions","./setAxisAndMeridian","./setColorOption","../geometries/SimplexMode","./simplexModeFromOptions","./tiltFromOptions","../math/R3"],function(a,b){"use strict";function c(a,b){return a.concat(b)}function d(a,b){if(b.tilt||b.offset){var c=a.map(function(a){return j["default"].vector(a[0],a[1],a[2])});return b.tilt&&c.forEach(function(a){a.rotate(b.tilt)}),b.offset&&c.forEach(function(a){a.addVector(b.offset)}),c.map(function(a){return[a.x,a.y,a.z]})}return a}function e(a){var b=d([z,A,z,y,v,w,v,x,w,x],a).reduce(c),e={mode:f["default"].LINES,attributes:{}};return e.attributes[l["default"].ATTRIBUTE_POSITION]={values:b,size:3,type:h["default"].FLOAT},e}var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a}],execute:function(){v=[0,1,0],w=[-1,-1,0],x=[1,-1,0],y=[0,-1,0],z=[0,0,0],A=[-.5,0,0],B=u["default"](0,0,1),C=function(a){function b(b,c,d){void 0===c&&(c={kind:"TurtleGeometry"}),void 0===d&&(d=0);var f=a.call(this,b,e(c),c)||this;return f.setLoggingName("TurtleGeometry"),0===d&&f.synchUp(),f}return E(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("TurtleGeometry"),0===b&&this.synchUp()},b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},b}(k["default"]),D=function(a){function b(b,c,d){void 0===c&&(c={}),void 0===d&&(d=0);var e=a.call(this,void 0,void 0,b,{axis:i.ds.axis,meridian:i.ds.meridian},d+1)||this;e.setLoggingName("Turtle");var f={kind:"TurtleGeometry"};f.tilt=t["default"](c,B),f.offset=o["default"](c);var h=b.getCacheGeometry(f);if(h&&h instanceof C)e.geometry=h,h.release();else{var j=new C(b,f);e.geometry=j,j.release(),b.putCacheGeometry(f,j)}var k=m["default"](b,s["default"](c,r["default"].LINE),c);return e.material=k,k.release(),e.height=.1,e.width=.0618,p["default"](e,c),q["default"](e,c,g["default"].gray),0===d&&e.synchUp(),e}return E(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"width",{get:function(){return this.getScaleX()},set:function(a){var b=this.getScaleY(),c=this.getScaleZ();this.setScale(a,b,c)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this.getScaleY()},set:function(a){var b=this.getScaleX(),c=this.getScaleZ();this.setScale(b,a,c)},enumerable:!0,configurable:!0}),b}(n["default"]),a("default",D)}}}),System.register("davinci-eight/math/dotVectorE3.js",[],function(a,b){"use strict";function c(a,b){return a.x*b.x+a.y*b.y+a.z*b.z}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeNumber.js",["../checks/mustSatisfy","../checks/isNumber"],function(a,b){"use strict";function c(){return"be a `number`"}function d(a,b,d){return e["default"](a,f["default"](b),c,d),b}b&&b.id;a("default",d);var e,f;return{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/math/wedgeXY.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f){return a*e-b*d}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/wedgeYZ.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f){return b*f-c*e}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/math/wedgeZX.js",[],function(a,b){"use strict";function c(a,b,c,d,e,f){return c*d-a*f}b&&b.id;return{setters:[],execute:function(){a("default",c)}}}),System.register("davinci-eight/math/R3.js",["../checks/mustBeNumber","./wedgeXY","./wedgeYZ","./wedgeZX"],function(a,b){"use strict";function c(a){return e(a.x,a.y,a.z)}function d(a,b,c){return e(a,b,c)}function e(a,b,c){var d=function(d){return a*d.x+b*d.y+c*d.z},j=function(){return Math.sqrt(a*a+b*b+c*c)},k=function(d){var f=d.x,g=d.y,h=d.z,i=a*f+b*g+c*h,j=f*f+g*g+h*h,k=i/j;return e(k*f,k*g,k*h)},l=function(d){var f=d.x,g=d.y,h=d.z,i=a*f+b*g+c*h,j=f*f+g*g+h*h,k=i/j;return e(a-k*f,b-k*g,c-k*h)},m=function(d){var f=d.xy,g=d.yz,h=d.zx,i=d.a,j=i*a-h*c+f*b,k=i*b-f*a+g*c,l=i*c-g*b+h*a,m=g*a+h*b+f*c;return e(j*i+m*g+k*f-l*h,k*i+m*h+l*g-j*f,l*i+m*f+j*h-k*g)},n=function(d){return e(d*a,d*b,d*c)},o={get x(){return a},get y(){return b},get z(){return c},add:function(d){return e(a+d.x,b+d.y,c+d.z)},cross:function(d){var f=h["default"](a,b,c,d.x,d.y,d.z),j=i["default"](a,b,c,d.x,d.y,d.z),k=g["default"](a,b,c,d.x,d.y,d.z);return e(f,j,k)},direction:function(){var d=Math.sqrt(a*a+b*b+c*c);return 0!==d?e(a/d,b/d,c/d):void 0},dot:d,magnitude:j,projectionOnto:k,rejectionFrom:l,rotate:m,scale:n,sub:function(d){return e(a-d.x,b-d.y,c-d.z)},__add__:function(d){return e(a+d.x,b+d.y,c+d.z)},__radd__:function(d){return e(d.x+a,d.y+b,d.z+c)},__sub__:function(d){return e(a-d.x,b-d.y,c-d.z)},__rsub__:function(d){return e(d.x-a,d.y-b,d.z-c)},__mul__:function(d){return f["default"]("rhs",d),e(a*d,b*d,c*d)},__rmul__:function(d){return f["default"]("lhs",d),e(d*a,d*b,d*c)},__pos__:function(){return o},__neg__:function(){return e(-a,-b,-c)},toString:function(){return"["+a+", "+b+", "+c+"]"}};return Object.freeze(o)}b&&b.id;a("vectorCopy",c),a("vectorFromCoords",d),a("default",e);var f,g,h,i;return{setters:[function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){}}}),System.register("davinci-eight/diagram/Diagram3D.js",["../math/dotVectorE3","../checks/isDefined","../math/R3"],function(a,b){"use strict";function c(a,b,c,f,g){var h=d(a,b.eye,b.look,b.up),i=c.near,j=c.far,k=c.fov,l=c.aspect,m=e(h,i,j,k,l),n=(m.x+1)*f/2,o=(1-m.y)*g/2;return{x:n,y:o}}function d(a,b,c,d){var e=h.vectorCopy(b).sub(c).direction(),g=h.vectorCopy(d).cross(e).direction(),i=e.cross(g),j=-f["default"](b,g),k=-f["default"](b,i),l=-f["default"](b,e),m=f["default"](a,g)+j,n=f["default"](a,i)+k,o=f["default"](a,e)+l;return h.vectorFromCoords(m,n,o)}function e(a,b,c,d,e){var f=a.x,g=a.y,i=a.z,j=Math.tan(d/2),k=-i,l=f/(k*e*j),m=g/(k*j),n=((c+b)*i+2*c*b)/(i*(c-b));return h.vectorFromCoords(l,m,n)}b&&b.id;a("canvasCoords",c),a("view",d),a("perspective",e);var f,g,h,i;return{setters:[function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(){function a(a,b,c){if(g["default"](a)){var d=document.getElementById(a);this.ctx=d.getContext("2d"),this.ctx.strokeStyle="#FFFFFF",this.ctx.fillStyle="#ffffff",this.ctx.font="24px Helvetica"}g["default"](b)&&(g["default"](c)?(this.camera=b,this.prism=c):(this.camera=b,this.prism=b))}return Object.defineProperty(a.prototype,"canvas",{get:function(){return this.ctx.canvas},enumerable:!0,configurable:!0}),a.prototype.beginPath=function(){this.ctx.beginPath()},a.prototype.clear=function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)},a.prototype.closePath=function(){this.ctx.closePath()},a.prototype.fill=function(a){this.ctx.fill(a)},a.prototype.fillText=function(a,b,d){var e=c(b,this.camera,this.prism,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.fillText(a,e.x,e.y,d)},a.prototype.moveTo=function(a){var b=c(a,this.camera,this.prism,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.moveTo(b.x,b.y)},a.prototype.lineTo=function(a){var b=c(a,this.camera,this.prism,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.lineTo(b.x,b.y)},a.prototype.stroke=function(){this.ctx.stroke()},a.prototype.strokeText=function(a,b,d){var e=c(b,this.camera,this.prism,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.strokeText(a,e.x,e.y,d)},a}(),a("default",i)}}}),System.register("davinci-eight/core/DataType.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.BYTE=5120]="BYTE",a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.SHORT=5122]="SHORT",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.INT=5124]="INT",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.FLOAT=5126]="FLOAT"}(c||(c={})),a("DataType",c),a("default",c)}}}),System.register("davinci-eight/core/PixelFormat.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.ALPHA=6406]="ALPHA",a[a.RGB=6407]="RGB",a[a.RGBA=6408]="RGBA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA"}(c||(c={})),a("PixelFormat",c),a("default",c)}}}),System.register("davinci-eight/checks/isUndefined.js",[],function(a,b){"use strict";function c(a){return"undefined"==typeof a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeUndefined.js",["../checks/mustSatisfy","../checks/isUndefined"],function(a,b){"use strict";function c(){return"be 'undefined'"}function d(a,b,d){return e["default"](a,f["default"](b),c,d),b}b&&b.id;a("default",d);var e,f;return{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/checks/isEQ.js",[],function(a,b){"use strict";function c(a,b){return a===b}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeEQ.js",["../checks/mustSatisfy","../checks/isEQ"],function(a,b){"use strict";function c(a,b,c,f){return d["default"](a,e["default"](b,c),function(){return"be equal to "+c},f),b}b&&b.id;a("default",c);var d,e;return{setters:[function(a){d=a},function(a){e=a}],execute:function(){}}}),System.register("davinci-eight/checks/isNumber.js",[],function(a,b){"use strict";function c(a){return"number"==typeof a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/isInteger.js",["../checks/isNumber"],function(a,b){"use strict";function c(a){return d["default"](a)&&a%1===0}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/checks/mustBeInteger.js",["../checks/mustSatisfy","../checks/isInteger"],function(a,b){"use strict";function c(){return"be an integer"}function d(a,b,d){return e["default"](a,f["default"](b),c,d),b}b&&b.id;a("default",d);var e,f;return{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/i18n/readOnly.js",["../checks/mustBeString"],function(a,b){"use strict";function c(a){d["default"]("name",a);var b={get message(){return"Property `"+a+"` is readonly."}};return b}b&&b.id;a("default",c);var d;return{setters:[function(a){d=a}],execute:function(){}}}),System.register("davinci-eight/config.js",[],function(a,b){"use strict";var c,d;b&&b.id;return{setters:[],execute:function(){c=function(){function a(){this.GITHUB="https://github.com/geometryzen/davinci-eight",this.LAST_MODIFIED="2017-03-06",this.NAMESPACE="EIGHT",this.VERSION="6.0.7"}return a.prototype.log=function(a){console.log(a)},a.prototype.info=function(a){console.log(a)},a.prototype.warn=function(a){console.warn(a)},a.prototype.error=function(a){console.error(a)},a}(),d=new c,a("default",d)}}}),System.register("davinci-eight/core/refChange.js",["../config","../checks/isDefined"],function(a,b){"use strict";function c(a){return t+": "+a}function d(a){return m["default"].log(c(a))}function e(a){return m["default"].warn(c(a))}function f(a){return m["default"].error(c(a))}function g(){var a=Object.keys(o);a.forEach(function(a){var b=o[a];0===b.refCount&&delete o[a]})}function h(){for(var a=Object.keys(o),b=a.length,c=0,d=0;d<b;d++){var e=a[d],f=o[e];c+=f.refCount}return c}function i(){return q&&e("Nothing to see because skip mode is "+q),g(),h()}function j(a){return"There are "+a+" outstanding reference counts."}function k(){var a=i();return a>0?(m["default"].warn("Memory Leak!"),m["default"].warn(j(a)),m["default"].warn(JSON.stringify(o,null,2))):p&&m["default"].log(j(a)),a}function l(a,b,e){if(void 0===e&&(e=0),0===e||!q){if(r)if(s){if(b===s){var g=o[a];d(g?e+" on "+a+" @ "+b:e+" on "+a+" @ "+b)}}else d(e+" on "+a+" @ "+b);if(1===e){var g=o[a];g?g.name=b:(g={refCount:0,name:b,zombie:!1},o[a]=g),g.refCount+=e}else if(e===-1){var g=o[a];g?(g.refCount+=e,0===g.refCount?g.zombie=!0:g.refCount<0&&f("refCount < 0 for "+b)):f(e+" on "+a+" @ "+b)}else{if(0!==e)throw new Error(c("change must be +1 or -1 for normal recording, or 0 for logging to the console."));var h=n["default"](b)?a+" @ "+b:a;if("stop"===a)return p&&d(h),i();if("dump"===a)return k();if("verbose"===a)p=!0;else if("quiet"===a)p=!1;else if("start"===a)p&&d(h),q=!1,r=!1;else if("reset"===a)p&&d(h),o={},p=!0,q=!0,r=!1,s=void 0;else{if("trace"!==a)throw new Error(c("Unexpected command uuid => "+a+", name => "+b));p&&d(h),q=!1,r=!0,s=b}}}}b&&b.id;a("default",l);var m,n,o,p,q,r,s,t;return{setters:[function(a){m=a},function(a){n=a}],execute:function(){o={},p=!0,q=!0,r=!1,s=void 0,t="refChange"}}}),System.register("davinci-eight/core/uuid4.js",[],function(a,b){"use strict";function c(){var a=function(a){return Math.pow(2,a)},b=a(6),c=a(8),d=a(12),e=a(16),f=a(32),g=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},h=function(){return g(0,b-1)},i=function(){return g(0,c-1)},j=function(){return g(0,d-1)},k=function(){return g(0,e-1)},l=function(){return g(0,f-1)},m=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},n=function(a,b,c){a=String(a),c=c?c:"0";for(var d=b-a.length;d>0;d>>>=1,c+=c)1&d&&(a=c+a);return a},o=function(a,b,c,d,e,f){var g=n(a.toString(16),8)+"-"+n(b.toString(16),4)+"-"+n(c.toString(16),4)+"-"+n(d.toString(16),2)+n(e.toString(16),2)+"-"+n(f.toString(16),12);return g};return{generate:function(){return o(l(),k(),16384|j(),128|h(),i(),m())},validate:function(a){var b=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return b.test(a)}}}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/core/ShareableBase.js",["../checks/isDefined","../checks/mustBeEQ","../checks/mustBeInteger","../checks/mustBeString","../i18n/readOnly","./refChange","./uuid4"],function(a,b){"use strict";var c,d,e,f,g,h,i,j;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(){function a(){this._uuid=i["default"]().generate(),this._type="ShareableBase",this._levelUp=0,this._refCount=1,h["default"](this._uuid,this._type,1)}return a.prototype.resurrector=function(a,b){if(void 0===b&&(b=!1),b)throw new Error("`protected resurrector(levelUp: number): void` method should be implemented by `"+this._type+"`.");this._levelUp=0,this._refCount=1,h["default"](this._uuid,this._type,1)},a.prototype.destructor=function(a,b){void 0===b&&(b=!1),e["default"]("levelUp",a),d["default"](this._type+" constructor-destructor chain mismatch: destructor index "+a,a,this._levelUp),b&&console.warn("`protected destructor(): void` method should be implemented by `"+this._type+"`."),this._levelUp=void 0},Object.defineProperty(a.prototype,"levelUp",{get:function(){return this._levelUp},set:function(a){throw new Error(g["default"]("levelUp").message)},enumerable:!0,configurable:!0}),a.prototype.isZombie=function(){return"undefined"==typeof this._refCount},a.prototype.addRef=function(){return this.isZombie()?(this.resurrector(0,!0),this._refCount):(this._refCount++,h["default"](this._uuid,this._type,1),this._refCount)},a.prototype.getLoggingName=function(){return this._type},a.prototype.setLoggingName=function(a){this._type=f["default"]("name",a),this._levelUp+=1,h["default"](this._uuid,a,1),h["default"](this._uuid,a,-1)},a.prototype.release=function(){this._refCount--,h["default"](this._uuid,this._type,-1);var a=this._refCount;if(0===a&&(this.destructor(0,!0),this._refCount=void 0,c["default"](this._levelUp)))throw new Error(this._type+".destructor method is not calling all the way up the chain.");return a},Object.defineProperty(a.prototype,"uuid",{get:function(){return this._uuid},enumerable:!0,configurable:!0}),a}(),a("ShareableBase",j),a("default",j)}}}),System.register("davinci-eight/core/ShareableContextConsumer.js",["../checks/mustBeNonNullObject","./ShareableBase"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(a){function b(b){var d=a.call(this)||this;return d.contextManager=b,d.isSubscribed=!1,c["default"]("contextManager",b),d.setLoggingName("ShareableContextConsumer"),b.addRef(),d.subscribe(!1),d}return f(b,a),b.prototype.resurrector=function(b){a.prototype.resurrector.call(this,b+1),this.setLoggingName("ShareableContextConsumer"),this.contextManager.addRef(),this.subscribe(!1)},b.prototype.destructor=function(b){this.unsubscribe(!1),this.contextManager.release(),a.prototype.destructor.call(this,b+1)},b.prototype.subscribe=function(a){this.isSubscribed||(this.contextManager.addContextListener(this),this.isSubscribed=!0,a&&this.synchUp())},b.prototype.unsubscribe=function(a){this.isSubscribed&&(this.contextManager.removeContextListener(this),this.isSubscribed=!1,a&&this.cleanUp())},b.prototype.synchUp=function(){this.contextManager.synchronize(this)},b.prototype.cleanUp=function(){this.gl&&(this.gl.isContextLost()?this.contextLost():this.contextFree())},b.prototype.contextFree=function(){},b.prototype.contextGain=function(){},b.prototype.contextLost=function(){},Object.defineProperty(b.prototype,"gl",{get:function(){return this.contextManager.gl},enumerable:!0,configurable:!0}),b}(d["default"]),a("ShareableContextConsumer",e),a("default",e)}}}),System.register("davinci-eight/core/TextureParameterName.js",[],function(a,b){"use strict";var c;b&&b.id;return{setters:[],execute:function(){!function(a){a[a.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",a[a.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",a[a.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",a[a.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T"}(c||(c={})),a("TextureParameterName",c),a("default",c)}}}),System.register("davinci-eight/core/Texture.js",["../checks/mustBeUndefined","./ShareableContextConsumer","./TextureParameterName"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(b,c,d){void 0===d&&(d=0);var e=a.call(this,c)||this;return e.setLoggingName("Texture"),e._target=b,0===d&&e.synchUp(),e}return g(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1),c["default"](this.getLoggingName(),this._texture)},b.prototype.contextFree=function(){this._texture&&(this.gl.deleteTexture(this._texture),this._texture=void 0,a.prototype.contextFree.call(this))},b.prototype.contextGain=function(){this._texture||(a.prototype.contextGain.call(this),this._texture=this.contextManager.gl.createTexture())},b.prototype.contextLost=function(){this._texture=void 0,a.prototype.contextLost.call(this)},b.prototype.bind=function(){this.gl?this.gl.bindTexture(this._target,this._texture):console.warn(this.getLoggingName()+".bind() missing WebGL rendering context.")},b.prototype.unbind=function(){this.gl?this.gl.bindTexture(this._target,null):console.warn(this.getLoggingName()+".unbind() missing WebGL rendering context.")},Object.defineProperty(b.prototype,"minFilter",{get:function(){throw new Error("minFilter is write-only")},set:function(a){this.gl?(this.bind(),this.gl.texParameteri(this._target,e["default"].TEXTURE_MIN_FILTER,a),this.unbind()):console.warn(this.getLoggingName()+".minFilter missing WebGL rendering context.")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"magFilter",{get:function(){throw new Error("magFilter is write-only")},set:function(a){this.gl?(this.bind(),this.gl.texParameteri(this._target,e["default"].TEXTURE_MAG_FILTER,a),this.unbind()):console.warn(this.getLoggingName()+".magFilter missing WebGL rendering context.")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"wrapS",{get:function(){throw new Error("wrapS is write-only")},set:function(a){this.gl?(this.bind(),this.gl.texParameteri(this._target,e["default"].TEXTURE_WRAP_S,a),this.unbind()):console.warn(this.getLoggingName()+".wrapS missing WebGL rendering context.")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"wrapT",{get:function(){throw new Error("wrapT is write-only")},set:function(a){this.gl?(this.bind(),this.gl.texParameteri(this._target,e["default"].TEXTURE_WRAP_T,a),this.unbind()):console.warn(this.getLoggingName()+".wrapT missing WebGL rendering context.")},enumerable:!0,configurable:!0}),b.prototype.upload=function(){throw new Error(this.getLoggingName()+".upload() must be implemented.")},b}(d["default"]),a("default",f)}}}),System.register("davinci-eight/core/ImageTexture.js",["./DataType","./PixelFormat","./Texture"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,
new d)}}();b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(a){function b(b,c,d,e){void 0===e&&(e=0);var f=a.call(this,c,d,e+1)||this;return f.image=b,f.setLoggingName("ImageTexture"),0===e&&f.synchUp(),f}return g(b,a),b.prototype.destructor=function(b){0===b&&this.cleanUp(),a.prototype.destructor.call(this,b+1)},Object.defineProperty(b.prototype,"naturalHeight",{get:function(){return this.image?this.image.naturalHeight:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"naturalWidth",{get:function(){return this.image?this.image.naturalWidth:void 0},enumerable:!0,configurable:!0}),b.prototype.upload=function(){this.gl?this.gl.texImage2D(this._target,0,d["default"].RGBA,d["default"].RGBA,c["default"].UNSIGNED_BYTE,this.image):console.warn(this.getLoggingName()+".upload() missing WebGL rendering context.")},b}(e["default"]),a("default",f)}}}),System.register("davinci-eight/checks/isDefined.js",[],function(a,b){"use strict";function c(a){return"undefined"!=typeof a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/isString.js",[],function(a,b){"use strict";function c(a){return"string"==typeof a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeString.js",["../checks/mustSatisfy","../checks/isString"],function(a,b){"use strict";function c(){return"be a string"}function d(a,b,d){return e["default"](a,f["default"](b),c,d),b}b&&b.id;a("default",d);var e,f;return{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/checks/isFunction.js",[],function(a,b){"use strict";function c(a){return"function"==typeof a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeFunction.js",["../checks/mustSatisfy","../checks/isFunction"],function(a,b){"use strict";function c(){return"be a function"}function d(a,b,d){return e["default"](a,f["default"](b),c,d),b}b&&b.id;a("default",d);var e,f;return{setters:[function(a){e=a},function(a){f=a}],execute:function(){}}}),System.register("davinci-eight/checks/mustSatisfy.js",[],function(a,b){"use strict";function c(a,b,c,d){if(!b){var e=c?c():"satisfy some condition",f=d?" in "+d():"";throw new Error(a+" must "+e+f+".")}}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/isNull.js",[],function(a,b){"use strict";function c(a){return null===a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/isObject.js",[],function(a,b){"use strict";function c(a){return"object"==typeof a}b&&b.id;return a("default",c),{setters:[],execute:function(){}}}),System.register("davinci-eight/checks/mustBeNonNullObject.js",["../checks/mustSatisfy","../checks/isNull","../checks/isObject"],function(a,b){"use strict";function c(){return"be a non-null `object`"}function d(a,b,d){return e["default"](a,g["default"](b)&&!f["default"](b),c,d),b}b&&b.id;a("default",d);var e,f,g;return{setters:[function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){}}}),System.register("davinci-eight/core/TextureTarget.js",[],function(a,b){"use strict";function c(a,b){switch(b){case d.TEXTURE_2D:case d.TEXTURE:return;default:throw new Error(a+": target must be one of the enumerated values.")}}b&&b.id;a("checkTextureTarget",c);var d;return{setters:[],execute:function(){!function(a){a[a.TEXTURE_2D=3553]="TEXTURE_2D",a[a.TEXTURE=5890]="TEXTURE"}(d||(d={})),a("TextureTarget",d),a("default",d)}}}),System.register("davinci-eight/loaders/TextureLoader.js",["../core/ImageTexture","../checks/isFunction","../checks/isDefined","../checks/mustBeString","../checks/mustBeFunction","../checks/mustBeNonNullObject","../core/TextureTarget"],function(a,b){"use strict";var c,d,e,f,g,h,i,j;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a}],execute:function(){j=function(){function a(a){this.contextManager=a,h["default"]("contextManager",a)}return a.prototype.loadImageTexture=function(a,b,h,j){var k=this;void 0===j&&(j={}),f["default"]("url",a),g["default"]("onLoad",b);var l=new Image;l.onload=function(){var a=new c["default"](l,i["default"].TEXTURE_2D,k.contextManager);a.bind(),a.upload(),a.unbind(),b(a)},l.onerror=function(){d["default"](h)&&h()},e["default"](j.crossOrigin)&&(l.crossOrigin=f["default"]("crossOrigin",j.crossOrigin)),l.src=a},a}(),a("default",j)}}}),System.register("davinci-eight.js",["./davinci-eight/commands/WebGLBlendFunc","./davinci-eight/commands/WebGLClearColor","./davinci-eight/commands/WebGLDisable","./davinci-eight/commands/WebGLEnable","./davinci-eight/controls/OrbitControls","./davinci-eight/controls/TrackballControls","./davinci-eight/core/Attrib","./davinci-eight/core/BeginMode","./davinci-eight/core/BlendingFactorDest","./davinci-eight/core/BlendingFactorSrc","./davinci-eight/core/Capability","./davinci-eight/core/ClearBufferMask","./davinci-eight/core/Color","./davinci-eight/config","./davinci-eight/core/DataType","./davinci-eight/core/Drawable","./davinci-eight/core/DepthFunction","./davinci-eight/core/GeometryArrays","./davinci-eight/core/GeometryElements","./davinci-eight/core/GraphicsProgramSymbols","./davinci-eight/core/ImageTexture","./davinci-eight/core/Mesh","./davinci-eight/core/PixelFormat","./davinci-eight/core/PixelType","./davinci-eight/core/Scene","./davinci-eight/core/Shader","./davinci-eight/core/Texture","./davinci-eight/core/TextureMagFilter","./davinci-eight/core/TextureMinFilter","./davinci-eight/core/TextureParameterName","./davinci-eight/core/TextureTarget","./davinci-eight/core/TextureWrapMode","./davinci-eight/core/Uniform","./davinci-eight/core/Usage","./davinci-eight/core/Engine","./davinci-eight/core/VertexBuffer","./davinci-eight/core/IndexBuffer","./davinci-eight/core/vertexArraysFromPrimitive","./davinci-eight/facets/AmbientLight","./davinci-eight/facets/ColorFacet","./davinci-eight/facets/DirectionalLight","./davinci-eight/facets/ModelFacet","./davinci-eight/facets/PointSizeFacet","./davinci-eight/facets/ReflectionFacetE2","./davinci-eight/facets/ReflectionFacetE3","./davinci-eight/facets/Vector3Facet","./davinci-eight/facets/ViewTransform","./davinci-eight/facets/frustumMatrix","./davinci-eight/facets/PerspectiveCamera","./davinci-eight/facets/PerspectiveTransform","./davinci-eight/facets/perspectiveMatrix","./davinci-eight/facets/viewMatrixFromEyeLookUp","./davinci-eight/facets/ModelE2","./davinci-eight/facets/ModelE3","./davinci-eight/atoms/DrawAttribute","./davinci-eight/atoms/DrawPrimitive","./davinci-eight/atoms/reduce","./davinci-eight/atoms/Vertex","./davinci-eight/shapes/ArrowBuilder","./davinci-eight/shapes/ConicalShellBuilder","./davinci-eight/shapes/CylindricalShellBuilder","./davinci-eight/shapes/RingBuilder","./davinci-eight/geometries/Simplex","./davinci-eight/geometries/GeometryMode","./davinci-eight/geometries/ArrowGeometry","./davinci-eight/geometries/BoxGeometry","./davinci-eight/geometries/CylinderGeometry","./davinci-eight/geometries/CurveGeometry","./davinci-eight/geometries/CurveMode","./davinci-eight/geometries/GridGeometry","./davinci-eight/geometries/SphereGeometry","./davinci-eight/geometries/TetrahedronGeometry","./davinci-eight/materials/HTMLScriptsMaterial","./davinci-eight/materials/LineMaterial","./davinci-eight/materials/ShaderMaterial","./davinci-eight/materials/MeshMaterial","./davinci-eight/materials/PointMaterial","./davinci-eight/materials/GraphicsProgramBuilder","./davinci-eight/math/mathcore","./davinci-eight/math/Vector1","./davinci-eight/math/Matrix2","./davinci-eight/math/Matrix3","./davinci-eight/math/Matrix4","./davinci-eight/math/Geometric2","./davinci-eight/math/Geometric3","./davinci-eight/math/Spinor2","./davinci-eight/math/Spinor3","./davinci-eight/math/Vector2","./davinci-eight/math/Vector3","./davinci-eight/math/Vector4","./davinci-eight/math/VectorN","./davinci-eight/utils/getCanvasElementById","./davinci-eight/collections/ShareableArray","./davinci-eight/collections/NumberShareableMap","./davinci-eight/core/refChange","./davinci-eight/core/ShareableBase","./davinci-eight/collections/StringShareableMap","./davinci-eight/utils/animation","./davinci-eight/visual/Arrow","./davinci-eight/visual/Basis","./davinci-eight/visual/Sphere","./davinci-eight/visual/Box","./davinci-eight/visual/Cylinder","./davinci-eight/visual/Curve","./davinci-eight/visual/Grid","./davinci-eight/visual/GridXY","./davinci-eight/visual/GridYZ","./davinci-eight/visual/GridZX","./davinci-eight/visual/Group","./davinci-eight/visual/HollowCylinder","./davinci-eight/visual/Minecraft","./davinci-eight/visual/MinecraftFigure","./davinci-eight/visual/Parallelepiped","./davinci-eight/visual/Tetrahedron","./davinci-eight/visual/Track","./davinci-eight/visual/Trail","./davinci-eight/visual/Turtle","./davinci-eight/diagram/Diagram3D","./davinci-eight/loaders/TextureLoader"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,_a,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a},function(a){x=a},function(a){y=a},function(a){z=a},function(a){A=a},function(a){B=a},function(a){C=a},function(a){D=a},function(a){E=a},function(a){F=a},function(a){G=a},function(a){H=a},function(a){I=a},function(a){J=a},function(a){K=a},function(a){L=a},function(a){M=a},function(a){N=a},function(a){O=a},function(a){P=a},function(a){Q=a},function(a){R=a},function(a){S=a},function(a){T=a},function(a){U=a},function(a){V=a},function(a){W=a},function(a){X=a},function(a){Y=a},function(a){Z=a},function(a){$=a},function(a){_=a},function(a){aa=a},function(a){ba=a},function(a){ca=a},function(a){da=a},function(a){ea=a},function(a){fa=a},function(a){ga=a},function(a){ha=a},function(a){ia=a},function(a){ja=a},function(a){ka=a},function(a){la=a},function(a){ma=a},function(a){na=a},function(a){oa=a},function(a){pa=a},function(a){qa=a},function(a){ra=a},function(a){sa=a},function(a){ta=a},function(a){ua=a},function(a){va=a},function(a){wa=a},function(a){xa=a},function(a){ya=a},function(a){za=a},function(a){Aa=a},function(a){Ba=a},function(a){Ca=a},function(a){Da=a},function(a){Ea=a},function(a){Fa=a},function(a){Ga=a},function(a){Ha=a},function(a){Ia=a},function(a){Ja=a},function(a){Ka=a},function(a){La=a},function(a){Ma=a},function(a){Na=a},function(a){Oa=a},function(a){Pa=a},function(a){Qa=a},function(a){Ra=a},function(a){Sa=a},function(a){Ta=a},function(a){Ua=a},function(a){Va=a},function(a){Wa=a},function(a){Xa=a},function(a){Ya=a},function(a){Za=a},function(a){$a=a},function(a){_a=a},function(a){ab=a},function(a){bb=a},function(a){cb=a},function(a){db=a},function(a){eb=a},function(a){fb=a},function(a){gb=a},function(a){hb=a},function(a){ib=a},function(a){jb=a},function(a){kb=a},function(a){lb=a},function(a){mb=a}],execute:function(){nb={get LAST_MODIFIED(){return p["default"].LAST_MODIFIED},get VERSION(){return p["default"].VERSION},get ShaderMaterial(){return wa["default"]},get HTMLScriptsMaterial(){return ua["default"]},get LineMaterial(){return va["default"]},get MeshMaterial(){return xa["default"]},get PointMaterial(){return ya["default"]},get GraphicsProgramBuilder(){return za["default"]},get BlendingFactorDest(){return k["default"]},get BlendingFactorSrc(){return l["default"]},get Capability(){return m["default"]},get DepthFunction(){return s["default"]},get WebGLBlendFunc(){return c["default"]},get WebGLClearColor(){return d["default"]},get WebGLDisable(){return e["default"]},get WebGLEnable(){return f["default"]},get ModelE2(){return aa["default"]},get ModelE3(){return ba["default"]},get ModelFacet(){return R["default"]},get Simplex(){return ka["default"]},get reduce(){return ea["default"]},get Vertex(){return fa["default"]},get frustumMatrix(){return X["default"]},get perspectiveMatrix(){return $["default"]},get viewMatrix(){return _["default"]},get Scene(){return A["default"]},get Shader(){return B["default"]},get Drawable(){return r.Drawable},get PerspectiveCamera(){return Y.PerspectiveCamera},get ViewTransform(){return W["default"]},get PerspectiveTransform(){return Z["default"]},get getCanvasElementById(){return Na["default"]},get Engine(){return K["default"]},get animation(){return Ta["default"]},get BeginMode(){return j["default"]},get ClearBufferMask(){return n["default"]},get DataType(){return q["default"]},get DrawMode(){return j["default"]},get PixelFormat(){return y["default"]},get PixelType(){return z["default"]},get ImageTexture(){return w["default"]},get Texture(){return C["default"]},get TextureMagFilter(){return D["default"]},get TextureMinFilter(){return E["default"]},get TextureParameterName(){return F["default"]},get TextureTarget(){return G["default"]},get TextureWrapMode(){return H["default"]},get Usage(){return J["default"]},get Attrib(){return i["default"]},get Uniform(){return I["default"]},get VertexBuffer(){return L["default"]},get IndexBuffer(){return M["default"]},get Color(){return o.Color},get vertexArraysFromPrimitive(){return N["default"]},get OrbitControls(){return g["default"]},get TrackballControls(){return h["default"]},get AmbientLight(){return O["default"]},get ColorFacet(){return P["default"]},get DirectionalLight(){return Q["default"]},get PointSizeFacet(){return S["default"]},get ReflectionFacetE2(){return T["default"]},get ReflectionFacetE3(){return U["default"]},get Vector3Facet(){return V["default"]},get ArrowBuilder(){return ga["default"]},get ArrowGeometry(){return ma["default"]},get BoxGeometry(){return na["default"]},get ConicalShellBuilder(){return ha["default"]},get CylinderGeometry(){return oa["default"]},get CylindricalShellBuilder(){return ia["default"]},get CurveGeometry(){return pa["default"]},get CurveMode(){return qa["default"]},get GeometryMode(){return la["default"]},get GridGeometry(){return ra["default"]},get RingBuilder(){return ja["default"]},get SphereGeometry(){return sa["default"]},get TetrahedronGeometry(){return ta["default"]},get Matrix2(){return Ca["default"]},get Matrix3(){return Da["default"]},get Matrix4(){return Ea["default"]},get Geometric2(){return Fa["default"]},get Geometric3(){return Ga["default"]},get Vector1(){return Ba["default"]},get Spinor2(){return Ha["default"]},get Spinor3(){return Ia["default"]},get Vector2(){return Ja["default"]},get Vector3(){return Ka["default"]},get Vector4(){return La["default"]},get VectorN(){return Ma["default"]},get GraphicsProgramSymbols(){return v["default"]},get GeometryArrays(){return t["default"]},get GeometryElements(){return u["default"]},get DrawAttribute(){return ca["default"]},get DrawPrimitive(){return da["default"]},get ShareableArray(){return Oa["default"]},get NumberShareableMap(){return Pa["default"]},get refChange(){return Qa["default"]},get ShareableBase(){return Ra["default"]},get StringShareableMap(){return Sa["default"]},get cos(){return Aa["default"].cos},get cosh(){return Aa["default"].cosh},get exp(){return Aa["default"].exp},get log(){return Aa["default"].log},get norm(){return Aa["default"].norm},get quad(){return Aa["default"].quad},get sin(){return Aa["default"].sin},get sinh(){return Aa["default"].sinh},get sqrt(){return Aa["default"].sqrt},get Diagram3D(){return lb["default"]},get TextureLoader(){return mb["default"]},get Arrow(){return Ua["default"]},get Basis(){return Va["default"]},get Sphere(){return Wa["default"]},get Box(){return Xa["default"]},get Mesh(){return x["default"]},get Cylinder(){return Ya["default"]},get Curve(){return Za["default"]},get Grid(){return $a["default"]},get GridXY(){return _a["default"]},get GridYZ(){return ab["default"]},get GridZX(){return bb["default"]},get Group(){return cb["default"]},get HollowCylinder(){return db["default"]},get MinecraftFigure(){return fb["default"]},get MinecraftArmL(){return eb.MinecraftArmL},get MinecraftArmR(){return eb.MinecraftArmR},get MinecraftHead(){return eb.MinecraftHead},get MinecraftLegL(){return eb.MinecraftLegL},get MinecraftLegR(){return eb.MinecraftLegR},get MinecraftTorso(){return eb.MinecraftTorso},get Parallelepiped(){return gb["default"]},get Tetrahedron(){return hb["default"]},get Track(){return ib["default"]},get Trail(){return jb["default"]},get Turtle(){return kb["default"]}},a("default",nb)}}});